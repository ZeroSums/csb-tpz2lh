parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JiFC":[function(require,module,exports) {

},{}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"fKNg":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.preventDefault=a,exports.stopPropagation=r;var o=function(){function t(n){e(this,t),this.propagationStopped,this.defaultPrevented,this.type=n,this.target=null}return n(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();function r(e){e.stopPropagation()}function a(e){e.preventDefault()}var i=o;exports.default=i;
},{}],"u3kG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"fF5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERROR_THRESHOLD=void 0;var e=.5;exports.ERROR_THRESHOLD=e;
},{}],"DDda":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function t(){e(this,t),this.disposed=!1}return n(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),r=o;exports.default=r;
},{}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){var o,u;t=t||e;for(var f=0,i=r.length,a=!1;f<i;)(u=+t(r[o=f+(i-f>>1)],n))<0?f=o+1:(i=o,a=!u);return a?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e,n){var t,o=r.length;if(r[0]<=e)return 0;if(e<=r[o-1])return o-1;if(n>0){for(t=1;t<o;++t)if(r[t]<e)return t-1}else if(n<0){for(t=1;t<o;++t)if(r[t]<=e)return t}else for(t=1;t<o;++t){if(r[t]==e)return t;if(r[t]<e)return"function"==typeof n?n(e,r[t-1],r[t])>0?t-1:t:r[t-1]-e<e-r[t]?t-1:t}return o-1}function t(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,o=0;o<t;o++)r[r.length]=n[o]}function u(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function i(r,e){var n,t=r.length,o=Array(r.length);for(n=0;n<t;n++)o[n]={index:n,value:r[n]};for(o.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=o[n].value}function a(r,n,t){var o=n||e;return r.every(function(e,n){if(0===n)return!0;var u=o(r[n-1],e);return!(u>0||t&&0===u)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.equals=f,exports.extend=o,exports.isSorted=a,exports.linearFindNearest=n,exports.numberSafeCompareFunction=e,exports.remove=u,exports.reverseSubArray=t,exports.stableSort=i;
},{}],"RgA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FALSE=t,exports.TRUE=e,exports.VOID=n,exports.memoizeOne=o,exports.toPromise=s;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var i=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(i,n)||(s=!0,o=this,n=i,t=e.apply(this,arguments)),t}}function s(r){return function(){var e;try{e=r()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}
},{"./array.js":"luEr"}],"mH6q":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)delete e[r]}function r(e){var r;for(r in e)return!1;return!r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.isEmpty=r;
},{}],"CR4Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Disposable.js")),t=i(require("./Event.js")),n=require("../functions.js"),r=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=y();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(i){c(u,e.default);var o=a(u);function u(e){var t;return s(this,u),(t=o.call(this)).eventTarget_=e,t.pendingRemovals_=null,t.dispatching_=null,t.listeners_=null,t}return l(u,[{key:"addEventListener",value:function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}}},{key:"dispatchEvent",value:function(e){var r="string"==typeof e,i=r?e:e.type,o=this.listeners_&&this.listeners_[i];if(o){var s=r?new t.default(e):e;s.target||(s.target=this.eventTarget_||this);var u,l=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,c[i]=0),++l[i];for(var f=0,a=o.length;f<a;++f)if(!1===(u="handleEvent"in o[f]?o[f].handleEvent(s):o[f].call(this,s))||s.propagationStopped){u=!1;break}if(0==--l[i]){var p=c[i];for(delete c[i];p--;)this.removeEventListener(i,n.VOID);delete l[i]}return u}}},{key:"disposeInternal",value:function(){this.listeners_&&(0,r.clear)(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var r=this.listeners_&&this.listeners_[e];if(r){var i=r.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=n.VOID,++this.pendingRemovals_[e]):(r.splice(i,1),0===r.length&&delete this.listeners_[e]))}}}]),u}(),_=d;exports.default=_;
},{"../Disposable.js":"DDda","./Event.js":"fKNg","../functions.js":"RgA2","../obj.js":"mH6q"}],"KniQ":[function(require,module,exports) {
"use strict";function t(){throw new Error("Unimplemented abstract method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0,exports.abstract=t,exports.getUid=r;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="7.1.0";exports.VERSION=o;
},{}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./events/Target.js")),e=r(require("./events/EventType.js")),n=require("./util.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){f(i,t.default);var o=l(i);function i(t,e,n,r){var c;return u(this,i),(c=o.call(this)).extent=t,c.pixelRatio_=n,c.resolution=e,c.state=r,c}return c(i,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return(0,n.abstract)()}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){(0,n.abstract)()}}]),i}(),d=v;exports.default=d;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./util.js":"KniQ"}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"ygGQ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function i(e){var t=l();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||!d(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function c(e,t,r){return(c=l()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&f(o,r.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var y={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"},b=function(e){o(a,s(Error));var t=i(a);function a(e){var r;n(this,a);var o=y[e];return(r=t.call(this,o)).code=e,r.name="AssertionError",r.message=o,r}return r(a)}(),h=b;exports.default=h;
},{}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ygGQ"}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyTransform=rt,exports.approximatelyEquals=A,exports.boundingExtent=s,exports.buffer=p,exports.clone=l,exports.closestSquaredDistanceXY=x,exports.containsCoordinate=d,exports.containsExtent=h,exports.containsXY=m,exports.coordinateRelationship=g,exports.createEmpty=v,exports.createOrUpdate=y,exports.createOrUpdateEmpty=M,exports.createOrUpdateFromCoordinate=E,exports.createOrUpdateFromCoordinates=b,exports.createOrUpdateFromFlatCoordinates=O,exports.createOrUpdateFromRings=T,exports.equals=C,exports.extend=I,exports.extendCoordinate=F,exports.extendCoordinates=R,exports.extendFlatCoordinates=S,exports.extendRings=N,exports.extendXY=U,exports.forEachCorner=w,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=W,exports.getCenter=X,exports.getCorner=j,exports.getEnlargedArea=G,exports.getForViewAndSize=q,exports.getHeight=H,exports.getIntersection=Y,exports.getIntersectionArea=_,exports.getMargin=z,exports.getRotatedViewport=V,exports.getSize=K,exports.getTopLeft=D,exports.getTopRight=P,exports.getWidth=$,exports.intersects=k,exports.intersectsSegment=tt,exports.isEmpty=J,exports.returnOrUpdate=Q,exports.scaleFromCenter=Z,exports.wrapAndSliceX=nt,exports.wrapX=et;var t=e(require("./extent/Relationship.js")),r=require("./asserts.js");function e(t){return t&&t.__esModule?t:{default:t}}function n(t,r){return f(t)||i(t,r)||u(t,r)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u=[],a=!0,i=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(u.push(n.value),!r||u.length!==r);a=!0);}catch(f){i=!0,o=f}finally{try{a||null==e.return||e.return()}finally{if(i)throw o}}return u}}function f(t){if(Array.isArray(t))return t}function s(t){for(var r=v(),e=0,n=t.length;e<n;++e)F(r,t[e]);return r}function c(t,r,e){return y(Math.min.apply(null,t),Math.min.apply(null,r),Math.max.apply(null,t),Math.max.apply(null,r),e)}function p(t,r,e){return e?(e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]+r,e[3]=t[3]+r,e):[t[0]-r,t[1]-r,t[2]+r,t[3]+r]}function l(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t.slice()}function x(t,r,e){var n,o;return(n=r<t[0]?t[0]-r:t[2]<r?r-t[2]:0)*n+(o=e<t[1]?t[1]-e:t[3]<e?e-t[3]:0)*o}function d(t,r){return m(t,r[0],r[1])}function h(t,r){return t[0]<=r[0]&&r[2]<=t[2]&&t[1]<=r[1]&&r[3]<=t[3]}function m(t,r,e){return t[0]<=r&&r<=t[2]&&t[1]<=e&&e<=t[3]}function g(r,e){var n=r[0],o=r[1],u=r[2],a=r[3],i=e[0],f=e[1],s=t.default.UNKNOWN;return i<n?s|=t.default.LEFT:i>u&&(s|=t.default.RIGHT),f<o?s|=t.default.BELOW:f>a&&(s|=t.default.ABOVE),s===t.default.UNKNOWN&&(s=t.default.INTERSECTING),s}function v(){return[1/0,1/0,-1/0,-1/0]}function y(t,r,e,n,o){return o?(o[0]=t,o[1]=r,o[2]=e,o[3]=n,o):[t,r,e,n]}function M(t){return y(1/0,1/0,-1/0,-1/0,t)}function E(t,r){var e=t[0],n=t[1];return y(e,n,e,n,r)}function b(t,r){return R(M(r),t)}function O(t,r,e,n,o){return S(M(o),t,r,e,n)}function T(t,r){return N(M(r),t)}function C(t,r){return t[0]==r[0]&&t[2]==r[2]&&t[1]==r[1]&&t[3]==r[3]}function A(t,r,e){return Math.abs(t[0]-r[0])<e&&Math.abs(t[2]-r[2])<e&&Math.abs(t[1]-r[1])<e&&Math.abs(t[3]-r[3])<e}function I(t,r){return r[0]<t[0]&&(t[0]=r[0]),r[2]>t[2]&&(t[2]=r[2]),r[1]<t[1]&&(t[1]=r[1]),r[3]>t[3]&&(t[3]=r[3]),t}function F(t,r){r[0]<t[0]&&(t[0]=r[0]),r[0]>t[2]&&(t[2]=r[0]),r[1]<t[1]&&(t[1]=r[1]),r[1]>t[3]&&(t[3]=r[1])}function R(t,r){for(var e=0,n=r.length;e<n;++e)F(t,r[e]);return t}function S(t,r,e,n,o){for(;e<n;e+=o)U(t,r[e],r[e+1]);return t}function N(t,r){for(var e=0,n=r.length;e<n;++e)R(t,r[e]);return t}function U(t,r,e){t[0]=Math.min(t[0],r),t[1]=Math.min(t[1],e),t[2]=Math.max(t[2],r),t[3]=Math.max(t[3],e)}function w(t,r){var e;return(e=r(L(t)))?e:(e=r(W(t)))?e:(e=r(P(t)))?e:(e=r(D(t)))||!1}function B(t){var r=0;return J(t)||(r=$(t)*H(t)),r}function L(t){return[t[0],t[1]]}function W(t){return[t[2],t[1]]}function X(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function j(t,e){var n;return"bottom-left"===e?n=L(t):"bottom-right"===e?n=W(t):"top-left"===e?n=D(t):"top-right"===e?n=P(t):(0,r.assert)(!1,13),n}function G(t,r){var e=Math.min(t[0],r[0]),n=Math.min(t[1],r[1]);return(Math.max(t[2],r[2])-e)*(Math.max(t[3],r[3])-n)}function q(t,r,e,o,u){var a=n(V(t,r,e,o),8),i=a[0],f=a[1],s=a[2],c=a[3],p=a[4],l=a[5],x=a[6],d=a[7];return y(Math.min(i,s,p,x),Math.min(f,c,l,d),Math.max(i,s,p,x),Math.max(f,c,l,d),u)}function V(t,r,e,n){var o=r*n[0]/2,u=r*n[1]/2,a=Math.cos(e),i=Math.sin(e),f=o*a,s=o*i,c=u*a,p=u*i,l=t[0],x=t[1];return[l-f+p,x-s-c,l-f-p,x-s+c,l+f-p,x+s+c,l+f+p,x+s-c,l-f+p,x-s-c]}function H(t){return t[3]-t[1]}function _(t,r){return B(Y(t,r))}function Y(t,r,e){var n=e||v();return k(t,r)?(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]):M(n),n}function z(t){return $(t)+H(t)}function K(t){return[t[2]-t[0],t[3]-t[1]]}function D(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function $(t){return t[2]-t[0]}function k(t,r){return t[0]<=r[2]&&t[2]>=r[0]&&t[1]<=r[3]&&t[3]>=r[1]}function J(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t}function Z(t,r){var e=(t[2]-t[0])/2*(r-1),n=(t[3]-t[1])/2*(r-1);t[0]-=e,t[2]+=e,t[1]-=n,t[3]+=n}function tt(r,e,n){var o=!1,u=g(r,e),a=g(r,n);if(u===t.default.INTERSECTING||a===t.default.INTERSECTING)o=!0;else{var i,f,s=r[0],c=r[1],p=r[2],l=r[3],x=e[0],d=e[1],h=n[0],m=n[1],v=(m-d)/(h-x);a&t.default.ABOVE&&!(u&t.default.ABOVE)&&(o=(i=h-(m-l)/v)>=s&&i<=p),o||!(a&t.default.RIGHT)||u&t.default.RIGHT||(o=(f=m-(h-p)*v)>=c&&f<=l),o||!(a&t.default.BELOW)||u&t.default.BELOW||(o=(i=h-(m-c)/v)>=s&&i<=p),o||!(a&t.default.LEFT)||u&t.default.LEFT||(o=(f=m-(h-s)*v)>=c&&f<=l)}return o}function rt(t,r,e,n){var o=[];if(n>1)for(var u=t[2]-t[0],a=t[3]-t[1],i=0;i<n;++i)o.push(t[0]+u*i/n,t[1],t[2],t[1]+a*i/n,t[2]-u*i/n,t[3],t[0],t[3]-a*i/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];r(o,o,2);for(var f=[],s=[],p=0,l=o.length;p<l;p+=2)f.push(o[p]),s.push(o[p+1]);return c(f,s,e)}function et(t,r){var e=r.getExtent(),n=X(t);if(r.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var o=$(e),u=Math.floor((n[0]-e[0])/o)*o;t[0]-=u,t[2]-=u}return t}function nt(t,r){if(r.canWrapX()){var e=r.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[e[0],t[1],e[2],t[3]]];et(t,r);var n=$(e);if($(t)>n)return[[e[0],t[1],e[2],t[3]]];if(t[0]<e[0])return[[t[0]+n,t[1],e[2],t[3]],[e[0],t[1],t[2],t[3]]];if(t[2]>e[2])return[[t[0],t[1],e[2],t[3]],[e[0],t[1],t[2]-n,t[3]]]}return[t]}
},{"./extent/Relationship.js":"bUAS","./asserts.js":"fLG6"}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.METERS_PER_UNIT=void 0,exports.fromCode=r;var e={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(r){return e[r]}var t={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};exports.METERS_PER_UNIT=t;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=function(){function t(e){n(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return o(t,[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}]),t}(),u=r;exports.default=u;
},{"./Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORLD_EXTENT=exports.RADIUS=exports.PROJECTIONS=exports.MAX_SAFE_Y=exports.HALF_SIZE=exports.EXTENT=void 0,exports.fromEPSG4326=P,exports.toEPSG4326=O;var t=e(require("./Projection.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=p();return function(){var r,o=l(t);if(e){var n=l(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return a(this,r)}}function a(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=6378137;exports.RADIUS=y;var b=Math.PI*y;exports.HALF_SIZE=b;var h=[-b,-b,b,b];exports.EXTENT=h;var v=[-180,-85,180,85];exports.WORLD_EXTENT=v;var w=y*Math.log(Math.tan(Math.PI/2));exports.MAX_SAFE_Y=w;var E=function(e){i(o,t.default);var r=f(o);function o(t){return u(this,o),r.call(this,{code:t,units:"m",extent:h,global:!0,worldExtent:v,getPointResolution:function(t,e){return t/Math.cosh(e[1]/y)}})}return n(o)}(),d=[new E("EPSG:3857"),new E("EPSG:102100"),new E("EPSG:102113"),new E("EPSG:900913"),new E("http://www.opengis.net/def/crs/EPSG/0/3857"),new E("http://www.opengis.net/gml/srs/epsg.xml#3857")];function P(t,e,r){var o=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(o));for(var n=0;n<o;n+=r){e[n]=b*t[n]/180;var u=y*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));u>w?u=w:u<-w&&(u=-w),e[n+1]=u}return e}function O(t,e,r){var o=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(o));for(var n=0;n<o;n+=r)e[n]=180*t[n]/b,e[n+1]=360*Math.atan(Math.exp(t[n+1]/y))/Math.PI-90;return e}exports.PROJECTIONS=d;
},{"./Projection.js":"WUar"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RADIUS=exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=void 0;var e=t(require("./Projection.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=l();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=6378137;exports.RADIUS=y;var b=[-180,-90,180,90];exports.EXTENT=b;var w=Math.PI*y/180;exports.METERS_PER_UNIT=w;var d=function(t){c(n,e.default);var r=f(n);function n(e,t){return u(this,n),r.call(this,{code:e,units:"degrees",extent:b,axisOrientation:t,global:!0,metersPerUnit:w,worldExtent:b})}return o(n)}(),O=[new d("CRS:84"),new d("EPSG:4326","neu"),new d("urn:ogc:def:crs:OGC:1.3:CRS84"),new d("urn:ogc:def:crs:OGC:2:84"),new d("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new d("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new d("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];exports.PROJECTIONS=O;
},{"./Projection.js":"WUar"}],"tlE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.clear=r,exports.get=t;var e={};function r(){e={}}function t(r){return e[r]||e[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function n(r,t){e[r]=t}
},{}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=o,exports.clear=r,exports.get=i,exports.remove=n;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"B96G":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}function t(r,t,n,o,a,u){var s=a-n,i=u-o;if(0!==s||0!==i){var f=((r-n)*s+(t-o)*i)/(s*s+i*i);f>1?(n=a,o=u):f>0&&(n+=s*f,o+=i*f)}return e(r,t,n,o)}function e(r,t,e,n){var o=e-r,a=n-t;return o*o+a*a}function n(r){for(var t=r.length,e=0;e<t;e++){for(var n=e,o=Math.abs(r[e][e]),a=e+1;a<t;a++){var u=Math.abs(r[a][e]);u>o&&(o=u,n=a)}if(0===o)return null;var s=r[n];r[n]=r[e],r[e]=s;for(var i=e+1;i<t;i++)for(var f=-r[i][e]/r[e][e],c=e;c<t+1;c++)e==c?r[i][c]=0:r[i][c]+=f*r[e][c]}for(var p=new Array(t),v=t-1;v>=0;v--){p[v]=r[v][t]/r[v][v];for(var x=v-1;x>=0;x--)r[x][t]-=r[x][v]*p[v]}return p}function o(r){return 180*r/Math.PI}function a(r){return r*Math.PI/180}function u(r,t){var e=r%t;return e*t<0?e+t:e}function s(r,t,e){return r+e*(t-r)}function i(r,t){var e=Math.pow(10,t);return Math.round(r*e)/e}function f(r,t){return Math.round(i(r,t))}function c(r,t){return Math.floor(i(r,t))}function p(r,t){return Math.ceil(i(r,t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=p,exports.clamp=r,exports.floor=c,exports.lerp=s,exports.modulo=u,exports.round=f,exports.solveLinearSystem=n,exports.squaredDistance=e,exports.squaredSegmentDistance=t,exports.toDegrees=o,exports.toFixed=i,exports.toRadians=a;
},{}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareVersions=r,exports.padNumber=e;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=u,exports.createStringXY=a,exports.degreesToStringHDMS=s,exports.distance=d,exports.equals=c,exports.format=i,exports.getWorldsAway=M,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.squaredDistanceToSegment=g,exports.toStringHDMS=l,exports.toStringXY=h,exports.wrapX=v;var t=require("./extent.js"),r=require("./math.js"),e=require("./string.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],a=t[0]-o,s=t[1]-u;0===a&&0===s&&(a=1);var i=Math.sqrt(a*a+s*s);return[o+e*a/i,u+e*s/i]}function u(t,r){var e,n,o=t[0],u=t[1],a=r[0],s=r[1],i=a[0],c=a[1],f=s[0],p=s[1],x=f-i,d=p-c,g=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return g<=0?(e=i,n=c):g>=1?(e=f,n=p):(e=i+g*x,n=c+g*d),[e,n]}function a(t){return function(r){return h(r,t)}}function s(t,n,o){var u=(0,r.modulo)(n+180,360)-180,a=Math.abs(3600*u),s=o||0,i=Math.floor(a/3600),c=Math.floor((a-3600*i)/60),f=(0,r.toFixed)(a-3600*i-60*c,s);f>=60&&(f=0,c+=1),c>=60&&(c=0,i+=1);var p=i+"°";return 0===c&&0===f||(p+=" "+(0,e.padNumber)(c,2)+"′"),0!==f&&(p+=" "+(0,e.padNumber)(f,2,s)+"″"),0!==u&&(p+=" "+t.charAt(u<0?1:0)),p}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function g(t,r){return x(t,u(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return i(t,"{x}, {y}",r)}function v(r,e){if(e.canWrapX()){var n=(0,t.getWidth)(e.getExtent()),o=M(r,e,n);o&&(r[0]-=o*n)}return r}function M(r,e,n){var o=e.getExtent(),u=0;return e.canWrapX()&&(r[0]<o[0]||r[0]>o[2])&&(n=n||(0,t.getWidth)(o),u=Math.floor((r[0]-o[0])/n)),u}
},{"./extent.js":"QDir","./math.js":"B96G","./string.js":"AiCK"}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_RADIUS=void 0,exports.getArea=s,exports.getDistance=a,exports.getLength=o,exports.offset=i;var t=require("./math.js"),e=6371008.8;function a(a,r,o){o=o||e;var n=(0,t.toRadians)(a[1]),s=(0,t.toRadians)(r[1]),i=(s-n)/2,h=(0,t.toRadians)(r[0]-a[0])/2,c=Math.sin(i)*Math.sin(i)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(s);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function r(t,e){for(var r=0,o=0,n=t.length;o<n-1;++o)r+=a(t[o],t[o+1],e);return r}function o(t,a){var n=(a=a||{}).radius||e,s=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(s,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":f=r(h=t.getCoordinates(),n);break;case"MultiLineString":case"Polygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)f+=r(h[g],n);break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(l=0,u=(c=h[g]).length;l<u;++l)f+=r(c[l],n);break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=o(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function n(e,a){for(var r=0,o=e.length,n=e[o-1][0],s=e[o-1][1],i=0;i<o;i++){var h=e[i][0],c=e[i][1];r+=(0,t.toRadians)(h-n)*(2+Math.sin((0,t.toRadians)(s))+Math.sin((0,t.toRadians)(c))),n=h,s=c}return r*a*a/2}function s(t,a){var r=(a=a||{}).radius||e,o=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(o,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(h=t.getCoordinates(),f=Math.abs(n(h[0],r)),g=1,M=h.length;g<M;++g)f-=Math.abs(n(h[g],r));break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(c=h[g],f+=Math.abs(n(c[0],r)),l=1,u=c.length;l<u;++l)f-=Math.abs(n(c[l],r));break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=s(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function i(a,r,o,n){n=n||e;var s=(0,t.toRadians)(a[1]),i=(0,t.toRadians)(a[0]),h=r/n,c=Math.asin(Math.sin(s)*Math.cos(h)+Math.cos(s)*Math.sin(h)*Math.cos(o)),g=i+Math.atan2(Math.sin(o)*Math.sin(h)*Math.cos(s),Math.cos(h)-Math.sin(s)*Math.sin(c));return[(0,t.toDegrees)(g),(0,t.toDegrees)(c)]}exports.DEFAULT_RADIUS=e;
},{"./math.js":"B96G"}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return o.METERS_PER_UNIT}}),Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return e.default}}),exports.addCommon=z,exports.addCoordinateTransforms=S,exports.addEquivalentProjections=j,exports.addEquivalentTransforms=m,exports.addProjection=E,exports.addProjections=x,exports.clearAllProjections=T,exports.clearUserProjection=W,exports.cloneTransform=l,exports.createProjection=U,exports.createSafeCoordinateTransform=k,exports.createTransformFromCoordinateTransform=R,exports.disableCoordinateWarning=p,exports.equivalent=C,exports.fromLonLat=_,exports.fromUserCoordinate=L,exports.fromUserExtent=F,exports.fromUserResolution=X,exports.get=P,exports.getPointResolution=v,exports.getTransform=M,exports.getTransformFromProjections=q,exports.getUserProjection=b,exports.identityTransform=g,exports.setUserProjection=y,exports.toLonLat=h,exports.toUserCoordinate=J,exports.toUserExtent=A,exports.toUserResolution=D,exports.transform=I,exports.transformExtent=N,exports.transformWithProjections=O,exports.useGeographic=w;var e=f(require("./proj/Projection.js")),r=require("./proj/epsg3857.js"),t=require("./proj/epsg4326.js"),o=require("./proj/Units.js"),n=require("./proj/projections.js"),i=require("./proj/transforms.js"),s=require("./extent.js"),u=require("./math.js"),a=require("./coordinate.js"),c=require("./sphere.js");function f(e){return e&&e.__esModule?e:{default:e}}var d=!0;function p(e){d=!(void 0===e||e)}function l(e,r,t){if(void 0!==r){for(var o=0,n=e.length;o<n;++o)r[o]=e[o];r=r}else r=e.slice();return r}function g(e,r,t){if(void 0!==r&&e!==r){for(var o=0,n=e.length;o<n;++o)r[o]=e[o];e=r}return e}function E(e){(0,n.add)(e.getCode(),e),(0,i.add)(e,e,l)}function x(e){e.forEach(E)}function P(e){return"string"==typeof e?(0,n.get)(e):e||null}function v(e,r,t,n){var i,s=(e=P(e)).getPointResolutionFunc();if(s){if(i=s(r,t),n&&n!==e.getUnits()){var u=e.getMetersPerUnit();u&&(i=i*u/o.METERS_PER_UNIT[n])}}else{var a=e.getUnits();if("degrees"==a&&!n||"degrees"==n)i=r;else{var f=q(e,P("EPSG:4326"));if(f===g&&"degrees"!==a)i=r*e.getMetersPerUnit();else{var d=[t[0]-r/2,t[1],t[0]+r/2,t[1],t[0],t[1]-r/2,t[0],t[1]+r/2];d=f(d,d,2),i=((0,c.getDistance)(d.slice(0,2),d.slice(2,4))+(0,c.getDistance)(d.slice(4,6),d.slice(6,8)))/2}var p=n?o.METERS_PER_UNIT[n]:e.getMetersPerUnit();void 0!==p&&(i/=p)}}return i}function j(e){x(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,i.add)(r,e,l)})})}function m(e,r,t,o){e.forEach(function(e){r.forEach(function(r){(0,i.add)(e,r,t),(0,i.add)(r,e,o)})})}function T(){(0,n.clear)(),(0,i.clear)()}function U(e,r){return e?"string"==typeof e?P(e):e:P(r)}function R(e){return function(r,t,o){var n=r.length;o=void 0!==o?o:2,t=void 0!==t?t:new Array(n);for(var i=0;i<n;i+=o)for(var s=e(r.slice(i,i+o)),u=s.length,a=0,c=o;a<c;++a)t[i+a]=a>=u?r[i+a]:s[a];return t}}function S(e,r,t,o){var n=P(e),s=P(r);(0,i.add)(n,s,R(t)),(0,i.add)(s,n,R(o))}function _(e,r){return p(),I(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function h(e,r){var t=I(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),o=t[0];return(o<-180||o>180)&&(t[0]=(0,u.modulo)(o+180,360)-180),t}function C(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:q(e,r)===l&&t}function q(e,r){var t=e.getCode(),o=r.getCode(),n=(0,i.get)(t,o);return n||(n=g),n}function M(e,r){return q(P(e),P(r))}function I(e,r,t){return M(r,t)(e,void 0,e.length)}function N(e,r,t,o){var n=M(r,t);return(0,s.applyTransform)(e,n,void 0,o)}function O(e,r,t){return q(r,t)(e)}var G=null;function y(e){G=P(e)}function W(){G=null}function b(){return G}function w(){y("EPSG:4326")}function J(e,r){return G?I(e,r,G):e}function L(e,r){return G?I(e,G,r):(d&&!(0,a.equals)(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(d=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function A(e,r){return G?N(e,r,G):e}function F(e,r){return G?N(e,G,r):e}function D(e,r){if(!G)return e;var t=P(r).getUnits(),n=G.getUnits();return t&&n?e*o.METERS_PER_UNIT[t]/o.METERS_PER_UNIT[n]:e}function X(e,r){if(!G)return e;var t=P(r).getUnits(),n=G.getUnits();return t&&n?e*o.METERS_PER_UNIT[n]/o.METERS_PER_UNIT[t]:e}function k(e,r,t){return function(o){var n,i;if(e.canWrapX()){var c=e.getExtent(),f=(0,s.getWidth)(c);o=o.slice(0),(i=(0,a.getWorldsAway)(o,e,f))&&(o[0]=o[0]-i*f),o[0]=(0,u.clamp)(o[0],c[0],c[2]),o[1]=(0,u.clamp)(o[1],c[1],c[3]),n=t(o)}else n=t(o);return i&&r.canWrapX()&&(n[0]+=i*(0,s.getWidth)(r.getExtent())),n}}function z(){j(r.PROJECTIONS),j(t.PROJECTIONS),m(t.PROJECTIONS,r.PROJECTIONS,r.fromEPSG4326,r.toEPSG4326)}z();
},{"./proj/Projection.js":"WUar","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/Units.js":"yZx6","./proj/projections.js":"tlE8","./proj/transforms.js":"uhlP","./extent.js":"QDir","./math.js":"B96G","./coordinate.js":"nGsj","./sphere.js":"q4ER"}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),i=require("../proj.js"),e=require("../math.js");function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=10,a=.25,h=function(){function s(e,o,a,h,u,d){r(this,s),this.sourceProj_=e,this.targetProj_=o;var c={},_=(0,i.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var i=t[0]+"/"+t[1];return c[i]||(c[i]=_(t)),c[i]},this.maxSourceExtent_=h,this.errorThresholdSquared_=u*u,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!h&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(h)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var l=(0,t.getTopLeft)(a),f=(0,t.getTopRight)(a),g=(0,t.getBottomRight)(a),W=(0,t.getBottomLeft)(a),v=this.transformInv_(l),m=this.transformInv_(f),x=this.transformInv_(g),p=this.transformInv_(W),j=n+(d?Math.max(0,Math.ceil(Math.log2((0,t.getArea)(a)/(d*d*256*256)))):0);if(this.addQuad_(l,f,g,W,v,m,x,p,j),this.wrapsXInSource_){var F=1/0;this.triangles_.forEach(function(t,i,e){F=Math.min(F,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-F>this.sourceWorldWidth_/2){var i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-F>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-F>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-F>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);var e=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-e<this.sourceWorldWidth_/2&&(t.source=i)}}.bind(this))}c={}}return o(s,[{key:"addTriangle_",value:function(t,i,e,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,i,e]})}},{key:"addQuad_",value:function(i,r,s,o,n,h,u,d,c){var _=(0,t.boundingExtent)([n,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([i,r,s,o]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>a||W}!g&&this.sourceProj_.isGlobal()&&l&&(W=l>a||W)}if(!(!W&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3]))||(0,t.intersects)(_,this.maxSourceExtent_)){var m=0;if(!(W||isFinite(n[0])&&isFinite(n[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1])))if(c>0)W=!0;else if(1!=(m=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(h[0])&&isFinite(h[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(d[0])&&isFinite(d[1])?0:1))&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!W){var x,p=[(i[0]+s[0])/2,(i[1]+s[1])/2],j=this.transformInv_(p);if(g)x=((0,e.modulo)(n[0],f)+(0,e.modulo)(u[0],f))/2-(0,e.modulo)(j[0],f);else x=(n[0]+u[0])/2-j[0];var F=(n[1]+u[1])/2-j[1];W=x*x+F*F>this.errorThresholdSquared_}if(W){if(Math.abs(i[0]-s[0])<=Math.abs(i[1]-s[1])){var E=[(r[0]+s[0])/2,(r[1]+s[1])/2],P=this.transformInv_(E),b=[(o[0]+i[0])/2,(o[1]+i[1])/2],I=this.transformInv_(b);this.addQuad_(i,r,E,b,n,h,P,I,c-1),this.addQuad_(b,E,s,o,I,P,u,d,c-1)}else{var y=[(i[0]+r[0])/2,(i[1]+r[1])/2],T=this.transformInv_(y),S=[(s[0]+o[0])/2,(s[1]+o[1])/2],M=this.transformInv_(S);this.addQuad_(i,y,S,o,n,T,M,d,c-1),this.addQuad_(y,r,s,S,T,h,u,M,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(i,s,o,n,u,d),0==(14&m)&&this.addTriangle_(i,s,r,n,u,h),m&&(0==(13&m)&&this.addTriangle_(r,o,i,h,d,n),0==(7&m)&&this.addTriangle_(r,o,s,h,d,u))}}},{key:"calculateSourceExtent",value:function(){var i=(0,t.createEmpty)();return this.triangles_.forEach(function(e,r,s){var o=e.source;(0,t.extendCoordinate)(i,o[0]),(0,t.extendCoordinate)(i,o[1]),(0,t.extendCoordinate)(i,o[2])}),i}},{key:"getTriangles",value:function(){return this.triangles_}}]),s}(),u=h;exports.default=u;
},{"../extent.js":"QDir","../proj.js":"Diht","../math.js":"B96G"}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORKER_OFFSCREEN_CANVAS=exports.WEBKIT=exports.SAFARI_BUG_237906=exports.SAFARI=exports.PASSIVE_EVENT_LISTENERS=exports.MAC=exports.IMAGE_DECODE=exports.FIREFOX=exports.DEVICE_PIXEL_RATIO=void 0;var e="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",o=e.includes("firefox");exports.FIREFOX=o;var r=e.includes("safari")&&!e.includes("chrom");exports.SAFARI=r;var t=r&&(e.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(e));exports.SAFARI_BUG_237906=t;var s=e.includes("webkit")&&!e.includes("edge");exports.WEBKIT=s;var n=e.includes("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var a="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=a;var E="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=E;var p=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,o),window.removeEventListener("_",null,o)}catch(r){}return e}();exports.PASSIVE_EVENT_LISTENERS=p;
},{}],"Xno5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerHeight=o,exports.outerWidth=n,exports.releaseCanvas=r,exports.removeChildren=s,exports.removeNode=i,exports.replaceChildren=d,exports.replaceNode=a;var e=require("./has.js");function t(t,r,n,o){var a;return a=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas"),t&&(a.width=t),r&&(a.height=r),a.getContext("2d",o)}function r(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function n(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function o(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function a(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function d(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"f3Nv"}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceExtentResolution=g,exports.calculateSourceResolution=c,exports.canvasPool=void 0,exports.render=u;var e,t=require("./extent.js"),a=require("./dom.js"),o=require("./proj.js"),r=require("./math.js"),n=[];function i(e,t,a,o,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,a),e.lineTo(o,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,o)+1,Math.max(a,r)),e.restore()}function s(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function l(){if(void 0===e){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",i(t,4,5,4,0),i(t,4,5,0,5);var a=t.getImageData(0,0,3,3).data;e=s(a,0)||s(a,4)||s(a,8)}return e}function c(e,a,r,n){var i=(0,o.transform)(r,a,e),s=(0,o.getPointResolution)(a,n,r),l=a.getMetersPerUnit();void 0!==l&&(s*=l);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var g=e.getExtent();if(!g||(0,t.containsCoordinate)(g,i)){var u=(0,o.getPointResolution)(e,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function g(e,a,o,r){var n=(0,t.getCenter)(o),i=c(e,a,n,r);return(!isFinite(i)||i<=0)&&(0,t.forEachCorner)(o,function(t){return i=c(e,a,t,r),isFinite(i)&&i>0}),i}function u(e,o,i,s,c,g,u,v,h,f,m,d){var x=(0,a.createCanvasContext2D)(Math.round(i*e),Math.round(i*o),n);if(d||(x.imageSmoothingEnabled=!1),0===h.length)return x.canvas;function p(e){return Math.round(e*i)/i}x.scale(i,i),x.globalCompositeOperation="lighter";var T=(0,t.createEmpty)();h.forEach(function(e,a,o){(0,t.extend)(T,e.extent)});var b=(0,t.getWidth)(T),M=(0,t.getHeight)(T),P=(0,a.createCanvasContext2D)(Math.round(i*b/s),Math.round(i*M/s));d||(P.imageSmoothingEnabled=!1);var C=i/s;h.forEach(function(e,a,o){var r=e.extent[0]-T[0],n=-(e.extent[3]-T[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);e.image.width>0&&e.image.height>0&&P.drawImage(e.image,f,f,e.image.width-2*f,e.image.height-2*f,r*C,n*C,i*C,s*C)});var E=(0,t.getTopLeft)(u);return v.getTriangles().forEach(function(e,t,a){var o=e.source,n=e.target,c=o[0][0],u=o[0][1],v=o[1][0],h=o[1][1],f=o[2][0],m=o[2][1],b=p((n[0][0]-E[0])/g),M=p(-(n[0][1]-E[1])/g),C=p((n[1][0]-E[0])/g),S=p(-(n[1][1]-E[1])/g),j=p((n[2][0]-E[0])/g),y=p(-(n[2][1]-E[1])/g),R=c,q=u;c=0,u=0;var w=[[v-=R,h-=q,0,0,C-b],[f-=R,m-=q,0,0,j-b],[0,0,v,h,S-M],[0,0,f,m,y-M]],O=(0,r.solveLinearSystem)(w);if(O){if(x.save(),x.beginPath(),l()||!d){x.moveTo(C,S);for(var k=b-C,D=M-S,F=0;F<4;F++)x.lineTo(C+p((F+1)*k/4),S+p(F*D/3)),3!=F&&x.lineTo(C+p((F+1)*k/4),S+p((F+1)*D/3));x.lineTo(j,y)}else x.moveTo(C,S),x.lineTo(b,M),x.lineTo(j,y);x.clip(),x.transform(O[0],O[2],O[1],O[3],b,M),x.translate(T[0]-R,T[3]-q),x.scale(s/i,-s/i),x.drawImage(P.canvas,0,0),x.restore()}}),m&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,v.getTriangles().forEach(function(e,t,a){var o=e.target,r=(o[0][0]-E[0])/g,n=-(o[0][1]-E[1])/g,i=(o[1][0]-E[0])/g,s=-(o[1][1]-E[1])/g,l=(o[2][0]-E[0])/g,c=-(o[2][1]-E[1])/g;x.beginPath(),x.moveTo(i,s),x.lineTo(r,n),x.lineTo(l,c),x.closePath(),x.stroke()}),x.restore()),x.canvas}exports.canvasPool=n;
},{"./extent.js":"QDir","./dom.js":"Xno5","./proj.js":"Diht","./math.js":"B96G"}],"UqnM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"mH6q"}],"rc7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=s(require("../events/EventType.js")),r=s(require("../ImageBase.js")),n=s(require("../ImageState.js")),o=s(require("./Triangulation.js")),i=require("../reproj.js"),u=require("../extent.js"),a=require("../events.js");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=y(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=m();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(s){g(f,r.default);var c=d(f);function f(e,r,a,s,p,h,y){var g;l(this,f);var _=e.getExtent(),d=r.getExtent(),v=d?(0,u.getIntersection)(a,d):a,b=(0,u.getCenter)(v),m=(0,i.calculateSourceResolution)(e,r,b,s),j=t.ERROR_THRESHOLD,O=new o.default(e,r,v,_,m*j,s),R=h(O.calculateSourceExtent(),m,p),E=R?n.default.IDLE:n.default.EMPTY,x=R?R.getPixelRatio():1;return(g=c.call(this,a,s,x,E)).targetProj_=r,g.maxSourceExtent_=_,g.triangulation_=O,g.targetResolution_=s,g.targetExtent_=a,g.sourceImage_=R,g.sourcePixelRatio_=x,g.interpolate_=y,g.canvas_=null,g.sourceListenerKey_=null,g}return p(f,[{key:"disposeInternal",value:function(){this.state==n.default.LOADING&&this.unlistenSource_(),h(j(f.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var t=this.sourceImage_.getState();if(t==n.default.LOADED){var e=(0,u.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,i.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}},{key:"load",value:function(){if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==n.default.LOADED||t==n.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,a.listen)(this.sourceImage_,e.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=n.default.LOADED&&e!=n.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){(0,a.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}]),f}(),R=O;exports.default=R;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../ImageBase.js":"Ojbp","../ImageState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../extent.js":"QDir","../events.js":"UqnM"}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"IdSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.unByKey=h;var e=n(require("./events/Target.js")),t=n(require("./events/EventType.js")),r=require("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=p();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(n){f(u,e.default);var o=l(u);function u(){var e;return i(this,u),(e=o.call(this)).on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return c(u,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(t.default.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,r.listen)(this,e[i],t);return o}return(0,r.listen)(this,e,t)}},{key:"onceInternal",value:function(e,t){var n;if(Array.isArray(e)){var o=e.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=(0,r.listenOnce)(this,e[i],t)}else n=(0,r.listenOnce)(this,e,t);return t.ol_key=n,n}},{key:"unInternal",value:function(e,t){var r=t.ol_key;if(r)h(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}]),u}();function h(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)(0,r.unlistenByKey)(e[t]);else(0,r.unlistenByKey)(e)}b.prototype.on,b.prototype.once,b.prototype.un;var d=b;exports.default=d;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./events.js":"UqnM"}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ObjectEvent=void 0;var e=i(require("./events/Event.js")),t=i(require("./ObjectEventType.js")),n=i(require("./Observable.js")),r=require("./util.js"),o=require("./obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=h();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(t){l(r,e.default);var n=v(r);function r(e,t,o){var i;return c(this,r),(i=n.call(this,e)).key=t,i.oldValue=o,i}return a(r)}();exports.ObjectEvent=d;var _=function(e){l(u,n.default);var i=v(u);function u(e){var t;return c(this,u),(t=i.call(this)).on,t.once,t.un,(0,r.getUid)(p(t)),t.values_=null,void 0!==e&&t.setProperties(e),t}return a(u,[{key:"get",value:function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(e,n){var r;r="change:".concat(e),this.hasListener(r)&&this.dispatchEvent(new d(r,e,n)),r=t.default.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new d(r,e,n))}},{key:"addChangeListener",value:function(e,t){this.addEventListener("change:".concat(e),t)}},{key:"removeChangeListener",value:function(e,t){this.removeEventListener("change:".concat(e),t)}},{key:"set",value:function(e,t,n){var r=this.values_||(this.values_={});if(n)r[e]=t;else{var o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}},{key:"setProperties",value:function(e,t){for(var n in e)this.set(n,e[n],t)}},{key:"applyProperties",value:function(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}},{key:"unset",value:function(e,t){if(this.values_&&e in this.values_){var n=this.values_[e];delete this.values_[e],(0,o.isEmpty)(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}]),u}(),O=_;exports.default=O;
},{"./events/Event.js":"fKNg","./ObjectEventType.js":"zehl","./Observable.js":"IdSm","./util.js":"KniQ","./obj.js":"mH6q"}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../Object.js")),e=require("../util.js"),r=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(n){a(u,t.default);var o=f(u);function u(t){var e;i(this,u),(e=o.call(this)).projection=(0,r.get)(t.projection),e.attributions_=h(t.attributions),e.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,e.loading=!1,e.state_=void 0!==t.state?t.state:"ready",e.wrapX_=void 0!==t.wrapX&&t.wrapX,e.interpolate_=!!t.interpolate,e.viewResolver=null,e.viewRejector=null;var n=p(e);return e.viewPromise_=new Promise(function(t,e){n.viewResolver=t,n.viewRejector=e}),e}return c(u,[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(){return(0,e.abstract)()}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=h(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}]),u}();function h(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var d=v;exports.default=d;
},{"../Object.js":"PhPh","../util.js":"KniQ","../proj.js":"Diht"}],"XHvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ImageSourceEventType=exports.ImageSourceEvent=void 0,exports.defaultImageLoadFunction=O;var e=s(require("../events/Event.js")),t=s(require("../ImageState.js")),r=s(require("../reproj/Image.js")),n=s(require("./Source.js")),o=require("../util.js"),i=require("../extent.js"),u=require("../proj.js"),a=require("../array.js");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=b();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};exports.ImageSourceEventType=m;var I=function(t){d(n,e.default);var r=h(n);function n(e,t){var o;return p(this,n),(o=r.call(this,e)).image=t,o}return f(n)}();exports.ImageSourceEvent=I;var _=function(e){d(c,n.default);var s=h(c);function c(e){var t;return p(this,c),(t=s.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate})).on,t.once,t.un,t.resolutions_=void 0!==e.resolutions?e.resolutions:null,t.reprojectedImage_=null,t.reprojectedRevision_=0,t}return f(c,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"findNearestResolution",value:function(e){if(this.resolutions_){var t=(0,a.linearFindNearest)(this.resolutions_,e,0);e=this.resolutions_[t]}return e}},{key:"getImage",value:function(e,t,n,o){var a=this.getProjection();if(a&&o&&!(0,u.equivalent)(a,o)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,u.equivalent)(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==t&&(0,i.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new r.default(a,o,e,t,n,function(e,t,r){return this.getImageInternal(e,t,r,a)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return a&&(o=a),this.getImageInternal(e,t,n,o)}},{key:"getImageInternal",value:function(e,t,r,n){return(0,o.abstract)()}},{key:"handleImageChange",value:function(e){var r,n=e.target;switch(n.getState()){case t.default.LOADING:this.loading=!0,r=m.IMAGELOADSTART;break;case t.default.LOADED:this.loading=!1,r=m.IMAGELOADEND;break;case t.default.ERROR:this.loading=!1,r=m.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new I(r,n))}}]),c}();function O(e,t){e.getImage().src=t}var R=_;exports.default=R;
},{"../events/Event.js":"fKNg","../ImageState.js":"u3kG","../reproj/Image.js":"rc7I","./Source.js":"H38a","../util.js":"KniQ","../extent.js":"QDir","../proj.js":"Diht","../array.js":"luEr"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.listenImage=m;var t=u(require("./events/EventType.js")),e=u(require("./ImageBase.js")),n=u(require("./ImageState.js")),r=require("./has.js"),i=require("./extent.js"),o=require("./events.js");function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){l(o,e.default);var r=y(o);function o(t,e,i,u,s,c){var f;return a(this,o),(f=r.call(this,t,e,i,n.default.IDLE)).src_=u,f.image_=new Image,null!==s&&(f.image_.crossOrigin=s),f.unlisten_=null,f.state=n.default.IDLE,f.imageLoadFunction_=c,f}return f(o,[{key:"getImage",value:function(){return this.image_}},{key:"handleImageError_",value:function(){this.state=n.default.ERROR,this.unlistenImage_(),this.changed()}},{key:"handleImageLoad_",value:function(){void 0===this.resolution&&(this.resolution=(0,i.getHeight)(this.extent)/this.image_.height),this.state=n.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state!=n.default.IDLE&&this.state!=n.default.ERROR||(this.state=n.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=m(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"setImage",value:function(t){this.image_=t,this.resolution=(0,i.getHeight)(this.extent)/this.image_.height}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function m(e,n,i){var u=e,s=!0,a=!1,c=!1,f=[(0,o.listenOnce)(u,t.default.LOAD,function(){c=!0,a||n()})];return u.src&&r.IMAGE_DECODE?(a=!0,u.decode().then(function(){s&&n()}).catch(function(t){s&&(c?n():i())})):f.push((0,o.listenOnce)(u,t.default.ERROR,i)),function(){s=!1,f.forEach(o.unlistenByKey)}}var v=b;exports.default=v;
},{"./events/EventType.js":"C8cu","./ImageBase.js":"Ojbp","./ImageState.js":"u3kG","./has.js":"f3Nv","./extent.js":"QDir","./events.js":"UqnM"}],"TDA1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_VERSION=void 0;var e="1.3.0";exports.DEFAULT_VERSION=e;
},{}],"n7G7":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"e4Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../events/EventType.js")),t=p(require("./Image.js")),r=h(require("../Image.js")),i=require("./wms.js"),n=require("../uri.js"),o=require("../asserts.js"),a=require("../reproj.js"),s=require("../math.js"),u=require("../string.js"),c=require("../extent.js"),l=require("../proj.js");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=S();return function(){var r,i=E(e);if(t){var n=E(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=4,T=[101,101],P=function(f){y(h,t.default);var p=O(h);function h(e){var r;return d(this,h),e=e||{},(r=p.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,r.params_=Object.assign({},e.params),r.v13_=!0,r.updateV13_(),r.serverType_=e.serverType,r.hidpi_=void 0===e.hidpi||e.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==e.ratio?e.ratio:1.5,r}return v(h,[{key:"getFeatureInfoUrl",value:function(e,t,r,n){if(void 0!==this.url_){var o=(0,l.get)(r),u=this.getProjection();u&&u!==o&&(t=(0,a.calculateSourceResolution)(u,o,e,t),e=(0,l.transform)(e,o,u));var f=(0,c.getForViewAndSize)(e,t,0,T),p={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,this.params_,n);var h=(0,s.floor)((e[0]-f[0])/t,j),g=(0,s.floor)((f[3]-e[1])/t,j);return p[this.v13_?"I":"X"]=h,p[this.v13_?"J":"Y"]=g,this.getRequestUrl_(f,T,1,u||o,p)}}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var o=this.params_.LAYERS;if(!(!Array.isArray(o)||1===o.length))return;r.LAYER=o}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*a/28e-5}return Object.assign(r,t),(0,n.appendParams)(this.url_,r)}}},{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(t,n,o,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var u=n/o,l=(0,c.getCenter)(t),f=(0,s.ceil)((0,c.getWidth)(t)/u,j),p=(0,s.ceil)((0,c.getHeight)(t)/u,j),h=(0,c.getForViewAndSize)(l,u,0,[f,p]),g=(0,s.ceil)(this.ratio_*(0,c.getWidth)(t)/u,j),d=(0,s.ceil)(this.ratio_*(0,c.getHeight)(t)/u,j),_=(0,c.getForViewAndSize)(l,u,0,[g,d]),v=this.image_;if(v&&this.renderedRevision_==this.getRevision()&&v.getResolution()==n&&v.getPixelRatio()==o&&(0,c.containsExtent)(v.getExtent(),h))return v;var y={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(y,this.params_),this.imageSize_[0]=(0,s.round)((0,c.getWidth)(_)/u,j),this.imageSize_[1]=(0,s.round)((0,c.getHeight)(_)/u,j);var m=this.getRequestUrl_(_,this.imageSize_,o,a,y);return this.image_=new r.default(_,n,o,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(e.default.CHANGE,this.handleImageChange.bind(this)),this.image_}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getRequestUrl_",value:function(e,t,r,i,a){if((0,o.assert)(void 0!==this.url_,9),a[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case"geoserver":var s=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+s:a.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:(0,o.assert)(!1,8)}a.WIDTH=t[0],a.HEIGHT=t[1];var u,c=i.getAxisOrientation();return u=this.v13_&&"ne"==c.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,a.BBOX=u.join(","),(0,n.appendParams)(this.url_,a)}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||i.DEFAULT_VERSION;this.v13_=(0,u.compareVersions)(e,"1.3")>=0}}]),h}(),I=P;exports.default=I;
},{"../events/EventType.js":"C8cu","./Image.js":"XHvt","../Image.js":"DHWK","./wms.js":"TDA1","../uri.js":"n7G7","../asserts.js":"fLG6","../reproj.js":"U255","../math.js":"B96G","../string.js":"AiCK","../extent.js":"QDir","../proj.js":"Diht"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=o(require("./AssertionError.js")),e=o(require("./Object.js")),r=o(require("./CollectionEventType.js")),n=o(require("./events/Event.js"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d={LENGTH:"length"},_=function(t){f(r,n.default);var e=l(r);function r(t,n,o){var i;return s(this,r),(i=e.call(this,t)).element=n,i.index=o,i}return a(r)}();exports.CollectionEvent=_;var b=function(n){f(i,e.default);var o=l(i);function i(t,e){var r;if(s(this,i),(r=o.call(this)).on,r.once,r.un,e=e||{},r.unique_=!!e.unique,r.array_=t||[],r.unique_)for(var n=0,u=r.array_.length;n<u;++n)r.assertUnique_(r.array_[n],n);return r.updateLength_(),r}return a(i,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(d.LENGTH)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new _(r.default.ADD,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new _(r.default.REMOVE,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new _(r.default.REMOVE,n,t)),this.dispatchEvent(new _(r.default.ADD,e,t))}}},{key:"updateLength_",value:function(){this.set(d.LENGTH,this.array_.length)}},{key:"assertUnique_",value:function(e,r){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)}}]),i}(),g=b;exports.default=g;
},{"./AssertionError.js":"ygGQ","./Object.js":"PhPh","./CollectionEventType.js":"BTrx","./events/Event.js":"fKNg"}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=c,exports.compose=v,exports.composeCssTransform=l,exports.create=o,exports.determinant=h,exports.invert=y,exports.makeInverse=d,exports.makeScale=x,exports.multiply=u,exports.reset=s,exports.rotate=p,exports.scale=f,exports.set=a,exports.setFromArray=i,exports.toString=M,exports.translate=m;var r,t=require("./has.js"),e=require("./asserts.js"),n=new Array(6);function o(){return[1,0,0,1,0,0]}function s(r){return a(r,1,0,0,1,0,0)}function u(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],m=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*m+u,r[5]=n*x+s*m+a,r}function a(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function i(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function c(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function p(r,t){var e=Math.cos(t),o=Math.sin(t);return u(r,a(n,e,o,-o,e,0,0))}function f(r,t,e){return u(r,a(n,t,0,0,e,0,0))}function x(r,t,e){return a(r,t,0,0,e,0,0)}function m(r,t,e){return u(r,a(n,1,0,0,1,t,e))}function v(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function l(r,t,e,n,s,u,a){return M(v(o(),r,t,e,n,s,u,a))}function y(r){return d(r,r)}function d(r,t){var n=h(t);(0,e.assert)(0!==n,32);var o=t[0],s=t[1],u=t[2],a=t[3],i=t[4],c=t[5];return r[0]=a/n,r[1]=-s/n,r[2]=-u/n,r[3]=o/n,r[4]=(u*c-a*i)/n,r[5]=-(o*c-s*i)/n,r}function h(r){return r[0]*r[3]-r[1]*r[2]}function M(e){var n="matrix("+e.join(", ")+")";if(t.WORKER_OFFSCREEN_CANVAS)return n;var o=r||(r=document.createElement("div"));return o.style.transform=n,o.style.transform}
},{"./has.js":"f3Nv","./asserts.js":"fLG6"}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asArray=i,exports.asString=a,exports.fromString=void 0,exports.isStringColor=l,exports.normalize=p,exports.toString=c;var r=require("./asserts.js"),t=require("./math.js"),e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(r){return"string"==typeof r?r:c(r)}function n(r){var t=document.createElement("div");if(t.style.color=r,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}var o=function(){var r={},t=0;return function(e){var s;if(r.hasOwnProperty(e))s=r[e];else{if(t>=1024){var a=0;for(var n in r)0==(3&a++)&&(delete r[n],--t)}s=u(e),r[e]=s,++t}return s}}();function i(r){return Array.isArray(r)?r:o(r)}function u(t){var a,o,i,u,c;if(s.exec(t)&&(t=n(t)),e.exec(t)){var l,f=t.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(t.substr(1+0*l,l),16),o=parseInt(t.substr(1+1*l,l),16),i=parseInt(t.substr(1+2*l,l),16),u=v?parseInt(t.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else t.startsWith("rgba(")?p(c=t.slice(5,-1).split(",").map(Number)):t.startsWith("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,t.clamp)(r[0]+.5|0,0,255),r[1]=(0,t.clamp)(r[1]+.5|0,0,255),r[2]=(0,t.clamp)(r[2]+.5|0,0,255),r[3]=(0,t.clamp)(r[3],0,1),r}function c(r){var t=r[0];t!=(0|t)&&(t=t+.5|0);var e=r[1];e!=(0|e)&&(e=e+.5|0);var s=r[2];return s!=(0|s)&&(s=s+.5|0),"rgba("+t+","+e+","+s+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}function l(r){return s.test(r)&&(r=n(r)),e.test(r)||r.startsWith("rgba(")||r.startsWith("rgb(")}exports.fromString=o;
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V0oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var r=function(){function e(){t(this,e),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return a(e,[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(e,t,i){var a=c(e,t,i);return a in this.cache_?this.cache_[a]:null}},{key:"set",value:function(e,t,i,a){var r=c(e,t,i);this.cache_[r]=a,++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}]),e}();function c(t,i,a){return i+":"+t+":"+(a?(0,e.asString)(a):"null")}var n=r;exports.default=n;var h=new r;exports.shared=h;
},{"../color.js":"eucy"}],"HbeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};exports.default=e;
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../Object.js")),e=u(require("./Property.js")),n=require("../util.js"),o=require("../asserts.js"),r=require("../math.js");function u(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=f(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var n,o=O(t);if(e){var r=O(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(u){y(f,t.default);var s=p(f);function f(t){var n;a(this,f),(n=s.call(this)).on,n.once,n.un,n.background_=t.background;var r=Object.assign({},t);return"object"===i(t.properties)&&(delete r.properties,Object.assign(r,t.properties)),r[e.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,o.assert)("number"==typeof r[e.default.OPACITY],64),r[e.default.VISIBLE]=void 0===t.visible||t.visible,r[e.default.Z_INDEX]=t.zIndex,r[e.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,r[e.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,r[e.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,r[e.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,n.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return l(f,[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,r.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return(0,n.abstract)()}},{key:"getLayerStatesArray",value:function(t){return(0,n.abstract)()}},{key:"getExtent",value:function(){return this.get(e.default.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(e.default.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(e.default.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(e.default.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(e.default.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(e.default.OPACITY)}},{key:"getSourceState",value:function(){return(0,n.abstract)()}},{key:"getVisible",value:function(){return this.get(e.default.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(e.default.Z_INDEX)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(e.default.EXTENT,t)}},{key:"setMaxResolution",value:function(t){this.set(e.default.MAX_RESOLUTION,t)}},{key:"setMinResolution",value:function(t){this.set(e.default.MIN_RESOLUTION,t)}},{key:"setMaxZoom",value:function(t){this.set(e.default.MAX_ZOOM,t)}},{key:"setMinZoom",value:function(t){this.set(e.default.MIN_ZOOM,t)}},{key:"setOpacity",value:function(t){(0,o.assert)("number"==typeof t,64),this.set(e.default.OPACITY,t)}},{key:"setVisible",value:function(t){this.set(e.default.VISIBLE,t)}},{key:"setZIndex",value:function(t){this.set(e.default.Z_INDEX,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),c(O(f.prototype),"disposeInternal",this).call(this)}}]),f}(),m=g;exports.default=m;
},{"../Object.js":"PhPh","./Property.js":"HbeD","../util.js":"KniQ","../asserts.js":"fLG6","../math.js":"B96G"}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.inView=S;var e=i(require("./Base.js")),t=i(require("../events/EventType.js")),r=i(require("./Property.js")),n=i(require("../render/EventType.js")),o=require("../asserts.js"),u=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=_();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(i){h(c,e.default);var a=p(c);function c(e){var t;s(this,c);var n=Object.assign({},e);delete n.source,(t=a.call(this,n)).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.rendered=!1,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addChangeListener(r.default.SOURCE,t.handleSourcePropertyChange_);var o=e.source?e.source:null;return t.setSource(o),t}return l(c,[{key:"getLayersArray",value:function(e){return(e=e||[]).push(this),e}},{key:"getLayerStatesArray",value:function(e){return(e=e||[]).push(this.getLayerState()),e}},{key:"getSource",value:function(){return this.get(r.default.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed()}},{key:"handleSourcePropertyChange_",value:function(){this.sourceChangeKey_&&((0,u.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=(0,u.listen)(e,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()}},{key:"getFeatures",value:function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(e){return e([])})}},{key:"getData",value:function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}},{key:"render",value:function(e,t){var r=this.getRenderer();if(r.prepareFrame(e))return this.rendered=!0,r.renderFrame(e,t)}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(e){e||this.unrender(),this.set(r.default.MAP,e)}},{key:"getMapInternal",value:function(){return this.get(r.default.MAP)}},{key:"setMap",value:function(e){this.mapPrecomposeKey_&&((0,u.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,u.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,u.listen)(e,n.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,o.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,u.listen)(this,t.default.CHANGE,e.render,e),this.changed())}},{key:"setSource",value:function(e){this.set(r.default.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),f(m(c.prototype),"disposeInternal",this).call(this)}}]),c}();function S(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var O=b;exports.default=O;
},{"./Base.js":"T6DQ","../events/EventType.js":"C8cu","./Property.js":"HbeD","../render/EventType.js":"z39m","../asserts.js":"fLG6","../events.js":"UqnM"}],"oIh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Disposable.js")),t=require("../functions.js"),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),i=require("../style/IconImageCache.js"),u=require("../layer/Layer.js"),a=require("../coordinate.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=m();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(c){y(s,e.default);var f=v(s);function s(e){var t;return l(this,s),(t=f.call(this)).map_=e,t}return p(s,[{key:"dispatchRenderEvent",value:function(e,t){(0,r.abstract)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;(0,n.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,n.makeInverse)(o,r)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,c,f,l){var s,p=t.viewState;function y(e,t,r,n){return i.call(c,t,e?r:null,n)}var d=p.projection,v=(0,a.wrapX)(e.slice(),d),h=[[0,0]];if(d.canWrapX()&&n){var b=d.getExtent(),m=(0,o.getWidth)(b);h.push([-m,0],[m,0])}for(var j=t.layerStatesArray,g=j.length,w=[],O=[],_=0;_<h.length;_++)for(var E=g-1;E>=0;--E){var S=j[E],x=S.layer;if(x.hasRenderer()&&(0,u.inView)(S,p)&&f.call(l,x)){var q=x.getRenderer(),P=x.getSource();if(q&&P){var R=P.getWrapX()?v:e,k=y.bind(null,S.managed);O[0]=R[0]+h[_][0],O[1]=R[1]+h[_][1],s=q.forEachFeatureAtCoordinate(O,t,r,k,w)}if(s)return s}}if(0!==w.length){var C=1/w.length;return w.forEach(function(e,t){return e.distanceSq+=t*C}),w.sort(function(e,t){return e.distanceSq-t.distanceSq}),w.some(function(e){return s=e.callback(e.feature,e.layer,e.geometry)}),s}}},{key:"hasFeatureAtCoordinate",value:function(e,r,n,o,i,u){return void 0!==this.forEachFeatureAtCoordinate(e,r,n,o,t.TRUE,this,i,u)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){(0,r.abstract)()}},{key:"scheduleExpireIconCache",value:function(e){i.shared.canExpireCache()&&e.postRenderFunctions.push(w)}}]),s}();function w(e,t){i.shared.expire()}var O=g;exports.default=O;
},{"../Disposable.js":"DDda","../functions.js":"RgA2","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../style/IconImageCache.js":"V0oB","../layer/Layer.js":"GCgv","../coordinate.js":"nGsj"}],"EB6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=p();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(n,t.default);var r=i(n);function n(t,e,o,c){var f;return u(this,n),(f=r.call(this,t)).inversePixelTransform=e,f.frameState=o,f.context=c,f}return o(n)}(),b=y;exports.default=b;
},{"../events/Event.js":"fKNg"}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=exports.CLASS_CONTROL=exports.CLASS_COLLAPSED=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultPadding=exports.defaultMiterLimit=exports.defaultLineWidth=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFont=exports.defaultFillStyle=exports.checkedFonts=void 0,exports.drawImageOrLabel=j,exports.getTextDimensions=M,exports.measureAndCacheTextWidth=H,exports.measureTextHeight=void 0,exports.measureTextWidth=A,exports.registerFont=void 0,exports.rotateAtOffset=C,exports.textHeights=void 0;var e=s(require("../Object.js")),t=require("../has.js"),r=require("../obj.js"),a=require("../dom.js"),n=require("../css.js");function s(e){return e&&e.__esModule?e:{default:e}}var o="10px sans-serif";exports.defaultFont=o;var i="#000";exports.defaultFillStyle=i;var l="round";exports.defaultLineCap=l;var u=[];exports.defaultLineDash=u;var d=0;exports.defaultLineDashOffset=d;var f="round";exports.defaultLineJoin=f;var p=10;exports.defaultMiterLimit=p;var x="#000";exports.defaultStrokeStyle=x;var v="center";exports.defaultTextAlign=v;var h="middle";exports.defaultTextBaseline=h;var c=[0,0,0,0];exports.defaultPadding=c;var g=1;exports.defaultLineWidth=g;var m=new e.default;exports.checkedFonts=m;var y,L=null,T={};exports.textHeights=T;var b=function(){var e,t,a=100,s="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,r,a){for(var n=!0,u=0;u<i;++u){var d=o[u];if(t=A(e+" "+r+" "+s+d,l),a!=d){var f=A(e+" "+r+" "+s+a+","+d,l);n=n&&f!=t}}return!!n}function d(){for(var t=!0,n=m.getKeys(),s=0,o=n.length;s<o;++s){var i=n[s];m.get(i)<a&&(u.apply(this,i.split("\n"))?((0,r.clear)(T),L=null,y=void 0,m.set(i,a)):(m.set(i,m.get(i)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=(0,n.getFontParameters)(t);if(r)for(var s=r.families,o=0,i=s.length;o<i;++o){var l=s[o],f=r.style+"\n"+r.weight+"\n"+l;void 0===m.get(f)&&(m.set(f,a,!0),u(r.style,r.weight,l)||(m.set(f,0,!0),void 0===e&&(e=setInterval(d,32))))}}}();exports.registerFont=b;var F=function(){var e;return function(r){var a=T[r];if(null==a){if(t.WORKER_OFFSCREEN_CANVAS){var s=(0,n.getFontParameters)(r),o=w(r,"Žg");a=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=r,document.body.appendChild(e),a=e.offsetHeight,document.body.removeChild(e);T[r]=a}return a}}();function w(e,t){return L||(L=(0,a.createCanvasContext2D)(1,1)),e!=y&&(L.font=e,y=L.font),L.measureText(t)}function A(e,t){return w(e,t).width}function H(e,t,r){if(t in r)return r[t];var a=t.split("\n").reduce(function(t,r){return Math.max(t,A(e,r))},0);return r[t]=a,a}function M(e,t){for(var r=[],a=[],n=[],s=0,o=0,i=0,l=0,u=0,d=t.length;u<=d;u+=2){var f=t[u];if("\n"!==f&&u!==d){var p=t[u+1]||e.font,x=A(p,f);r.push(x),o+=x;var v=F(p);a.push(v),l=Math.max(l,v)}else s=Math.max(s,o),n.push(o),o=0,i+=l}return{width:s,height:i,widths:r,heights:a,lineWidths:n}}function C(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function j(e,t,r,a,n,s,o,i,l,u,d){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(d[0],d[1]),I(a,e)):d[0]<0||d[1]<0?(e.translate(l,u),e.scale(d[0],d[1]),e.drawImage(a,n,s,o,i,0,0,o,i)):e.drawImage(a,n,s,o,i,l,u,o*d[0],i*d[1]),e.restore()}function I(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=F;
},{"../Object.js":"PhPh","../has.js":"f3Nv","../obj.js":"mH6q","../dom.js":"Xno5","../css.js":"HgMV"}],"MHsB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./Map.js")),t=c(require("../ObjectEventType.js")),r=c(require("../render/Event.js")),n=c(require("../render/EventType.js")),i=require("../css.js"),o=require("../render/canvas.js"),l=require("../layer/Layer.js"),u=require("../events.js"),s=require("../dom.js");function c(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=j();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(c){v(d,e.default);var a=_(d);function d(e){var r;f(this,d),(r=a.call(this,e)).fontChangeListenerKey_=(0,u.listen)(o.checkedFonts,t.default.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=i.CLASS_UNSELECTABLE+" ol-layers";var l=e.getViewport();return l.insertBefore(r.element_,l.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return p(d,[{key:"dispatchRenderEvent",value:function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}}},{key:"disposeInternal",value:function(){(0,u.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),y(g(d.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var t=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),r=e.viewState;this.children_.length=0;for(var i=[],o=null,u=0,c=t.length;u<c;++u){var a=t[u];e.layerIndex=u;var f=a.layer,d=f.getSourceState();if(!(0,l.inView)(a,r)||"ready"!=d&&"undefined"!=d)f.unrender();else{var p=f.render(e,o);p&&(p!==o&&(this.children_.push(p),o=p),"getDeclutter"in f&&i.push(f))}}for(var y=i.length-1;y>=0;--y)i[y].renderDeclutter(e);(0,s.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}}]),d}(),w=E;exports.default=w;
},{"./Map.js":"oIh9","../ObjectEventType.js":"zehl","../render/Event.js":"EB6P","../render/EventType.js":"z39m","../css.js":"HgMV","../render/canvas.js":"iAG7","../layer/Layer.js":"GCgv","../events.js":"UqnM","../dom.js":"Xno5"}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GroupEvent=void 0;var e=c(require("./Base.js")),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=c(require("../events/Event.js")),i=c(require("../events/EventType.js")),o=c(require("../ObjectEventType.js")),a=require("../asserts.js"),s=require("../obj.js"),u=require("../extent.js"),l=require("../util.js"),y=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=b();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){p(r,n.default);var t=g(r);function r(e,n){var i;return v(this,r),(i=t.call(this,e)).layer=n,i}return d(r)}();exports.GroupEvent=x;var j={LAYERS:"layers"},R=function(n){p(f,e.default);var c=g(f);function f(e){var r;v(this,f),e=e||{};var n=Object.assign({},e);delete n.layers;var i=e.layers;return(r=c.call(this,n)).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(j.LAYERS,r.handleLayersChanged_),i?Array.isArray(i)?i=new t.default(i.slice(),{unique:!0}):(0,a.assert)("function"==typeof i.getArray,43):i=new t.default(void 0,{unique:!0}),r.setLayers(i),r}return d(f,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(y.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,y.listen)(e,r.default.ADD,this.handleLayersAdd_,this),(0,y.listen)(e,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(y.unlistenByKey);(0,s.clear)(this.listenerKeys_);for(var n=e.getArray(),i=0,o=n.length;i<o;i++){var a=n[i];this.registerLayerListeners_(a),this.dispatchEvent(new x("addlayer",a))}this.changed()}},{key:"registerLayerListeners_",value:function(e){var t=[(0,y.listen)(e,o.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,y.listen)(e,i.default.CHANGE,this.handleLayerChange_,this)];e instanceof f&&t.push((0,y.listen)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,y.listen)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,l.getUid)(e)]=t}},{key:"handleLayerGroupAdd_",value:function(e){this.dispatchEvent(new x("addlayer",e.layer))}},{key:"handleLayerGroupRemove_",value:function(e){this.dispatchEvent(new x("removelayer",e.layer))}},{key:"handleLayersAdd_",value:function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new x("addlayer",t)),this.changed()}},{key:"handleLayersRemove_",value:function(e){var t=e.element,r=(0,l.getUid)(t);this.listenerKeys_[r].forEach(y.unlistenByKey),delete this.listenerKeys_[r],this.dispatchEvent(new x("removelayer",t)),this.changed()}},{key:"getLayers",value:function(){return this.get(j.LAYERS)}},{key:"setLayers",value:function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new x("removelayer",r[n]));this.set(j.LAYERS,e)}},{key:"getLayersArray",value:function(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var n=this.getLayerState(),i=n.zIndex;e||void 0!==n.zIndex||(i=0);for(var o=r,a=t.length;o<a;o++){var s=t[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=(0,u.getIntersection)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return t}},{key:"getSourceState",value:function(){return"ready"}}]),f}(),w=R;exports.default=w;
},{"./Base.js":"T6DQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../asserts.js":"fLG6","../obj.js":"mH6q","../extent.js":"QDir","../util.js":"KniQ","../events.js":"UqnM"}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=p();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(n,t.default);var r=i(n);function n(t,e,o){var c;return u(this,n),(c=r.call(this,t)).map=e,c.frameState=void 0!==o?o:null,c}return o(n)}(),b=y;exports.default=b;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){f(o,t.default);var n=a(o);function o(t,e,i,u,c,f){var l;return r(this,o),(l=n.call(this,t,e,c)).originalEvent=i,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==u&&u,l.activePointers=f,l}return i(o,[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){u(h(o.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){u(h(o.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}]),o}(),b=v;exports.default=b;
},{"./MapEvent.js":"vFcA"}],"YhDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"C8cu"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./events/EventType.js")),t=u(require("./MapBrowserEvent.js")),n=u(require("./MapBrowserEventType.js")),i=u(require("./pointer/EventType.js")),r=u(require("./events/Target.js")),o=require("./has.js"),s=require("./functions.js"),a=require("./events.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=_(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=E();return function(){var n,i=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(u){v(h,r.default);var l=y(h);function h(t,n){var r;c(this,h),(r=l.call(this,t)).map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var s=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=s,r.pointerdownListenerKey_=(0,a.listen)(s,i.default.POINTERDOWN,r.handlePointerDown_,P(r)),r.originalPointerMoveEvent_,r.relayedListenerKey_=(0,a.listen)(s,i.default.POINTERMOVE,r.relayMoveEvent_,P(r)),r.boundHandleTouchMove_=r.handleTouchMove_.bind(P(r)),r.element_.addEventListener(e.default.TOUCHMOVE,r.boundHandleTouchMove_,!!o.PASSIVE_EVENT_LISTENERS&&{passive:!1}),r}return d(h,[{key:"emulateClick_",value:function(e){var i=new t.default(n.default.CLICK,this.map_,e);this.dispatchEvent(i),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new t.default(n.default.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new t.default(n.default.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}},{key:"updateActivePointers_",value:function(e){var t=e,i=t.pointerId;if(t.type==n.default.POINTERUP||t.type==n.default.POINTERCANCEL){for(var r in delete this.trackedTouches_[i],this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else t.type!=n.default.POINTERDOWN&&t.type!=n.default.POINTERMOVE||(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var i=new t.default(n.default.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var i=new t.default(n.default.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);for(var r in this.dispatchEvent(i),this.down_={},e){var o=e[r];this.down_[r]="function"==typeof o?s.VOID:o}if(0===this.dragListenerKeys_.length){var u=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,a.listen)(u,n.default.POINTERMOVE,this.handlePointerMove_,this),(0,a.listen)(u,n.default.POINTERUP,this.handlePointerUp_,this),(0,a.listen)(this.element_,n.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==u&&this.dragListenerKeys_.push((0,a.listen)(this.element_.getRootNode(),n.default.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var i=new t.default(n.default.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}},{key:"relayMoveEvent_",value:function(e){this.originalPointerMoveEvent_=e;var i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new t.default(n.default.POINTERMOVE,this.map_,e,i))}},{key:"handleTouchMove_",value:function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,a.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(e.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,a.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,f(b(h.prototype),"disposeInternal",this).call(this)}}]),h}(),O=m;exports.default=O;
},{"./events/EventType.js":"C8cu","./MapBrowserEvent.js":"HMLS","./MapBrowserEventType.js":"YhDM","./pointer/EventType.js":"TaSm","./events/Target.js":"CR4Y","./has.js":"f3Nv","./functions.js":"RgA2","./events.js":"UqnM"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};exports.default=e;
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var e=require("../asserts.js"),t=require("../obj.js");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var r=1/0;exports.DROP=r;var u=function(){function n(e,t){i(this,n),this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return s(n,[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,(0,t.clear)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i}},{key:"enqueue",value:function(t){(0,e.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);var i=this.priorityFunction_(t);return i!=r&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,i=this.priorities_,n=t.length,s=t[e],r=i[e],u=e;e<n>>1;){var o=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),l=h<n&&i[h]<i[o]?h:o;t[e]=t[l],i[e]=i[l],e=l}t[e]=s,i[e]=r,this.siftDown_(u,e)}},{key:"siftDown_",value:function(e,t){for(var i=this.elements_,n=this.priorities_,s=i[t],r=n[t];t>e;){var u=this.getParentIndex_(t);if(!(n[u]>r))break;i[t]=i[u],n[t]=n[u],t=u}i[t]=s,n[t]=r}},{key:"reprioritize",value:function(){var e,t,i,n=this.priorityFunction_,s=this.elements_,u=this.priorities_,o=0,h=s.length;for(t=0;t<h;++t)(i=n(e=s[t]))==r?delete this.queuedElements_[this.keyFunction_(e)]:(u[o]=i,s[o++]=e);s.length=o,u.length=o,this.heapify_()}}]),n}(),o=u;exports.default=o;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"tHOl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getTilePriority=j;var e=i(require("./events/EventType.js")),t=o(require("./structs/PriorityQueue.js")),n=i(require("./TileState.js"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=i?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=g();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(r){p(i,t.default);var o=d(i);function i(e,t){var n;return a(this,i),(n=o.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})).boundHandleTileChange_=n.handleTileChange.bind(h(n)),n.tileChangeCallback_=t,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return f(i,[{key:"enqueue",value:function(t){var n=c(v(i.prototype),"enqueue",this).call(this,t);n&&t[0].addEventListener(e.default.CHANGE,this.boundHandleTileChange_);return n}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var r=t.target,o=r.getState();if(o===n.default.LOADED||o===n.default.ERROR||o===n.default.EMPTY){o!==n.default.ERROR&&r.removeEventListener(e.default.CHANGE,this.boundHandleTileChange_);var i=r.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(e,t){for(var r,o,i=0;this.tilesLoading_<e&&i<t&&this.getCount()>0;)o=(r=this.dequeue()[0]).getKey(),r.getState()!==n.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}]),i}(),_=O;function j(e,n,r,o,i){if(!(e&&r in e.wantedTiles))return t.DROP;if(!e.wantedTiles[r][n.getKey()])return t.DROP;var u=e.viewState.center,a=o[0]-u[0],l=o[1]-u[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}exports.default=_;
},{"./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY","./TileState.js":"u3kG"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"cE7c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h,i){if(n){if(!o&&!e)return n;var M=e?0:u[0]*o,c=e?0:u[1]*o,l=i?i[0]:0,x=i?i[1]:0,f=a[0]+M/2+l,m=a[2]-M/2+l,s=a[1]+c/2+x,p=a[3]-c/2+x;f>m&&(m=f=(m+f)/2),s>p&&(p=s=(p+s)/2);var v=(0,t.clamp)(n[0],f,m),g=(0,t.clamp)(n[1],s,p);if(h&&r&&o){var d=30*o;v+=-d*Math.log(1+Math.max(0,f-n[0])/d)+d*Math.log(1+Math.max(0,n[0]-m)/d),g+=-d*Math.log(1+Math.max(0,s-n[1])/d)+d*Math.log(1+Math.max(0,n[1]-p)/d)}return[v,g]}}}function e(t){return t}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinMaxResolution=h,exports.createSnapToPower=o,exports.createSnapToResolutions=i;var t=require("./math.js"),a=require("./extent.js"),r=require("./array.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(a,r,e){var n=Math.min(a,r);return n*=Math.log(1+50*Math.max(0,a/r-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),(0,t.clamp)(n,e/2,2*r)}function i(a,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return i?n(u,v,f):(0,t.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,r.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(a,r,i,o,h,u){return o=void 0===o||o,i=void 0!==i?i:0,function(M,l,c,m){if(void 0!==M){var f=h?e(r,h,c,u):r;if(m)return o?n(M,f,i):(0,t.clamp)(M,i,f);var v=Math.ceil(Math.log(r/f)/Math.log(a)-1e-9),s=-l*(.5-1e-9)+.5,p=Math.min(f,M),d=Math.floor(Math.log(r/p)/Math.log(a)+s),g=Math.max(v,d),x=r/Math.pow(a,g);return(0,t.clamp)(x,i,f)}}}function h(a,r,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=o?e(a,o,l,h):a;return i&&c?n(u,m,r):(0,t.clamp)(u,r,m)}}}
},{"./math.js":"B96G","./extent.js":"QDir","./array.js":"luEr"}],"EKd0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToN=t,exports.createSnapToZero=n,exports.disable=o,exports.none=r;var e=require("./math.js");function o(e){return void 0!==e?0:void 0}function r(e){return void 0!==e?e:void 0}function t(e){var o=2*Math.PI/e;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/o+.5)*o:void 0}}function n(o){return o=o||(0,e.toRadians)(5),function(e,r){return r?e:void 0!==e?Math.abs(e)<=o?0:e:void 0}}
},{"./math.js":"B96G"}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){a=a||[];for(var f=0,s=t;s<e;s+=n){var l=r[s],u=r[s+1];a[f++]=o[0]*l+o[2]*u+o[4],a[f++]=o[1]*l+o[3]*u+o[5]}return a&&a.length!=f&&(a.length=f),a}function t(r,t,e,n,o,a,f){f=f||[];for(var s=Math.cos(o),l=Math.sin(o),u=a[0],v=a[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;f[h++]=u+g*s-i*l,f[h++]=v+g*l+i*s;for(var p=c+2;p<c+n;++p)f[h++]=r[p]}return f&&f.length!=h&&(f.length=h),f}function e(r,t,e,n,o,a,f,s){s=s||[];for(var l=f[0],u=f[1],v=0,h=t;h<e;h+=n){var c=r[h]-l,g=r[h+1]-u;s[v++]=l+o*c,s[v++]=u+a*g;for(var i=h+2;i<h+n;++i)s[v++]=r[i]}return s&&s.length!=v&&(s.length=v),s}function n(r,t,e,n,o,a,f){f=f||[];for(var s=0,l=t;l<e;l+=n){f[s++]=r[l]+o,f[s++]=r[l+1]+a;for(var u=l+2;u<l+n;++u)f[s++]=r[u]}return f&&f.length!=s&&(f.length=s),f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotate=t,exports.scale=e,exports.transform2D=r,exports.translate=n;
},{}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../Object.js")),e=require("../util.js"),r=require("../transform.js"),n=require("../extent.js"),o=require("../proj.js"),i=require("../functions.js"),u=require("./flat/transform.js");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=d();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=(0,r.create)(),j=function(a){y(f,t.default);var s=m(f);function f(){var t;return c(this,f),(t=s.call(this)).extent_=(0,n.createEmpty)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(0,i.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),t}return l(f,[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return(0,e.abstract)()}},{key:"closestPointXY",value:function(t,r,n,o){return(0,e.abstract)()}},{key:"containsXY",value:function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return(0,e.abstract)()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,n.createOrUpdateEmpty)(e),this.extentRevision_=this.getRevision()}return(0,n.returnOrUpdate)(this.extent_,t)}},{key:"rotate",value:function(t,r){(0,e.abstract)()}},{key:"scale",value:function(t,r,n){(0,e.abstract)()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return(0,e.abstract)()}},{key:"getType",value:function(){return(0,e.abstract)()}},{key:"applyTransform",value:function(t){(0,e.abstract)()}},{key:"intersectsExtent",value:function(t){return(0,e.abstract)()}},{key:"translate",value:function(t,r){(0,e.abstract)()}},{key:"transform",value:function(t,e){var i=(0,o.get)(t),a="tile-pixels"==i.getUnits()?function(t,a,s){var c=i.getExtent(),f=i.getWorldExtent(),l=(0,n.getHeight)(f)/(0,n.getHeight)(c);return(0,r.compose)(g,f[0],f[3],l,-l,0,0,0),(0,u.transform2D)(t,0,t.length,s,g,a),(0,o.getTransform)(i,e)(t,a,s)}:(0,o.getTransform)(i,e);return this.applyTransform(a),this}}]),f}(),x=j;exports.default=x;
},{"../Object.js":"PhPh","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../proj.js":"Diht","../functions.js":"RgA2","./flat/transform.js":"LGwr"}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getStrideForLayout=m,exports.transformGeom2D=b;var t=i(require("./Geometry.js")),e=require("../util.js"),r=require("../extent.js"),n=require("./flat/transform.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=y();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(i){l(s,t.default);var o=c(s);function s(){var t;return a(this,s),(t=o.call(this)).layout="XY",t.stride=2,t.flatCoordinates=null,t}return u(s,[{key:"computeExtent",value:function(t){return(0,r.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return(0,e.abstract)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=m(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,r){(0,e.abstract)()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=m(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=g(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.rotate)(r,0,r.length,i,t,e,r),this.changed()}}},{key:"scale",value:function(t,e,i){void 0===e&&(e=t),i||(i=(0,r.getCenter)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();(0,n.scale)(o,0,o.length,a,t,e,i,o),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.translate)(r,0,r.length,i,t,e,r),this.changed()}}}]),s}();function g(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function m(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function b(t,e,r){var i=t.getFlatCoordinates();if(i){var o=t.getStride();return(0,n.transform2D)(i,0,i.length,o,e,r)}return null}var C=v;exports.default=C;
},{"./Geometry.js":"F8sI","../util.js":"KniQ","../extent.js":"QDir","./flat/transform.js":"LGwr"}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMaxSquaredDelta=a,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i,exports.assignClosestPoint=s,exports.maxSquaredDelta=t,exports.multiArrayMaxSquaredDelta=n;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}h=h||[NaN,NaN];for(var N=a+s;N<n;)if(e(t,N-s,N,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s,N+=s}else N+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=s(r,e,c,a,n,o,i,u,f,l,v),e=c}return l}function i(r,e,t,a,n,s,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=o(r,e,c,a,n,s,i,u,f,l,v),e=c[c.length-1]}return l}
},{"../../math.js":"B96G"}],"FNhl":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var l=t[o],f=0;f<n;++f)e[r++]=l[f];return r}function t(e,t,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=r(e,t,n[f],o);a[l++]=i,t=i}return a.length=l,a}function n(e,r,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=t(e,r,n[f],o,a[l]);0===i.length&&(i[0]=r),a[l++]=i,r=i[i.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f,exports.radialDistance=a,exports.simplifyLineString=e,exports.snap=o;var r=require("../../math.js");function e(r,e,n,u,o,i,s){return s=void 0!==s?s:[],i||(n=a(r,e,n,u,o,s,0),r=s,e=0,u=2),s.length=t(r,e,n,u,o,s,0),s}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){o=void 0!==o?o:[];for(var i=0,a=r;a<t;a+=n)o[i++]=e.slice(a,a+n);return o.length=i,o}function r(r,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=e(r,t,f,o,i[a]),t=f}return i.length=a,i}function t(e,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=1===f.length&&f[0]===t?[]:r(e,t,f,o,i[a]),t=f[f.length-1]}return i.length=a,i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),r=require("../extent.js"),n=require("./flat/deflate.js"),o=require("./flat/simplify.js"),i=require("./flat/inflate.js"),a=require("./flat/area.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(s){d(f,t.default);var u=h(f);function f(t,e){var r;return l(this,f),(r=u.call(this)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return c(f,[{key:"clone",value:function(){return new f(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,n,o,i){return i<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,o,i))}},{key:"getArea",value:function(){return(0,a.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,i.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,o.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new f(e,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),f}(),C=m;exports.default=C;
},{"./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","./flat/inflate.js":"znXl","./flat/area.js":"EOSm"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./SimpleGeometry.js")),e=require("../extent.js"),r=require("./flat/deflate.js"),n=require("../math.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(o){c(a,t.default);var i=l(a);function a(t,e){var r;return u(this,a),(r=i.call(this)).setCoordinates(t,e),r}return f(a,[{key:"clone",value:function(){var t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,o){var i=this.flatCoordinates,u=(0,n.squaredDistance)(t,e,i[0],i[1]);if(u<o){for(var a=this.stride,f=0;f<a;++f)r[f]=i[f];return r.length=a,u}return o}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return(0,e.createOrUpdateFromCoordinate)(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return(0,e.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),a}(),v=b;exports.default=v;
},{"./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("./contains.js"),e=require("../../array.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(e.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,r.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"./contains.js":"dzdN","../../array.js":"luEr"}],"U8i0":[function(require,module,exports) {
"use strict";function e(e,r,t,o,s){var c;for(r+=o;r<t;r+=o)if(c=s(e.slice(r-o,r),e.slice(r,r+o)))return c;return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./segments.js"),r=require("./contains.js");function t(r,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),r,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,e.forEach)(r,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,e,i,s,a){return!!t(n,e,i,s,a)||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[1])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[3])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[1])||!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[3]))))}function a(n,e,i,a,o){if(!s(n,e,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,r.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","./segments.js":"U8i0","./contains.js":"dzdN"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"cJkE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateEnds=s,exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var u=r[e],a=r[e+1];i+=(u-o)*(a+s),o=u,s=a}return 0===i?void 0:i>0}function n(r,n,t,i,o){o=void 0!==o&&o;for(var s=0,u=t.length;s<u;++s){var a=t[s],f=e(r,n,a,i);if(0===s){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=a}return!0}function t(r,e,t,i,o){for(var s=0,u=t.length;s<u;++s){var a=t[s];if(!n(r,e,a,i,o))return!1;a.length&&(e=a[a.length-1])}return!0}function i(n,t,i,o,s){s=void 0!==s&&s;for(var u=0,a=i.length;u<a;++u){var f=i[u],l=e(n,t,f,o);(0===u?s&&l||!s&&!l:s&&!l||!s&&l)&&(0,r.coordinates)(n,t,f,o),t=f}return t}function o(r,e,n,t,o){for(var s=0,u=n.length;s<u;++s)e=i(r,e,n[s],t,o);return e}function s(r,n){for(var t=[],i=0,o=0,s=0,u=n.length;s<u;++s){var a=n[s];if(e(r,i,a,2)){if(0===t.length)continue;t[t.length-1].push(n[o])}else t.push(n.slice(o,s+1));o=s+1,i=a}return t}
},{"./reverse.js":"ElTe"}],"Nwwk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=F,exports.default=void 0,exports.fromCircle=S,exports.fromExtent=I,exports.makeRegular=L;var t=v(require("./LinearRing.js")),e=v(require("./Point.js")),n=v(require("./SimpleGeometry.js")),i=require("./flat/closest.js"),r=require("../extent.js"),o=require("./flat/deflate.js"),s=require("../array.js"),a=require("./flat/interiorpoint.js"),l=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),d=require("./flat/area.js"),h=require("./flat/contains.js"),c=require("../math.js"),y=require("./flat/simplify.js"),g=require("../sphere.js");function v(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function R(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=O();return function(){var n,i=q(t);if(e){var r=q(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return P(this,n)}}function P(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(c){b(v,n.default);var g=m(v);function v(t,e,n){var i;return _(this,v),(i=g.call(this)).ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==e&&n?(i.setFlatCoordinates(e,t),i.ends_=n):i.setCoordinates(t,e),i}return R(v,[{key:"appendLinearRing",value:function(t){this.flatCoordinates?(0,s.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new v(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,o){return o<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))}},{key:"containsXY",value:function(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,d.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,l.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,r.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,a.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new e.default(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(e){return e<0||this.ends_.length<=e?null:new t.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLinearRings",value:function(){for(var e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[],o=0,s=0,a=i.length;s<a;++s){var l=i[s],u=new t.default(n.slice(o,l),e);r.push(u),o=l}return r}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],n=[];return e.length=(0,y.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new v(e,"XY",n)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}]),v}(),k=w;function F(t,e,n,i){n=n||32;for(var r=[],o=0;o<n;++o)(0,s.extend)(r,(0,g.offset)(t,e,2*Math.PI*o/n,i));return r.push(r[0],r[1]),new w(r,"XY",[r.length])}function I(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new w(o,"XY",[o.length])}function S(t,e,n){e=e||32;for(var i=t.getStride(),r=t.getLayout(),o=t.getCenter(),s=i*(e+1),a=new Array(s),l=0;l<s;l+=i){a[l]=0,a[l+1]=0;for(var u=2;u<i;u++)a[l+u]=o[u]}var f=[a.length],d=new w(a,r,f);return L(d,o,t.getRadius(),n),d}function L(t,e,n,i){for(var r=t.getFlatCoordinates(),o=t.getStride(),s=r.length/o-1,a=i||0,l=0;l<=s;++l){var u=l*o,f=a+2*(0,c.modulo)(l,s)*Math.PI/s;r[u]=e[0]+n*Math.cos(f),r[u+1]=e[1]+n*Math.sin(f)}t.changed()}exports.default=k;
},{"./LinearRing.js":"jRgU","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/interiorpoint.js":"UDvN","./flat/inflate.js":"znXl","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/area.js":"EOSm","./flat/contains.js":"dzdN","../math.js":"B96G","./flat/simplify.js":"IEpt","../sphere.js":"q4ER"}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=P,exports.createResolutionConstraint=O,exports.createRotationConstraint=w,exports.default=void 0,exports.isNoopAnimation=T;var t=m(require("./Object.js")),e=m(require("./ViewHint.js")),n=m(require("./ViewProperty.js")),o=require("./tilegrid/common.js"),i=require("./proj.js"),r=require("./functions.js"),a=require("./coordinate.js"),s=require("./asserts.js"),u=require("./centerconstraint.js"),l=require("./math.js"),h=require("./resolutionconstraint.js"),c=require("./rotationconstraint.js"),g=require("./easing.js"),f=require("./extent.js"),v=require("./array.js"),d=require("./geom/Polygon.js");function m(t){return t&&t.__esModule?t:{default:t}}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}function x(t,e){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=M();return function(){var n,o=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return I(this,n)}}function I(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=0,S=function(o){C(h,t.default);var u=k(h);function h(t){var e;return R(this,h),(e=u.call(this)).on,e.once,e.un,t=Object.assign({},t),e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,i.createProjection)(t.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,t.projection&&(0,i.disableCoordinateWarning)(),t.center&&(t.center=(0,i.fromUserCoordinate)(t.center,e.projection_)),t.extent&&(t.extent=(0,i.fromUserExtent)(t.extent,e.projection_)),e.applyOptions_(t),e}return y(h,[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var o in n.default)delete e[o];this.setProperties(e,!0);var i=O(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var r=P(t),a=i.constraint,s=w(t);this.constraints_={center:r,resolution:a,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),a=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=Object.assign({},o)).center=(0,i.fromUserCoordinate)(o.center,this.getProjection())),o.anchor&&((o=Object.assign({},o)).anchor=(0,i.fromUserCoordinate)(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var n,o=arguments.length;o>1&&"function"==typeof arguments[o-1]&&(n=arguments[o-1],--o);for(var i=0;i<o&&!this.isDef();++i){var r=arguments[i];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(i!==o){for(var a=Date.now(),s=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_,c=[];i<o;++i){var f=arguments[i],v={start:a,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||g.inAndOut,callback:n};if(f.center&&(v.sourceCenter=s,v.targetCenter=f.center.slice(),s=v.targetCenter),void 0!==f.zoom?(v.sourceResolution=u,v.targetResolution=this.getResolutionForZoom(f.zoom),u=v.targetResolution):f.resolution&&(v.sourceResolution=u,v.targetResolution=f.resolution,u=v.targetResolution),void 0!==f.rotation){v.sourceRotation=h;var d=(0,l.modulo)(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=h+d,h=v.targetRotation}T(v)?v.complete=!0:a+=v.duration,c.push(v)}this.animations_.push(c),this.setHint(e.default.ANIMATING,1),this.updateAnimations_()}else n&&E(n,!0)}},{key:"getAnimating",value:function(){return this.hints_[e.default.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[e.default.INTERACTING]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(e.default.ANIMATING,-this.hints_[e.default.ANIMATING]);for(var n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&E(i[0].callback,!1),!t)for(var r=0,a=i.length;r<a;++r){var s=i[r];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],r=!0,a=0,s=i.length;a<s;++a){var u=i[a];if(!u.complete){var h=t-u.start,c=u.duration>0?h/u.duration:1;c>=1?(u.complete=!0,c=1):r=!1;var g=u.easing(c);if(u.sourceCenter){var f=u.sourceCenter[0],v=u.sourceCenter[1],d=u.targetCenter[0],m=u.targetCenter[1];this.nextCenter_=u.targetCenter;var _=f+g*(d-f),R=v+g*(m-v);this.targetCenter_=[_,R]}if(u.sourceResolution&&u.targetResolution){var p=1===g?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);if(u.anchor){var y=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(p,0,y,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var x=1===g?(0,l.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);if(u.anchor){var k=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(k,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),n=!0,!u.complete)break}}if(r){this.animations_[o]=null,this.setHint(e.default.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var I=i[0].callback;I&&E(I,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var n,o=this.getCenterInternal();return void 0!==o&&(n=[o[0]-e[0],o[1]-e[1]],(0,a.rotate)(n,t-this.getRotation()),(0,a.add)(n,e)),n}},{key:"calculateCenterZoom",value:function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]);return n}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?(0,i.toUserCoordinate)(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(n.default.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e=this.calculateExtentInternal(t);return(0,i.toUserExtent)(e,this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();(0,s.assert)(e,1);var n=this.getResolution();(0,s.assert)(void 0!==n,2);var o=this.getRotation();return(0,s.assert)(void 0!==o,3),(0,f.getForViewAndSize)(e,n,o,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(n.default.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal((0,i.fromUserExtent)(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var n=(0,f.getWidth)(t)/e[0],o=(0,f.getHeight)(t)/e[1];return Math.max(n,o)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*o)}}},{key:"getRotation",value:function(){return this.get(n.default.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=Z(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=(0,v.linearFindNearest)(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,l.clamp)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,l.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var n;if((0,s.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,s.assert)(!(0,f.isEmpty)(t),25);var o=(0,i.fromUserExtent)(t,this.getProjection());n=(0,d.fromExtent)(o)}else if("Circle"===t.getType()){var r=(0,i.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,d.fromExtent)(r)).rotate(this.getRotation(),(0,f.getCenter)(r))}else{var a=(0,i.getUserProjection)();n=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(n,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,h=0,c=i.length;h<c;h+=r){var g=i[h]*n-i[h+1]*o,f=i[h]*o+i[h+1]*n;a=Math.min(a,g),s=Math.min(s,f),u=Math.max(u,g),l=Math.max(l,f)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());var o,i=void 0!==e.padding?e.padding:[0,0,0,0],a=void 0!==e.nearest&&e.nearest;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var s=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,a?0:1);var l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),g=(0,f.getCenter)(s);g[0]+=(i[1]-i[3])/2*u,g[1]+=(i[0]-i[2])/2*u;var v=g[0]*c-g[1]*h,d=g[1]*c+g[0]*h,m=this.getConstrainedCenter([v,d],u),_=e.callback?e.callback:r.VOID;void 0!==e.duration?this.animateInternal({resolution:u,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=u,this.targetCenter_=m,this.applyTargetState_(!1,!0),E(_,!0))}},{key:"centerOn",value:function(t,e,n){this.centerOnInternal((0,i.fromUserCoordinate)(t,this.getProjection()),e,n)}},{key:"centerOnInternal",value:function(t,e,n){this.setCenterInternal(Z(t,e,n,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,n,o){var i,r=this.padding_;if(r&&t){var a=this.getViewportSizeMinusPadding_(-n),s=Z(t,o,[a[0]/2+r[3],a[1]/2+r[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=(0,i.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&(0,i.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=(0,i.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?(0,i.fromUserCoordinate)(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var o=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,o),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,o),u=this.constraints_.center(this.targetCenter_,s,r,o,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(n.default.ROTATION)!==i&&this.set(n.default.ROTATION,i),this.get(n.default.RESOLUTION)!==s&&(this.set(n.default.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),u&&this.get(n.default.CENTER)&&(0,a.equals)(this.get(n.default.CENTER),u)||this.set(n.default.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,n){t=void 0!==t?t:200;var o=e||0,i=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,o,r),u=this.constraints_.center(this.targetCenter_,s,r,!1,this.calculateCenterShift(this.targetCenter_,s,i,r));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=i,this.targetCenter_=u,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===i&&this.getCenterInternal()&&(0,a.equals)(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:u,resolution:s,duration:t,easing:g.easeOut,anchor:n}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(e.default.INTERACTING,1)}},{key:"endInteraction",value:function(t,e,n){n=n&&(0,i.fromUserCoordinate)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}},{key:"endInteractionInternal",value:function(t,n,o){this.setHint(e.default.INTERACTING,-1),this.resolveConstraints(t,n,o)}},{key:"getConstrainedCenter",value:function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}},{key:"getConstrainedZoom",value:function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}]),h}();function E(t,e){setTimeout(function(){t(e)},0)}function P(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,u.createExtent)(t.extent,t.constrainOnlyCenter,e)}var n=(0,i.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,(0,u.createExtent)(o,!1,!1)}return u.none}function O(t){var e,n,r,a=void 0!==t.minZoom?t.minZoom:A,s=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,g=void 0!==t.showFullExtent&&t.showFullExtent,v=(0,i.createProjection)(t.projection,"EPSG:3857"),d=v.getExtent(),m=t.constrainOnlyCenter,_=t.extent;if(l||_||!v.isGlobal()||(m=!1,_=d),void 0!==t.resolutions){var R=t.resolutions;n=R[a],r=void 0!==R[s]?R[s]:R[R.length-1],e=t.constrainResolution?(0,h.createSnapToResolutions)(R,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}else{var p=(d?Math.max((0,f.getWidth)(d),(0,f.getHeight)(d)):360*i.METERS_PER_UNIT.degrees/v.getMetersPerUnit())/o.DEFAULT_TILE_SIZE/Math.pow(2,A),y=p/Math.pow(2,28-A);void 0!==(n=t.maxResolution)?a=0:n=p/Math.pow(u,a),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,s):p/Math.pow(u,s):y),s=a+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,s-a),e=t.constrainResolution?(0,h.createSnapToPower)(u,n,r,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:u}}function w(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,c.createSnapToZero)():!1===e?c.none:"number"==typeof e?(0,c.createSnapToN)(e):c.none}return c.disable}function T(t){return!(t.sourceCenter&&t.targetCenter&&!(0,a.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Z(t,e,n,o,i){var r=Math.cos(-i),a=Math.sin(-i),s=t[0]*r-t[1]*a,u=t[1]*r+t[0]*a;return[(s+=(e[0]/2-n[0])*o)*r-(u+=(n[1]-e[1]/2)*o)*(a=-a),u*r+s*a]}var N=S;exports.default=N;
},{"./Object.js":"PhPh","./ViewHint.js":"cuLW","./ViewProperty.js":"cE7c","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./functions.js":"RgA2","./coordinate.js":"nGsj","./asserts.js":"fLG6","./centerconstraint.js":"Rc7z","./math.js":"B96G","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"EKd0","./easing.js":"IeCz","./extent.js":"QDir","./array.js":"luEr","./geom/Polygon.js":"Nwwk"}],"xxE2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Object.js")),t=i(require("../MapEventType.js")),r=require("../functions.js"),n=require("../events.js"),o=require("../dom.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(i){p(c,e.default);var u=d(c);function c(e){var t;l(this,c),t=u.call(this);var r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),t.element=r||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t}return s(c,[{key:"disposeInternal",value:function(){(0,o.removeNode)(this.element),f(g(c.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(e){this.map_&&(0,o.removeNode)(this.element);for(var i=0,u=this.listenerKeys.length;i<u;++i)(0,n.unlistenByKey)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=e,e)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.VOID&&this.listenerKeys.push((0,n.listen)(e,t.default.POSTRENDER,this.render,this)),e.render())}},{key:"render",value:function(e){}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}]),c}(),O=m;exports.default=O;
},{"../Object.js":"PhPh","../MapEventType.js":"xLGm","../functions.js":"RgA2","../events.js":"UqnM","../dom.js":"Xno5"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Control.js")),t=i(require("../events/EventType.js")),l=require("../css.js"),o=require("../array.js"),n=require("../layer/Layer.js"),r=require("../dom.js");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,l){return t&&u(e.prototype,t),l&&u(e,l),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=h();return function(){var l,o=y(e);if(t){var n=y(this).constructor;l=Reflect.construct(o,arguments,n)}else l=o.apply(this,arguments);return b(this,l)}}function b(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(i){p(u,e.default);var a=f(u);function u(e){var o;s(this,u),e=e||{},(o=a.call(this,{element:document.createElement("div"),render:e.render,target:e.target})).ulElement_=document.createElement("ul"),o.collapsed_=void 0===e.collapsed||e.collapsed,o.userCollapsed_=o.collapsed_,o.overrideCollapsible_=void 0!==e.collapsible,o.collapsible_=void 0===e.collapsible||e.collapsible,o.collapsible_||(o.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",r=void 0!==e.tipLabel?e.tipLabel:"Attributions",i=void 0!==e.expandClassName?e.expandClassName:n+"-expand",c=void 0!==e.collapseLabel?e.collapseLabel:"›",p=void 0!==e.collapseClassName?e.collapseClassName:n+"-collapse";"string"==typeof c?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=c,o.collapseLabel_.className=p):o.collapseLabel_=c;var d=void 0!==e.label?e.label:"i";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d,o.label_.className=i):o.label_=d;var f=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_;o.toggleButton_=document.createElement("button"),o.toggleButton_.setAttribute("type","button"),o.toggleButton_.setAttribute("aria-expanded",String(!o.collapsed_)),o.toggleButton_.title=r,o.toggleButton_.appendChild(f),o.toggleButton_.addEventListener(t.default.CLICK,o.handleClick_.bind(_(o)),!1);var b=n+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+l.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),h=o.element;return h.className=b,h.appendChild(o.toggleButton_),h.appendChild(o.ulElement_),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return c(u,[{key:"collectSourceAttributions_",value:function(e){for(var t={},l=[],o=!0,r=e.layerStatesArray,i=0,a=r.length;i<a;++i){var s=r[i];if((0,n.inView)(s,e.viewState)){var u=s.layer.getSource();if(u){var c=u.getAttributions();if(c){var p=c(e);if(p)if(o=o&&!1!==u.getAttributionsCollapsible(),Array.isArray(p))for(var d=0,f=p.length;d<f;++d)p[d]in t||(l.push(p[d]),t[p[d]]=!0);else p in t||(l.push(p),t[p]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),l}},{key:"updateElement_",value:function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!(0,o.equals)(t,this.renderedAttributions_)){(0,r.removeChildren)(this.ulElement_);for(var n=0,i=t.length;n<i;++n){var a=document.createElement("li");a.innerHTML=t[n],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,r.replaceNode)(this.collapseLabel_,this.label_):(0,r.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(e){this.updateElement_(e.frameState)}}]),u}(),g=v;exports.default=g;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../array.js":"luEr","../layer/Layer.js":"GCgv","../dom.js":"Xno5"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Control.js")),e=n(require("../events/EventType.js")),r=require("../css.js"),o=require("../easing.js");function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=b();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(n){u(l,t.default);var a=f(l);function l(t){var o;i(this,l),t=t||{},o=a.call(this,{element:document.createElement("div"),render:t.render,target:t.target});var n=void 0!==t.className?t.className:"ol-rotate",s=void 0!==t.label?t.label:"⇧",u=void 0!==t.compassClassName?t.compassClassName:"ol-compass";o.label_=null,"string"==typeof s?(o.label_=document.createElement("span"),o.label_.className=u,o.label_.textContent=s):(o.label_=s,o.label_.classList.add(u));var c=t.tipLabel?t.tipLabel:"Reset rotation",f=document.createElement("button");f.className=n+"-reset",f.setAttribute("type","button"),f.title=c,f.appendChild(o.label_),f.addEventListener(e.default.CLICK,o.handleClick_.bind(p(o)),!1);var d=n+" "+r.CLASS_UNSELECTABLE+" "+r.CLASS_CONTROL,b=o.element;return b.className=d,b.appendChild(f),o.callResetNorth_=t.resetNorth?t.resetNorth:void 0,o.duration_=void 0!==t.duration?t.duration:250,o.autoHide_=void 0===t.autoHide||t.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(r.CLASS_HIDDEN),o}return s(l,[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var o=e.viewState.rotation;if(o!=this.rotation_){var n="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(r.CLASS_HIDDEN);a||0!==o?a&&0!==o&&this.element.classList.remove(r.CLASS_HIDDEN):this.element.classList.add(r.CLASS_HIDDEN)}this.label_.style.transform=n}this.rotation_=o}}}]),l}(),_=v;exports.default=_;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"L3CO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),o=require("../css.js"),n=require("../easing.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,o){return t&&u(e.prototype,t),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=m();return function(){var o,n=y(e);if(t){var r=y(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return d(this,o)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(r){l(u,e.default);var i=f(u);function u(e){var n;a(this,u),e=e||{},n=i.call(this,{element:document.createElement("div"),target:e.target});var r=void 0!==e.className?e.className:"ol-zoom",c=void 0!==e.delta?e.delta:1,l=void 0!==e.zoomInClassName?e.zoomInClassName:r+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:r+"-out",f=void 0!==e.zoomInLabel?e.zoomInLabel:"+",d=void 0!==e.zoomOutLabel?e.zoomOutLabel:"–",m=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",y=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=l,b.setAttribute("type","button"),b.title=m,b.appendChild("string"==typeof f?document.createTextNode(f):f),b.addEventListener(t.default.CLICK,n.handleClick_.bind(p(n),c),!1);var v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=y,v.appendChild("string"==typeof d?document.createTextNode(d):d),v.addEventListener(t.default.CLICK,n.handleClick_.bind(p(n),-c),!1);var h=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,O=n.element;return O.className=h,O.appendChild(b),O.appendChild(v),n.duration_=void 0!==e.duration?e.duration:250,n}return c(u,[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t=this.getMap().getView();if(t){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:r,duration:this.duration_,easing:n.easeOut})):t.setZoom(r)}}}}]),u}(),v=b;exports.default=v;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"cZGD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=i;var t=u(require("./Attribution.js")),e=u(require("../Collection.js")),o=u(require("./Rotate.js")),r=u(require("./Zoom.js"));function u(t){return t&&t.__esModule?t:{default:t}}function i(u){u=u||{};var i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new r.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new o.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Attribution.js":"Q4Cf","../Collection.js":"FnDa","./Rotate.js":"sCgw","./Zoom.js":"L3CO"}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.pan=b,exports.zoomByDelta=h;var e=r(require("../Object.js")),t=r(require("./Property.js")),n=require("../easing.js");function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=y();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){c(o,e.default);var r=l(o);function o(e){var t;return i(this,o),(t=r.call(this)).on,t.once,t.un,e&&e.handleEvent&&(t.handleEvent=e.handleEvent),t.map_=null,t.setActive(!0),t}return a(o,[{key:"getActive",value:function(){return this.get(t.default.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(e){return!0}},{key:"setActive",value:function(e){this.set(t.default.ACTIVE,e)}},{key:"setMap",value:function(e){this.map_=e}}]),o}();function b(e,t,r){var o=e.getCenterInternal();if(o){var i=[o[0]+t[0],o[1]+t[1]];e.animateInternal({duration:void 0!==r?r:250,easing:n.linear,center:e.getConstrainedCenter(i)})}}function h(e,t,r,o){var i=e.getZoom();if(void 0!==i){var u=e.getConstrainedZoom(i+t),a=e.getResolutionForZoom(u);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:void 0!==o?o:250,easing:n.easeOut})}}var m=d;exports.default=m;
},{"../Object.js":"PhPh","./Property.js":"caOi","../easing.js":"IeCz"}],"NSa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var f=u?Object.getOwnPropertyDescriptor(t,i):null;f&&(f.get||f.set)?Object.defineProperty(o,i,f):o[i]=t[i]}return o.default=t,r&&r.set(t,o),o}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=d();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){a(o,t.default);var n=p(o);function o(t){var e;return i(this,o),t=t||{},(e=n.call(this)).delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:250,e}return c(o,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==e.default.DBLCLICK){var o=r.originalEvent,u=r.map,i=r.coordinate,f=o.shiftKey?-this.delta_:this.delta_,c=u.getView();(0,t.zoomByDelta)(c,f,i,this.duration_),o.preventDefault(),n=!0}return!n}}]),o}(),O=v;exports.default=O;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=h,exports.default=void 0;var e=n(require("./Interaction.js")),t=n(require("../MapBrowserEventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=p();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){a(i,e.default);var r=c(i);function i(e){var t;return o(this,i),e=e||{},t=r.call(this,e),e.handleDownEvent&&(t.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(t.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(t.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(t.handleUpEvent=e.handleUpEvent),e.stopDown&&(t.stopDown=e.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t}return u(i,[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(e){if(!e.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==t.default.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==t.default.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==t.default.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,n=this.stopDown(o)}else e.type==t.default.POINTERMOVE&&this.handleMoveEvent(e);return!n}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){e.activePointers&&(this.targetPointers=e.activePointers)}}]),i}();function h(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}var y=d;exports.default=y;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=i,exports.touchOnly=exports.targetNotEditable=exports.singleClick=exports.shiftKeyOnly=exports.primaryAction=exports.pointerMove=exports.platformModifierKeyOnly=exports.penOnly=exports.noModifierKeys=exports.never=exports.mouseOnly=exports.mouseActionButton=exports.focusWithTabindex=exports.focus=exports.doubleClick=exports.click=exports.always=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../functions.js"),r=require("../has.js"),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments;return function(e){for(var r=!0,n=0,o=t.length;n<o&&(r=r&&t[n](e));++n);return r}}var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=a;var s=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=s;var u=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)};exports.focus=u;var l=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)};exports.focusWithTabindex=l;var p=t.TRUE;exports.always=p;var y=function(t){return t.type==e.default.CLICK};exports.click=y;var v=function(e){var t=e.originalEvent;return 0==t.button&&!(r.WEBKIT&&r.MAC&&t.ctrlKey)};exports.mouseActionButton=v;var c=t.FALSE;exports.never=c;var f=function(e){return"pointermove"==e.type};exports.pointerMove=f;var x=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=x;var K=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=E;var d=function(e){var t=e.originalEvent;return!t.altKey&&(r.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=d;var g=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=g;var m=function(e){var t=e.originalEvent,r=t.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!t.target.isContentEditable};exports.targetNotEditable=m;var h=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"mouse"==t.pointerType};exports.mouseOnly=h;var O=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"touch"===t.pointerType};exports.touchOnly=O;var C=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"pen"===t.pointerType};exports.penOnly=C;var T=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),t.isPrimary&&0===t.button};exports.primaryAction=T;
},{"../MapBrowserEventType.js":"YhDM","../functions.js":"RgA2","../has.js":"f3Nv","../asserts.js":"fLG6"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),i=require("../easing.js"),r=require("../coordinate.js");function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var c=r?Object.getOwnPropertyDescriptor(t,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=g();return function(){var n,i=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function y(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(o){f(c,t.default);var a=h(c);function c(t){var i;u(this,c),t=t||{},(i=a.call(this,{stopDown:e.FALSE})).kinetic_=t.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var r=t.condition?t.condition:(0,n.all)(n.noModifierKeys,n.primaryAction);return i.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,r):r,i.noKinetic_=!1,i}return l(c,[{key:"handleDragEvent",value:function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=(0,t.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(0,r.scale)(o,a.getResolution()),(0,r.rotate)(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),c=e.getPixelFromCoordinateInternal(a),u=e.getCoordinateFromPixelInternal([c[0]-r*Math.cos(o),c[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(u),duration:500,easing:i.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}]),c}(),v=_;exports.default=v;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../easing.js":"IeCz","../coordinate.js":"nGsj"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),o=require("../rotationconstraint.js");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=d();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){f(c,t.default);var i=s(c);function c(t){var o;return u(this,c),t=t||{},(o=i.call(this,{stopDown:e.FALSE})).condition_=t.condition?t.condition:n.altShiftKeysOnly,o.lastAngle_=void 0,o.duration_=void 0!==t.duration?t.duration:250,o}return a(c,[{key:"handleDragEvent",value:function(t){if((0,n.mouseOnly)(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==o.disable){var i=e.getSize(),u=t.pixel,c=Math.atan2(i[1]/2-u[1],u[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=c-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=c}}}},{key:"handleUpEvent",value:function(t){return!(0,n.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!!(0,n.mouseOnly)(t)&&(!(!(0,n.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}]),c}(),h=v;exports.default=h;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../rotationconstraint.js":"EKd0"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../Disposable.js")),t=n(require("../geom/Polygon.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(n){u(i,e.default);var r=s(i);function i(e){var t;return o(this,i),(t=r.call(this)).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return l(i,[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,n=this.element_.style;n.left=Math.min(e[0],t[0])+"px",n.top=Math.min(e[1],t[1])+"px",n.width=Math.abs(t[0]-e[0])+"px",n.height=Math.abs(t[1]-e[1])+"px"}},{key:"setMap",value:function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new t.default([r])}},{key:"getGeometry",value:function(){return this.geometry_}}]),i}(),m=h;exports.default=m;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"Nwwk"}],"AQRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DragBoxEvent=void 0;var t=r(require("../events/Event.js")),e=r(require("./Pointer.js")),n=r(require("../render/Box.js")),o=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},h=function(e){s(o,t.default);var n=l(o);function o(t,e,r){var i;return a(this,o),(i=n.call(this,t)).coordinate=e,i.mapBrowserEvent=r,i}return c(o)}();exports.DragBoxEvent=h;var v=function(t){s(i,e.default);var r=l(i);function i(t){var e;return a(this,i),(e=r.call(this)).on,e.once,e.un,t=t||{},e.box_=new n.default(t.className||"ol-dragbox"),e.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(e.onBoxEnd=t.onBoxEnd),e.startPixel_=null,e.condition_=t.condition?t.condition:o.mouseActionButton,e.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:e.defaultBoxEndCondition,e}return c(i,[{key:"defaultBoxEndCondition",value:function(t,e,n){var o=n[0]-e[0],r=n[1]-e[1];return o*o+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new h(x.BOXDRAG,t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new h(e?x.BOXEND:x.BOXCANCEL,t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new h(x.BOXSTART,t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),i}(),_=v;exports.default=_;
},{"../events/Event.js":"fKNg","./Pointer.js":"dnA2","../render/Box.js":"bMDg","../events/condition.js":"YcID"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./DragBox.js")),e=require("../easing.js"),o=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,o){return e&&u(t.prototype,e),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var o,r=d(t);if(e){var n=d(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return s(this,o)}}function s(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){f(u,t.default);var n=l(u);function u(t){var e;i(this,u);var r=(t=t||{}).condition?t.condition:o.shiftKeyOnly;return(e=n.call(this,{condition:r,className:t.className||"ol-dragzoom",minArea:t.minArea})).duration_=void 0!==t.duration?t.duration:200,e.out_=void 0!==t.out&&t.out,e}return c(u,[{key:"onBoxEnd",value:function(t){var o=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=o.rotatedExtentForGeometry(r),i=o.getResolutionForExtentInternal(n),u=o.getResolution()/i;(r=r.clone()).scale(u*u)}o.fitInternal(r,{duration:this.duration_,easing:e.easeOut})}}]),u}(),v=b;exports.default=v;
},{"./DragBox.js":"AQRw","../easing.js":"IeCz","../events/condition.js":"YcID"}],"mmJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../events/EventType.js")),t=u(require("./Interaction.js")),r=f(require("../events/KeyCode.js")),n=require("../events/condition.js"),o=require("../coordinate.js");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function f(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=O();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(i){s(f,t.default);var u=y(f);function f(e){var t;return c(this,f),e=e||{},(t=u.call(this)).defaultCondition_=function(e){return(0,n.noModifierKeys)(e)&&(0,n.targetNotEditable)(e)},t.condition_=void 0!==e.condition?e.condition:t.defaultCondition_,t.duration_=void 0!==e.duration?e.duration:100,t.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128,t}return p(f,[{key:"handleEvent",value:function(n){var i=!1;if(n.type==e.default.KEYDOWN){var u=n.originalEvent,f=u.keyCode;if(this.condition_(n)&&(f==r.default.DOWN||f==r.default.LEFT||f==r.default.RIGHT||f==r.default.UP)){var a=n.map.getView(),c=a.getResolution()*this.pixelDelta_,l=0,p=0;f==r.default.DOWN?p=-c:f==r.default.LEFT?l=-c:f==r.default.RIGHT?l=c:p=c;var s=[l,p];(0,o.rotate)(s,a.getRotation()),(0,t.pan)(a,s,this.duration_),u.preventDefault(),i=!0}}return!i}}]),f}(),_=h;exports.default=_;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/KeyCode.js":"mmJk","../events/condition.js":"YcID","../coordinate.js":"nGsj"}],"S8wR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=o(require("./Interaction.js")),r=require("../events/condition.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var c=i?Object.getOwnPropertyDescriptor(t,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){l(i,e.default);var o=s(i);function i(t){var e;return c(this,i),t=t||{},(e=o.call(this)).condition_=t.condition?t.condition:r.targetNotEditable,e.delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:100,e}return a(i,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==t.default.KEYDOWN||r.type==t.default.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var u=r.map,c=i=="+".charCodeAt(0)?this.delta_:-this.delta_,f=u.getView();(0,e.zoomByDelta)(f,c,void 0,this.duration_),o.preventDefault(),n=!0}}return!n}}]),i}(),O=h;exports.default=O;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/condition.js":"YcID"}],"gAnK":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function i(e,n,s){t(this,i),this.decay_=e,this.minVelocity_=n,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e(i,[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,i){this.points_.push(t,i,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var e=i-3;e>0&&this.points_[e+2]>t;)e-=3;var n=this.points_[i+2]-this.points_[e+2];if(n<1e3/60)return!1;var s=this.points_[i]-this.points_[e],o=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}]),i}(),s=n;exports.default=s;
},{}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../events/EventType.js")),e=a(require("./Interaction.js")),o=require("../has.js"),n=require("../events/condition.js"),r=require("../math.js");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(i=function(t){return t?o:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=i(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=r?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,o&&o.set(t,n),n}function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,o){return e&&l(t.prototype,e),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=y();return function(){var o,n=v(t);if(e){var r=v(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return p(this,o)}}function p(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(i){d(u,e.default);var a=_(u);function u(t){var e;c(this,u),t=t||{},(e=a.call(this,t)).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,e.duration_=void 0!==t.duration?t.duration:250,e.timeout_=void 0!==t.timeout?t.timeout:80,e.useAnchor_=void 0===t.useAnchor||t.useAnchor,e.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var o=t.condition?t.condition:n.always;return e.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,o):o,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return f(u,[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(e){if(!this.condition_(e))return!0;if(e.type!==t.default.WHEEL)return!0;var n,r=e.map,i=e.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==t.default.WHEEL&&(n=i.deltaY,o.FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=o.DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");var u=r.getView();if("trackpad"===this.mode_&&!u.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=n;var s=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),s),!1}},{key:"handleWheelZoom_",value:function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var n=-(0,r.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,e.zoomByDelta)(o,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}]),u}(),O=b;exports.default=O;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../has.js":"f3Nv","../events/condition.js":"YcID","../math.js":"B96G"}],"hbGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),n=require("../rotationconstraint.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=y();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){l(i,t.default);var o=s(i);function i(t){var n;a(this,i);var r=t=t||{};return r.stopDown||(r.stopDown=e.FALSE),(n=o.call(this,r)).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==t.threshold?t.threshold:.3,n.duration_=void 0!==t.duration?t.duration:250,n}return c(i,[{key:"handleDragEvent",value:function(e){var r=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=u}this.lastAngle_=a;var c=e.map,l=c.getView();if(l.getConstraints().rotation!==n.disable){var f=c.getViewport().getBoundingClientRect(),s=(0,t.centroid)(this.targetPointers);s[0]-=f.left,s[1]-=f.top,this.anchor_=c.getCoordinateFromPixelInternal(s),this.rotating_&&(c.render(),l.adjustRotationInternal(r,this.anchor_))}}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),i}(),v=b;exports.default=v;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../rotationconstraint.js":"EKd0"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Pointer.js")),e=require("../functions.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,r&&r.set(t,o),o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=y();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(n){c(o,t.default);var r=f(o);function o(t){var n;i(this,o);var a=t=t||{};return a.stopDown||(a.stopDown=e.FALSE),(n=r.call(this,a)).anchor_=null,n.duration_=void 0!==t.duration?t.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return u(o,[{key:"handleDragEvent",value:function(e){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],i=r.clientX-o.clientX,a=r.clientY-o.clientY,u=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/u),this.lastDistance_=u;var c=e.map,l=c.getView();1!=n&&(this.lastScaleDelta_=n);var f=c.getViewport().getBoundingClientRect(),s=(0,t.centroid)(this.targetPointers);s[0]-=f.left,s[1]-=f.top,this.anchor_=c.getCoordinateFromPixelInternal(s),c.render(),l.adjustResolutionInternal(n,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),o}(),b=d;exports.default=b;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2"}],"PYDc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=m;var o=h(require("../Collection.js")),e=h(require("./DoubleClickZoom.js")),u=h(require("./DragPan.js")),t=h(require("./DragRotate.js")),r=h(require("./DragZoom.js")),a=h(require("./KeyboardPan.js")),i=h(require("./KeyboardZoom.js")),n=h(require("../Kinetic.js")),d=h(require("./MouseWheelZoom.js")),l=h(require("./PinchRotate.js")),s=h(require("./PinchZoom.js"));function h(o){return o&&o.__esModule?o:{default:o}}function m(h){h=h||{};var m=new o.default,c=new n.default(-.005,.05,100);return(void 0===h.altShiftDragRotate||h.altShiftDragRotate)&&m.push(new t.default),(void 0===h.doubleClickZoom||h.doubleClickZoom)&&m.push(new e.default({delta:h.zoomDelta,duration:h.zoomDuration})),(void 0===h.dragPan||h.dragPan)&&m.push(new u.default({onFocusOnly:h.onFocusOnly,kinetic:c})),(void 0===h.pinchRotate||h.pinchRotate)&&m.push(new l.default),(void 0===h.pinchZoom||h.pinchZoom)&&m.push(new s.default({duration:h.zoomDuration})),(void 0===h.keyboard||h.keyboard)&&(m.push(new a.default),m.push(new i.default({delta:h.zoomDelta,duration:h.zoomDuration}))),(void 0===h.mouseWheelZoom||h.mouseWheelZoom)&&m.push(new d.default({onFocusOnly:h.onFocusOnly,duration:h.zoomDuration})),(void 0===h.shiftDragZoom||h.shiftDragZoom)&&m.push(new r.default({duration:h.zoomDuration})),m}
},{"../Collection.js":"FnDa","./DoubleClickZoom.js":"NSa4","./DragPan.js":"N4gU","./DragRotate.js":"PgBj","./DragZoom.js":"pTqW","./KeyboardPan.js":"CFRo","./KeyboardZoom.js":"S8wR","../Kinetic.js":"gAnK","./MouseWheelZoom.js":"kPt6","./PinchRotate.js":"hbGN","./PinchZoom.js":"rcXm"}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"kYy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=I(require("./Object.js")),t=I(require("./Collection.js")),r=I(require("./CollectionEventType.js")),n=I(require("./renderer/Composite.js")),i=I(require("./events/EventType.js")),a=I(require("./layer/Layer.js")),o=A(require("./layer/Group.js")),s=I(require("./MapBrowserEvent.js")),l=I(require("./MapBrowserEventHandler.js")),u=I(require("./MapBrowserEventType.js")),d=I(require("./MapEvent.js")),h=I(require("./MapEventType.js")),v=I(require("./MapProperty.js")),y=I(require("./ObjectEventType.js")),f=I(require("./pointer/EventType.js")),c=I(require("./render/EventType.js")),p=A(require("./TileQueue.js")),g=I(require("./View.js")),_=I(require("./ViewHint.js")),E=require("./has.js"),m=require("./functions.js"),w=require("./transform.js"),T=require("./asserts.js"),C=require("./extent.js"),L=require("./control/defaults.js"),R=require("./interaction/defaults.js"),b=require("./proj.js"),k=require("./util.js"),S=require("./size.js"),P=require("./events.js"),O=require("./dom.js");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function I(e){return e&&e.__esModule?e:{default:e}}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=H(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=W();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){e instanceof a.default?e.setMapInternal(null):e instanceof o.default&&e.getLayers().forEach(U)}function Y(e,t){if(e instanceof a.default)e.setMapInternal(t);else if(e instanceof o.default)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)Y(r[n],t)}var Q=function(a){M(x,e.default);var T=K(x);function x(e){var t;D(this,x),e=e||{},(t=T.call(this)).on,t.once,t.un;var n=X(e);t.renderComplete_,t.loaded_=!0,t.boundHandleBrowserEvent_=t.handleBrowserEvent.bind(B(t)),t.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,t.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:E.DEVICE_PIXEL_RATIO,t.postRenderTimeoutHandle_,t.animationDelayKey_,t.animationDelay_=t.animationDelay_.bind(B(t)),t.coordinateToPixelTransform_=(0,w.create)(),t.pixelToCoordinateTransform_=(0,w.create)(),t.frameIndex_=0,t.frameState_=null,t.previousExtent_=null,t.viewPropertyListenerKey_=null,t.viewChangeListenerKey_=null,t.layerGroupPropertyListenerKeys_=null,t.viewport_=document.createElement("div"),t.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),t.viewport_.style.position="relative",t.viewport_.style.overflow="hidden",t.viewport_.style.width="100%",t.viewport_.style.height="100%",t.overlayContainer_=document.createElement("div"),t.overlayContainer_.style.position="absolute",t.overlayContainer_.style.zIndex="0",t.overlayContainer_.style.width="100%",t.overlayContainer_.style.height="100%",t.overlayContainer_.style.pointerEvents="none",t.overlayContainer_.className="ol-overlaycontainer",t.viewport_.appendChild(t.overlayContainer_),t.overlayContainerStopEvent_=document.createElement("div"),t.overlayContainerStopEvent_.style.position="absolute",t.overlayContainerStopEvent_.style.zIndex="0",t.overlayContainerStopEvent_.style.width="100%",t.overlayContainerStopEvent_.style.height="100%",t.overlayContainerStopEvent_.style.pointerEvents="none",t.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",t.viewport_.appendChild(t.overlayContainerStopEvent_),t.mapBrowserEventHandler_=null,t.moveTolerance_=e.moveTolerance,t.keyboardEventTarget_=n.keyboardEventTarget,t.targetChangeHandlerKeys_=null,t.controls=n.controls||(0,L.defaults)(),t.interactions=n.interactions||(0,R.defaults)({onFocusOnly:!0}),t.overlays_=n.overlays,t.overlayIdIndex_={},t.renderer_=null,t.postRenderFunctions_=[],t.tileQueue_=new p.default(t.getTilePriority.bind(B(t)),t.handleTileChange_.bind(B(t))),t.addChangeListener(v.default.LAYERGROUP,t.handleLayerGroupChanged_),t.addChangeListener(v.default.VIEW,t.handleViewChanged_),t.addChangeListener(v.default.SIZE,t.handleSizeChanged_),t.addChangeListener(v.default.TARGET,t.handleTargetChanged_),t.setProperties(n.values);var i=B(t);return!e.view||e.view instanceof g.default||e.view.then(function(e){i.setView(new g.default(e))}),t.controls.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(B(t))),t.controls.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(B(t))),t.interactions.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(B(t))),t.interactions.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(B(t))),t.overlays_.addEventListener(r.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(B(t))),t.overlays_.addEventListener(r.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(B(t))),t.controls.forEach(function(e){e.setMap(this)}.bind(B(t))),t.interactions.forEach(function(e){e.setMap(this)}.bind(B(t))),t.overlays_.forEach(t.addOverlayInternal_.bind(B(t))),t}return N(x,[{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"handleLayerAdd_",value:function(e){Y(e.layer,this)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),V(z(x.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,a=void 0!==r.layerFilter?r.layerFilter:m.TRUE,o=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,o,t,null,a,null)}}},{key:"getFeaturesAtPixel",value:function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r}},{key:"getAllLayers",value:function(){var e=[];return function t(r){r.forEach(function(r){r instanceof o.default?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}},{key:"hasFeatureAtPixel",value:function(e,t){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:m.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance:0,a=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,a,n,null)}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventCoordinateInternal",value:function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]}},{key:"getTarget",value:function(){return this.get(v.default.TARGET)}},{key:"getTargetElement",value:function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}},{key:"getCoordinateFromPixel",value:function(e){return(0,b.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(v.default.LAYERGROUP)}},{key:"setLayers",value:function(e){var r=this.getLayerGroup();if(e instanceof t.default)r.setLayers(e);else{var n=r.getLayers();n.clear(),n.extend(e)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var a=n.layer.getSource();if(a&&a.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(e){var t=(0,b.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}},{key:"getPixelFromCoordinateInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(v.default.SIZE)}},{key:"getView",value:function(){return this.get(v.default.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var e=this.getTargetElement();return e?e.ownerDocument:document}},{key:"getTilePriority",value:function(e,t,r,n){return(0,p.getTilePriority)(this.frameState_,e,t,r,n)}},{key:"handleBrowserEvent",value:function(e,t){t=t||e.type;var r=new s.default(t,this,e);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===f.default.POINTERDOWN||r===i.default.WHEEL||r===i.default.KEYDOWN){var n=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(a===n?n.documentElement:a).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var s=this.getInteractions().getArray().slice(),l=s.length-1;l>=0;l--){var u=s[l];if(u.getMap()===this&&u.getActive()&&this.getTargetElement())if(!u.handleEvent(e)||e.propagationStopped)break}}}},{key:"handlePostRender",value:function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[_.default.ANIMATING]||i[_.default.INTERACTING]){var a=Date.now()-e.time>8;r=a?0:8,n=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(c.default.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(c.default.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new d.default(h.default.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new d.default(h.default.LOADSTART,this,e))));for(var o=this.postRenderFunctions_,s=0,l=o.length;s<l;++s)o[s](this,e);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)(0,P.unlistenByKey)(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,O.removeNode)(this.viewport_)}var r=this.getTargetElement();if(r){for(var a in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=new n.default(this)),this.mapBrowserEventHandler_=new l.default(this,this.moveTolerance_),u.default)this.mapBrowserEventHandler_.addEventListener(u.default[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_,!!E.PASSIVE_EVENT_LISTENERS&&{passive:!1});var o=this.getOwnerDocument().defaultView,s=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[(0,P.listen)(s,i.default.KEYDOWN,this.handleBrowserEvent,this),(0,P.listen)(s,i.default.KEYPRESS,this.handleBrowserEvent,this),(0,P.listen)(o,i.default.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,P.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,P.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,P.listen)(e,y.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,P.listen)(e,i.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new o.GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,P.listen)(e,y.default.PROPERTYCHANGE,this.render,this),(0,P.listen)(e,i.default.CHANGE,this.render,this),(0,P.listen)(e,"addlayer",this.handleLayerAdd_,this),(0,P.listen)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"handleLayerRemove_",value:function(e){U(e.layer)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t=this,r=this.getSize(),n=this.getView(),i=this.frameState_,a=null;if(void 0!==r&&(0,S.hasArea)(r)&&n&&n.isDef()){var o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,C.getForViewAndSize)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:(0,k.getUid)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;a.nextExtent=(0,C.getForViewAndSize)(s.nextCenter,s.nextResolution,l,r)}}if(this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i)(!this.previousExtent_||!(0,C.isEmpty)(this.previousExtent_)&&!(0,C.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new d.default(h.default.MOVESTART,this,i)),this.previousExtent_=(0,C.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!a.viewHints[_.default.ANIMATING]&&!a.viewHints[_.default.INTERACTING]&&!(0,C.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new d.default(h.default.MOVEEND,this,a)),(0,C.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new d.default(h.default.POSTRENDER,this,a)),this.renderComplete_=this.hasListener(h.default.LOADSTART)||this.hasListener(h.default.LOADEND)||this.hasListener(c.default.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))}},{key:"setLayerGroup",value:function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new o.GroupEvent("removelayer",t)),this.set(v.default.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(v.default.SIZE,e)}},{key:"setTarget",value:function(e){this.set(v.default.TARGET,e)}},{key:"setView",value:function(e){if(!e||e instanceof g.default)this.set(v.default.VIEW,e);else{this.set(v.default.VIEW,new g.default);var t=this;e.then(function(e){t.setView(new g.default(e))})}}},{key:"updateSize",value:function(){var e=this.getTargetElement(),t=void 0;if(e){var r=getComputedStyle(e),n=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||(t=[n,i],!(0,S.hasArea)(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}},{key:"updateViewportSize_",value:function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}}}]),x}();function X(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,i,a,s={},l=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new o.default({layers:e.layers});return s[v.default.LAYERGROUP]=l,s[v.default.TARGET]=e.target,s[v.default.VIEW]=e.view instanceof g.default?e.view:new g.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,T.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new t.default(e.interactions.slice()):((0,T.assert)("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,T.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:i,keyboardEventTarget:r,overlays:a,values:s}}var Z=Q;exports.default=Z;
},{"./Object.js":"PhPh","./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./renderer/Composite.js":"MHsB","./events/EventType.js":"C8cu","./layer/Layer.js":"GCgv","./layer/Group.js":"q0nK","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"YhDM","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./ObjectEventType.js":"zehl","./pointer/EventType.js":"TaSm","./render/EventType.js":"z39m","./TileQueue.js":"tHOl","./View.js":"hNqE","./ViewHint.js":"cuLW","./has.js":"f3Nv","./functions.js":"RgA2","./transform.js":"P4eA","./asserts.js":"fLG6","./extent.js":"QDir","./control/defaults.js":"cZGD","./interaction/defaults.js":"PYDc","./proj.js":"Diht","./util.js":"KniQ","./size.js":"TAHd","./events.js":"UqnM","./dom.js":"Xno5"}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./events/Target.js")),e=o(require("./events/EventType.js")),n=o(require("./TileState.js")),r=require("./util.js"),i=require("./easing.js");function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=d();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(o){f(s,t.default);var u=y(s);function s(t,e,n){var r;return a(this,s),n=n||{},(r=u.call(this)).tileCoord=t,r.state=e,r.interimTile=null,r.key="",r.transition_=void 0===n.transition?250:n.transition,r.transitionStarts_={},r.interpolate=!!n.interpolate,r}return l(s,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"release",value:function(){this.state===n.default.ERROR&&this.setState(n.default.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==n.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==n.default.LOADED){t.interimTile=null;break}t.getState()==n.default.LOADING?e=t:t.getState()==n.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==n.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){(0,r.abstract)()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:(0,i.easeIn)(r/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}]),s}(),m=b;exports.default=m;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./TileState.js":"u3kG","./util.js":"KniQ","./easing.js":"IeCz"}],"TOsW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Tile.js")),e=i(require("./TileState.js")),n=require("./dom.js"),r=require("./Image.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=d();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(n){l(o,t.default);var i=f(o);function o(t,e,n,r,a,s){var l;return u(this,o),(l=i.call(this,t,e,s)).crossOrigin_=r,l.src_=n,l.key=n,l.image_=new Image,null!==r&&(l.image_.crossOrigin=r),l.unlisten_=null,l.tileLoadFunction_=a,l}return s(o,[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=e.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=g(),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,r.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function g(){var t=(0,n.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var m=_;exports.default=m;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG","./dom.js":"Xno5","./Image.js":"DHWK"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=c(require("../events/EventType.js")),r=c(require("../Tile.js")),n=c(require("../TileState.js")),i=c(require("./Triangulation.js")),o=require("../reproj.js"),u=require("../math.js"),s=require("../extent.js"),a=require("../events.js"),l=require("../dom.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=O();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(c){g(p,r.default);var f=T(p);function p(t,r,a,l,c,h,_,y,g,v,T,E){var O;d(this,p),(O=f.call(this,c,n.default.IDLE,{interpolate:!!E})).renderEdges_=void 0!==T&&T,O.pixelRatio_=_,O.gutter_=y,O.canvas_=null,O.sourceTileGrid_=r,O.targetTileGrid_=l,O.wrappedTileCoord_=h||c,O.sourceTiles_=[],O.sourcesListenerKeys_=null,O.sourceZ_=0;var j=l.getTileCoordExtent(O.wrappedTileCoord_),m=O.targetTileGrid_.getExtent(),R=O.sourceTileGrid_.getExtent(),x=m?(0,s.getIntersection)(j,m):j;if(0===(0,s.getArea)(x))return O.state=n.default.EMPTY,b(O);var w=t.getExtent();w&&(R=R?(0,s.getIntersection)(R,w):w);var P=l.getResolution(O.wrappedTileCoord_[0]),S=(0,o.calculateSourceExtentResolution)(t,a,x,P);if(!isFinite(S)||S<=0)return O.state=n.default.EMPTY,b(O);var D=void 0!==v?v:e.ERROR_THRESHOLD;if(O.triangulation_=new i.default(t,a,x,R,S*D,P),0===O.triangulation_.getTriangles().length)return O.state=n.default.EMPTY,b(O);O.sourceZ_=r.getZForResolution(S);var L=O.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(L[1]=(0,u.clamp)(L[1],R[1],R[3]),L[3]=(0,u.clamp)(L[3],R[1],R[3])):L=(0,s.getIntersection)(L,R)),(0,s.getArea)(L)){for(var C=r.getTileRangeForExtentAndZ(L,O.sourceZ_),G=C.minX;G<=C.maxX;G++)for(var I=C.minY;I<=C.maxY;I++){var q=g(O.sourceZ_,G,I,_);q&&O.sourceTiles_.push(q)}0===O.sourceTiles_.length&&(O.state=n.default.EMPTY)}else O.state=n.default.EMPTY;return O}return h(p,[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e=[];if(this.sourceTiles_.forEach(function(t,r,i){t&&t.getState()==n.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=n.default.ERROR;else{var t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i="number"==typeof r?r:r[0],u="number"==typeof r?r:r[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,o.render)(i,u,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=n.default.LOADED}this.changed()}},{key:"load",value:function(){if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,i,o){var u=r.getState();if(u==n.default.IDLE||u==n.default.LOADING){e++;var s=(0,a.listen)(r,t.default.CHANGE,function(t){var i=r.getState();i!=n.default.LOADED&&i!=n.default.ERROR&&i!=n.default.EMPTY||((0,a.unlistenByKey)(s),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,t,r){e.getState()==n.default.IDLE&&e.load()})}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&((0,l.releaseCanvas)(this.canvas_.getContext("2d")),o.canvasPool.push(this.canvas_),this.canvas_=null),_(j(p.prototype),"release",this).call(this)}}]),p}(),R=m;exports.default=R;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../Tile.js":"IWZI","../TileState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../math.js":"B96G","../extent.js":"QDir","../events.js":"UqnM","../dom.js":"Xno5"}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}var r=function(){function n(e){t(this,n),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return s(n,[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(e){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(t,n){var s=this.entries_[t];return(0,e.assert)(void 0!==s,15),s===this.newest_?s.value_:(s===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(s.newer.older=s.older,s.older.newer=s.newer),s.newer=null,s.older=this.newest_,this.newest_.newer=s,this.newest_=s,s.value_)}},{key:"remove",value:function(t){var n=this.entries_[t];return(0,e.assert)(void 0!==n,15),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}},{key:"getValues",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(e){if(this.containsKey(e))return this.entries_[e].value_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(t,n){(0,e.assert)(!(t in this.entries_),16);var s={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}]),n}(),i=r;exports.default=i;
},{"../asserts.js":"fLG6"}],"faTr":[function(require,module,exports) {
"use strict";function t(t,n){return u(t)||o(t,n)||e(t,n)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u=[],i=!0,a=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(u.push(n.value),!r||u.length!==r);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==e.return||e.return()}finally{if(a)throw o}}return u}}function u(t){if(Array.isArray(t))return t}function i(t,r,e,n){return void 0!==n?(n[0]=t,n[1]=r,n[2]=e,n):[t,r,e]}function a(t,r,e){return t+"/"+r+"/"+e}function l(t){return a(t[0],t[1],t[2])}function c(r){var e=t(r.substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number),3);return a(e[0],e[1],e[2])}function f(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function p(t,r){var e=t[0],n=t[1],o=t[2];if(r.getMinZoom()>e||e>r.getMaxZoom())return!1;var u=r.getFullTileRange(e);return!u||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.fromKey=f,exports.getCacheKeyForTileKey=c,exports.getKey=l,exports.getKeyZXY=a,exports.hash=s,exports.withinExtentAndZ=p;
},{}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./structs/LRUCache.js")),t=require("./tilecoord.js");function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=f(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=b();return function(){var r,o=h(e);if(t){var n=h(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(r){l(i,e.default);var o=p(i);function i(){return n(this,i),o.apply(this,arguments)}return u(i,[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();c(h(i.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}}},{key:"pruneExceptNewestZ",value:function(){if(0!==this.getCount()){var e=this.peekFirstKey(),r=(0,t.fromKey)(e)[0];this.forEach(function(e){e.tileCoord[0]!==r&&(this.remove((0,t.getKey)(e.tileCoord)),e.release())}.bind(this))}}}]),i}(),v=d;exports.default=v;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"faTr"}],"KXhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"snev":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=a,exports.default=void 0;var e=function(){function i(n,e,a,m){t(this,i),this.minX=n,this.maxX=e,this.minY=a,this.maxY=m}return n(i,[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}]),i}();function a(t,i,n,a,m){return void 0!==m?(m.minX=t,m.maxX=i,m.minY=n,m.maxY=a,m):new e(t,i,n,a)}var m=e;exports.default=m;
},{}],"dpZ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../TileRange.js")),t=require("./common.js"),i=require("../asserts.js"),r=require("../math.js"),n=require("../extent.js"),o=require("../tilecoord.js"),s=require("../geom/flat/intersectsextent.js"),l=require("../array.js"),a=require("../size.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(e){return e?i:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=u(t);if(i&&i.has(e))return i.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,i&&i.set(e,r),r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var m=[0,0,0],_=5,d=function(){function u(r){var o;if(g(this,u),this.minZoom=void 0!==r.minZoom?r.minZoom:0,this.resolutions_=r.resolutions,(0,i.assert)((0,l.isSorted)(this.resolutions_,function(e,t){return t-e},!0),17),!r.origins)for(var s=0,a=this.resolutions_.length-1;s<a;++s)if(o){if(this.resolutions_[s]/this.resolutions_[s+1]!==o){o=void 0;break}}else o=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==r.origin?r.origin:null,this.origins_=null,void 0!==r.origins&&(this.origins_=r.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var h=r.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,n.getTopLeft)(h)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==r.tileSizes&&(this.tileSizes_=r.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==r.tileSize?r.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==r.sizes?this.fullTileRanges_=r.sizes.map(function(t,i){var r=new e.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(h){var n=this.getTileRangeForExtentAndZ(h,i);r.minX=Math.max(n.minX,r.minX),r.maxX=Math.min(n.maxX,r.maxX),r.minY=Math.max(n.minY,r.minY),r.maxY=Math.min(n.maxY,r.maxY)}return r},this):h&&this.calculateTileRanges_(h)}return c(u,[{key:"forEachTileCoord",value:function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),n=r.minX,o=r.maxX;n<=o;++n)for(var s=r.minY,l=r.maxY;s<=l;++s)i([t,n,s])}},{key:"forEachTileCoordParentTileRange",value:function(t,i,r,n){var o,s,l,a=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):a=this.getTileCoordExtent(t,n);u>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),o=(0,e.createOrUpdate)(s,s,l,l,r)):o=this.getTileRangeForExtentAndZ(a,u,r),i(u,o))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_?this.origin_:this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,i,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return(0,e.createOrUpdate)(n,n+1,o,o+1,i)}var s=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,i,r){if(i>this.maxZoom||i<this.minZoom)return null;var n=t[0],o=t[1],s=t[2];if(i===n)return(0,e.createOrUpdate)(o,s,o,s,r);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,i-n),a=Math.floor(o*l),u=Math.floor(s*l);if(i<n)return(0,e.createOrUpdate)(a,a,u,u,r);var h=Math.floor(l*(o+1))-1,g=Math.floor(l*(s+1))-1;return(0,e.createOrUpdate)(a,h,u,g,r)}var f=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,i,r)}},{key:"getTileRangeExtent",value:function(e,t,i){var r=this.getOrigin(e),o=this.getResolution(e),s=(0,a.toSize)(this.getTileSize(e),this.tmpSize_),l=r[0]+t.minX*s[0]*o,u=r[0]+(t.maxX+1)*s[0]*o,h=r[1]+t.minY*s[1]*o,g=r[1]+(t.maxY+1)*s[1]*o;return(0,n.createOrUpdate)(l,h,u,g,i)}},{key:"getTileRangeForExtentAndZ",value:function(t,i,r){var n=m;this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,n);var o=n[1],s=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,n),(0,e.createOrUpdate)(o,n[1],s,n[2],r)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}},{key:"getTileCoordExtent",value:function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,l=i[1]-(e[2]+1)*o[1]*r,u=s+o[0]*r,h=l+o[1]*r;return(0,n.createOrUpdate)(s,l,u,h,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,i,n,s){var l=this.getZForResolution(i),u=i/this.getResolution(l),h=this.getOrigin(l),g=(0,a.toSize)(this.getTileSize(l),this.tmpSize_),f=u*(e-h[0])/i/g[0],c=u*(h[1]-t)/i/g[1];return n?(f=(0,r.ceil)(f,_)-1,c=(0,r.ceil)(c,_)-1):(f=(0,r.floor)(f,_),c=(0,r.floor)(c,_)),(0,o.createOrUpdate)(l,f,c,s)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,i,n,s){var l=this.getOrigin(i),u=this.getResolution(i),h=(0,a.toSize)(this.getTileSize(i),this.tmpSize_),g=(e-l[0])/u/h[0],f=(l[1]-t)/u/h[1];return n?(g=(0,r.ceil)(g,_)-1,f=(0,r.ceil)(f,_)-1):(g=(0,r.floor)(g,_),f=(0,r.floor)(f,_)),(0,o.createOrUpdate)(i,g,f,s)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}},{key:"getZForResolution",value:function(e,t){var i=(0,l.linearFindNearest)(this.resolutions_,e,t||0);return(0,r.clamp)(i,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(e,t){return(0,s.intersectsLinearRing)(t,0,t.length,2,this.getTileCoordExtent(e))}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}]),u}(),v=d;exports.default=v;
},{"../TileRange.js":"snev","./common.js":"mOEX","../asserts.js":"fLG6","../math.js":"B96G","../extent.js":"QDir","../tilecoord.js":"faTr","../geom/flat/intersectsextent.js":"GZir","../array.js":"luEr","../size.js":"TAHd"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createForExtent=s,exports.createForProjection=c,exports.createXYZ=l,exports.extentFromProjection=f,exports.getForProjection=u,exports.wrapX=a;var e=n(require("./tilegrid/TileGrid.js")),t=require("./tilegrid/common.js"),r=require("./proj.js"),o=require("./extent.js"),i=require("./size.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.getDefaultTileGrid();return t||(t=c(e),e.setDefaultTileGrid(t)),t}function a(e,t,r){var i=t[0],n=e.getTileCoordCenter(t),u=f(r);if((0,o.containsCoordinate)(u,n))return t;var a=(0,o.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,i)}function s(t,r,i,n){n=void 0!==n?n:"top-left";var u=d(t,r,i);return new e.default({extent:t,origin:(0,o.getCorner)(t,n),resolutions:u,tileSize:i})}function l(t){var o=t||{},i=o.extent||(0,r.get)("EPSG:3857").getExtent(),n={extent:i,minZoom:o.minZoom,tileSize:o.tileSize,resolutions:d(i,o.maxZoom,o.tileSize,o.maxResolution)};return new e.default(n)}function d(e,r,n,u){r=void 0!==r?r:t.DEFAULT_MAX_ZOOM,n=(0,i.toSize)(void 0!==n?n:t.DEFAULT_TILE_SIZE);var a=(0,o.getHeight)(e),s=(0,o.getWidth)(e);u=u>0?u:Math.max(s/n[0],a/n[1]);for(var l=r+1,d=new Array(l),c=0;c<l;++c)d[c]=u/Math.pow(2,c);return d}function c(e,t,r,o){return s(f(e),t,r,o)}function f(e){var t=(e=(0,r.get)(e)).getExtent();if(!t){var i=180*r.METERS_PER_UNIT.degrees/e.getMetersPerUnit();t=(0,o.createOrUpdate)(-i,-i,i,i)}return t}
},{"./tilegrid/TileGrid.js":"dpZ6","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./extent.js":"QDir","./size.js":"TAHd"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var e=s(require("../events/Event.js")),t=s(require("./Source.js")),r=s(require("../TileCache.js")),i=s(require("../TileState.js")),n=require("../util.js"),o=require("../asserts.js"),u=require("../proj.js"),l=require("../tilecoord.js"),a=require("../tilegrid.js"),c=require("../size.js");function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=d(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=T();return function(){var r,i=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){b(f,t.default);var s=j(f);function f(e){var t;p(this,f),(t=s.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})).on,t.once,t.un,t.opaque_=void 0!==e.opaque&&e.opaque,t.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,t.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return t.tileGrid&&(0,c.toSize)(t.tileGrid.getTileSize(t.tileGrid.getMinZoom()),[256,256]),t.tileCache=new r.default(e.cacheSize||0),t.tmpSize=[0,0],t.key_=e.key||"",t.tileOptions={transition:e.transition,interpolate:e.interpolate},t.zDirection=e.zDirection?e.zDirection:0,t}return h(f,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var u,a,c,s=!0,f=r.minX;f<=r.maxX;++f)for(var p=r.minY;p<=r.maxY;++p)a=(0,l.getKeyZXY)(t,f,p),c=!1,o.containsKey(a)&&(c=(u=o.get(a)).getState()===i.default.LOADED)&&(c=!1!==n(u)),c||(s=!1);return s}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(){return this.tileGrid?this.tileGrid.getResolutions():null}},{key:"getTile",value:function(e,t,r,i,o){return(0,n.abstract)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid?this.tileGrid:(0,a.getForProjection)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return(0,o.assert)(null===t||(0,u.equivalent)(t,e),68),this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,r){var i=this.getTileGridForProjection(r),n=this.getTilePixelRatio(t),o=(0,c.toSize)(i.getTileSize(e),this.tmpSize);return 1==n?o:(0,c.scale)(o,n,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){t=void 0!==t?t:this.getProjection();var r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=(0,a.wrapX)(r,e,t)),(0,l.withinExtentAndZ)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),v(O(f.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(e,t){var r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}},{key:"useTile",value:function(e,t,r,i){}}]),f}(),S=function(t){b(i,e.default);var r=j(i);function i(e,t){var n;return p(this,i),(n=r.call(this,e)).tile=t,n}return h(i)}();exports.TileSourceEvent=S;var m=x;exports.default=m;
},{"../events/Event.js":"fKNg","./Source.js":"H38a","../TileCache.js":"YFDe","../TileState.js":"u3kG","../util.js":"KniQ","../asserts.js":"fLG6","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../size.js":"TAHd"}],"p1vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.expandUrl=i,exports.nullTileUrlFunction=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){return i?e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,i[2].toString()).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-i[2]-1).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"faTr"}],"uv9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./TileEventType.js")),e=l(require("./Tile.js")),n=c(require("../TileState.js")),r=require("../tileurlfunction.js"),i=require("../tilecoord.js"),o=require("../util.js");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var l=i?Object.getOwnPropertyDescriptor(t,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function c(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=O();return function(){var n,r=j(t);if(e){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(u){y(c,e.default);var l=h(c);function c(t){var e;return s(this,c),(e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).generateTileUrlFunction_=e.tileUrlFunction===c.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return p(c,[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(r){var i,u=r.target,l=(0,o.getUid)(u),c=u.getState();c==n.default.LOADING?(this.tileLoadingKeys_[l]=!0,i=t.default.TILELOADSTART):l in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[l],i=c==n.default.ERROR?t.default.TILELOADERROR:c==n.default.LOADED?t.default.TILELOADEND:void 0),null!=i&&this.dispatchEvent(new e.TileSourceEvent(i,u))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=(0,r.expandUrl)(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,r.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,n){}},{key:"useTile",value:function(t,e,n){var r=(0,i.getKeyZXY)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}]),c}(),U=g;exports.default=U;
},{"./TileEventType.js":"KXhD","./Tile.js":"JECm","../TileState.js":"u3kG","../tileurlfunction.js":"p1vZ","../tilecoord.js":"faTr","../util.js":"KniQ"}],"udAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../events/EventType.js")),t=s(require("../ImageTile.js")),i=s(require("../reproj/Tile.js")),r=s(require("../TileCache.js")),o=s(require("../TileState.js")),n=s(require("./UrlTile.js")),l=require("../proj.js"),c=require("../tilecoord.js"),a=require("../tilegrid.js"),u=require("../util.js");function s(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}}).apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=F();return function(){var i,r=T(e);if(t){var o=T(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return b(this,i)}}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(s){g(p,n.default);var h=P(p);function p(e){var i;return f(this,p),(i=h.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:k,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:t.default,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return d(p,[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(e,t){var i=this.getTileCacheForProjection(e);for(var r in this.tileCache.expireCache(this.tileCache==i?t:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[r];o.expireCache(o==i?t:{})}}},{key:"getGutterForProjection",value:function(e){return this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var e=y(T(p.prototype),"getKey",this).call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e}},{key:"getOpaque",value:function(e){return!(this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e))&&y(T(p.prototype),"getOpaque",this).call(this,e)}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(!this.tileGrid||t&&!(0,l.equivalent)(t,e)){var i=(0,u.getUid)(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,a.getForProjection)(e)),this.tileGridForProjection[i]}return this.tileGrid}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,l.equivalent)(t,e))return this.tileCache;var i=(0,u.getUid)(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}},{key:"createTile_",value:function(t,i,r,n,l,c){var a=[t,i,r],u=this.getTileCoordForTileUrlFunction(a,l),s=u?this.tileUrlFunction(u,n,l):void 0,h=new this.tileClass(a,void 0!==s?o.default.IDLE:o.default.EMPTY,void 0!==s?s:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=c,h.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),h}},{key:"getTile",value:function(e,t,r,o,n){var a=this.getProjection();if(a&&n&&!(0,l.equivalent)(a,n)){var u,s=this.getTileCacheForProjection(n),h=[e,t,r],f=(0,c.getKey)(h);s.containsKey(f)&&(u=s.get(f));var p=this.getKey();if(u&&u.key==p)return u;var d=this.getTileGridForProjection(a),y=this.getTileGridForProjection(n),j=this.getTileCoordForTileUrlFunction(h,n),g=new i.default(a,d,n,y,h,j,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=p,u?(g.interimTile=u,g.refreshInterimChain(),s.replace(f,g)):s.set(f,g),g}return this.getTileInternal(e,t,r,o,a||n)}},{key:"getTileInternal",value:function(e,t,i,r,n){var l=null,a=(0,c.getKeyZXY)(e,t,i),u=this.getKey();if(this.tileCache.containsKey(a)){if((l=this.tileCache.get(a)).key!=u){var s=l;l=this.createTile_(e,t,i,r,n,u),s.getState()==o.default.IDLE?l.interimTile=s.interimTile:l.interimTile=s,l.refreshInterimChain(),this.tileCache.replace(a,l)}}else l=this.createTile_(e,t,i,r,n,u),this.tileCache.set(a,l);return l}},{key:"setRenderReprojectionEdges",value:function(e){if(this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(e,t){var i=(0,l.get)(e);if(i){var r=(0,u.getUid)(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},{key:"clear",value:function(){for(var e in y(T(p.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}]),p}();function k(e,t){e.getImage().src=t}var E=O;exports.default=E;
},{"../events/EventType.js":"C8cu","../ImageTile.js":"TOsW","../reproj/Tile.js":"WlOd","../TileCache.js":"YFDe","../TileState.js":"u3kG","./UrlTile.js":"uv9E","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../util.js":"KniQ"}],"knlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./TileImage.js")),e=require("../tilegrid.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=p();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return f(this,r)}}function f(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){c(i,t.default);var o=a(i);function i(t){var r;n(this,i);var u=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",c=void 0!==t.tileGrid?t.tileGrid:(0,e.createXYZ)({extent:(0,e.extentFromProjection)(u),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});return(r=o.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:u,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).gutter_=void 0!==t.gutter?t.gutter:0,r}return u(i,[{key:"getGutter",value:function(){return this.gutter_}}]),i}(),d=b;exports.default=d;
},{"./TileImage.js":"udAI","../tilegrid.js":"ExRx"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=g,exports.default=void 0;var e=o(require("./Object.js")),t=o(require("./events/EventType.js")),n=require("./asserts.js"),r=require("./events.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=m();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){y(i,e.default);var o=l(i);function i(e){var t;if(u(this,i),(t=o.call(this)).on,t.once,t.un,t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addChangeListener(t.geometryName_,t.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;t.setGeometry(n)}else{var r=e;t.setProperties(r)}return t}return s(i,[{key:"clone",value:function(){var e=new i(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var n=this.getStyle();return n&&e.setStyle(n),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,r.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,r.listen)(e,t.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){this.style_=e,this.styleFunction_=e?g(e):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}]),i}();function g(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:((0,n.assert)("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}var v=d;exports.default=v;
},{"./Object.js":"PhPh","./events/EventType.js":"C8cu","./asserts.js":"fLG6","./events.js":"UqnM"}],"X4ix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./events/Event.js")),e=c(require("./Object.js")),n=c(require("./events/EventType.js")),i=require("./geom/Polygon.js"),r=require("./proj.js"),o=require("./math.js");function c(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=s(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=O();return function(){var n,i=T(t);if(e){var r=T(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},C=function(e){p(r,t.default);var i=y(r);function r(t){var e;return h(this,r),(e=i.call(this,n.default.ERROR)).code=t.code,e.message=t.message,e}return f(r)}(),A=function(t){p(c,e.default);var n=y(c);function c(t){var e;return h(this,c),(e=n.call(this)).on,e.once,e.un,t=t||{},e.position_=null,e.transform_=r.identityTransform,e.watchId_=void 0,e.addChangeListener(_.PROJECTION,e.handleProjectionChanged_),e.addChangeListener(_.TRACKING,e.handleTrackingChanged_),void 0!==t.projection&&e.setProjection(t.projection),void 0!==t.trackingOptions&&e.setTrackingOptions(t.trackingOptions),e.setTracking(void 0!==t.tracking&&t.tracking),e}return f(c,[{key:"disposeInternal",value:function(){this.setTracking(!1),u(T(c.prototype),"disposeInternal",this).call(this)}},{key:"handleProjectionChanged_",value:function(){var t=this.getProjection();t&&(this.transform_=(0,r.getTransformFromProjections)((0,r.get)("EPSG:4326"),t),this.position_&&this.set(_.POSITION,this.transform_(this.position_)))}},{key:"handleTrackingChanged_",value:function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}},{key:"positionChange_",value:function(t){var e=t.coords;this.set(_.ACCURACY,e.accuracy),this.set(_.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(_.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(_.HEADING,null===e.heading?void 0:(0,o.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(_.POSITION,n),this.set(_.SPEED,null===e.speed?void 0:e.speed);var r=(0,i.circular)(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(_.ACCURACY_GEOMETRY,r),this.changed()}},{key:"positionError_",value:function(t){this.dispatchEvent(new C(t))}},{key:"getAccuracy",value:function(){return this.get(_.ACCURACY)}},{key:"getAccuracyGeometry",value:function(){return this.get(_.ACCURACY_GEOMETRY)||null}},{key:"getAltitude",value:function(){return this.get(_.ALTITUDE)}},{key:"getAltitudeAccuracy",value:function(){return this.get(_.ALTITUDE_ACCURACY)}},{key:"getHeading",value:function(){return this.get(_.HEADING)}},{key:"getPosition",value:function(){return this.get(_.POSITION)}},{key:"getProjection",value:function(){return this.get(_.PROJECTION)}},{key:"getSpeed",value:function(){return this.get(_.SPEED)}},{key:"getTracking",value:function(){return this.get(_.TRACKING)}},{key:"getTrackingOptions",value:function(){return this.get(_.TRACKING_OPTIONS)}},{key:"setProjection",value:function(t){this.set(_.PROJECTION,(0,r.get)(t))}},{key:"setTracking",value:function(t){this.set(_.TRACKING,t)}},{key:"setTrackingOptions",value:function(t){this.set(_.TRACKING_OPTIONS,t)}}]),c}(),I=A;exports.default=I;
},{"./events/Event.js":"fKNg","./Object.js":"PhPh","./events/EventType.js":"C8cu","./geom/Polygon.js":"Nwwk","./proj.js":"Diht","./math.js":"B96G"}],"AFcg":[function(require,module,exports) {
"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function o(r){e(this,o),r=r||{},this.color_=void 0!==r.color?r.color:null}return r(o,[{key:"clone",value:function(){var e=this.getColor();return new o({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(e){this.color_=e}}]),o}(),n=t;exports.default=n;
},{}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a,f){var o,s,v=(i-t)/l;if(1===v)o=t;else if(2===v)o=t,s=u;else if(0!==v){for(var c=n[t],p=n[t+1],h=0,d=[0],g=t+l;g<i;g+=l){var x=n[g],y=n[g+1];h+=Math.sqrt((x-c)*(x-c)+(y-p)*(y-p)),d.push(h),c=x,p=y}var M=u*h,j=(0,r.binarySearch)(d,M);j<0?(s=(M-d[-j-2])/(d[-j-1]-d[-j-2]),o=t+(-j-2)*l):o=t+j*l}f=f>1?f:2,a=a||new Array(f);for(var q=0;q<f;++q)a[q]=void 0===o?NaN:void 0===s?n[o+q]:(0,e.lerp)(n[o+q],n[o+l+q],s);return a}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,o=t/i;f<o;){var s=f+o>>1;l<r[(s+1)*i-1]?o=s:f=s+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var o=0,s=n.length;o<s;++o){var v=n[o];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),i=require("../extent.js"),n=require("./flat/deflate.js"),r=require("./flat/simplify.js"),o=require("../array.js"),s=require("./flat/segments.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/length.js");function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function C(t){var e=_();return function(){var i,n=j(t);if(e){var r=j(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(c){v(y,t.default);var h=C(y);function y(t,e){var i;return d(this,y),(i=h.call(this)).flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return p(y,[{key:"appendCoordinate",value:function(t){this.flatCoordinates?(0,o.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}},{key:"clone",value:function(){var t=new y(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,n,r,o){return o<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,r,o))}},{key:"forEachSegment",value:function(t){return(0,s.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return(0,f.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,r.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y(e,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),y}(),O=x;exports.default=O;
},{"./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","../array.js":"luEr","./flat/segments.js":"U8i0","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/length.js":"ZZrx"}],"TXDt":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function i(t){e(this,i),t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return t(i,[{key:"clone",value:function(){var e=this.getColor();return new i({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}]),i}(),s=n;exports.default=s;
},{}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=require("../size.js");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=function(){function i(t){a(this,i),this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,e.toSize)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return n(i,[{key:"clone",value:function(){var t=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return(0,t.abstract)()}},{key:"getImage",value:function(e){return(0,t.abstract)()}},{key:"getHitDetectionImage",value:function(){return(0,t.abstract)()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return(0,t.abstract)()}},{key:"getImageSize",value:function(){return(0,t.abstract)()}},{key:"getOrigin",value:function(){return(0,t.abstract)()}},{key:"getSize",value:function(){return(0,t.abstract)()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(t)}},{key:"listenImageChange",value:function(e){(0,t.abstract)()}},{key:"load",value:function(){(0,t.abstract)()}},{key:"unlistenImageChange",value:function(e){(0,t.abstract)()}}]),i}(),u=r;exports.default=u;
},{"../util.js":"KniQ","../size.js":"TAHd"}],"V5XN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"eucy"}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../ImageState.js")),e=o(require("./Image.js")),i=require("../color.js"),r=require("../colorlike.js"),n=require("../dom.js"),s=require("../render/canvas.js");function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=_();return function(){var i,r=p(t);if(e){var n=p(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return v(this,i)}}function v(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(o){h(u,e.default);var a=d(u);function u(t){var e;l(this,u);var i=void 0!==t.rotateWithView&&t.rotateWithView;return(e=a.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.size_=null,e.renderOptions_=null,e.render(),e}return c(u,[{key:"clone",value:function(){var t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"getAnchor",value:function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,r=(0,n.createCanvasContext2D)(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return t.default.LOADED}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,n=void 0===this.radius2_?r:this.radius2_;if(r<n){var s=r;r=n,n=s}var o=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/o,l=n*Math.sin(a),u=r-Math.sqrt(n*n-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=i)return h*e;var f=e/2/h,d=e/2*(u/c),v=Math.sqrt((r+f)*(r+f)+d*d)-r;if(void 0===this.radius2_||"bevel"===t)return 2*v;var y=r*Math.sin(a),_=n-Math.sqrt(r*r-y*y),p=Math.sqrt(y*y+_*_)/y;if(p<=i){var g=p*e/2-n-r;return 2*Math.max(v,g)}return 2*v}},{key:"createRenderOptions",value:function(){var t,e=s.defaultLineJoin,i=0,n=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=s.defaultStrokeStyle),t=(0,r.asColorLike)(t),void 0===(a=this.stroke_.getWidth())&&(a=s.defaultLineWidth),n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=s.defaultLineJoin),void 0===(i=this.stroke_.getMiterLimit())&&(i=s.defaultMiterLimit));var l=this.calculateLineJoinSize_(e,a,i),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*u+l),lineDash:n,lineDashOffset:o,lineJoin:e,miterLimit:i}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}},{key:"draw_",value:function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=s.defaultFillStyle),e.fillStyle=(0,r.asColorLike)(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=(0,i.asArray)(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var s=(0,n.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}},{key:"createPath_",value:function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var n=this.angle_-Math.PI/2,s=2*Math.PI/e,o=0;o<e;o++){var a=n+o*s,l=o%2==0?i:r;t.lineTo(l*Math.cos(a),l*Math.sin(a))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=s.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}]),u}(),k=g;exports.default=k;
},{"../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../colorlike.js":"V5XN","../dom.js":"Xno5","../render/canvas.js":"iAG7"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=f();return function(){var r,o=p(t);if(e){var n=p(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){u(n,t.default);var r=a(n);function n(t){return o(this,n),t=t||{radius:5},r.call(this,{points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}return i(n,[{key:"clone",value:function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}]),n}(),y=d;exports.default=y;
},{"./RegularShape.js":"il3X"}],"he4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultStyle=y,exports.createEditingStyle=d,exports.default=void 0,exports.toFunction=f;var e=i(require("./Circle.js")),t=i(require("./Fill.js")),n=i(require("./Stroke.js")),r=require("../asserts.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=function(){function e(t){u(this,e),t=t||{},this.geometry_=null,this.geometryFunction_=g,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return s(e,[{key:"clone",value:function(){var t=this.getGeometry();return t&&"object"===o(t)&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"setHitDetectionRenderer",value:function(e){this.hitDetectionRenderer_=e}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=g,this.geometry_=e}},{key:"setZIndex",value:function(e){this.zIndex_=e}}]),e}();function f(e){var t;if("function"==typeof e)t=e;else{var n;if(Array.isArray(e))n=e;else(0,r.assert)("function"==typeof e.getZIndex,41),n=[e];t=function(){return n}}return t}var a=null;function y(r,i){if(!a){var o=new t.default({color:"rgba(255,255,255,0.4)"}),u=new n.default({color:"#3399CC",width:1.25});a=[new c({image:new e.default({fill:o,stroke:u,radius:5}),fill:o,stroke:u})]}return a}function d(){var r={},i=[255,255,255,1],o=[0,153,255,1];return r.Polygon=[new c({fill:new t.default({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new c({stroke:new n.default({color:i,width:5})}),new c({stroke:new n.default({color:o,width:3})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new c({image:new e.default({radius:6,fill:new t.default({color:o}),stroke:new n.default({color:i,width:1.5})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function g(e){return e.getGeometry()}var h=c;exports.default=h;
},{"./Circle.js":"cdf1","./Fill.js":"AFcg","./Stroke.js":"TXDt","../asserts.js":"fLG6"}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=require("../size.js");function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var s="#333",a=function(){function i(o){n(this,i),o=o||{},this.font_=o.font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.scaleArray_=(0,e.toSize)(void 0!==o.scale?o.scale:1),this.text_=o.text,this.textAlign_=o.textAlign,this.justify_=o.justify,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new t.default({color:s}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:"point",this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}return l(i,[{key:"clone",value:function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}]),i}(),u=a;exports.default=u;
},{"./Fill.js":"AFcg","../size.js":"TAHd"}],"XGea":[function(require,module,exports) {
var define;
var t;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var m=n[r],c=e,p=a;for(i(n,e,r),h(n[a],m)>0&&i(n,e,a);c<p;){for(i(n,c,p),c++,p--;h(n[c],m)<0;)c++;for(;h(n[p],m)>0;)p--}0===h(n[e],m)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.get=I;var t=s(require("../events/Target.js")),e=s(require("../events/EventType.js")),i=s(require("../ImageState.js")),n=require("../color.js"),r=require("../dom.js"),a=require("./IconImageCache.js"),o=require("../Image.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=y();return function(){var i,n=p(t);if(e){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return m(this,i)}}function m(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=null,b=function(a){f(u,t.default);var s=g(u);function u(t,e,i,n,r,a){var o;return c(this,u),(o=s.call(this)).hitDetectionImage_=null,o.image_=t,o.crossOrigin_=n,o.canvas_={},o.color_=a,o.unlisten_=null,o.imageState_=r,o.size_=i,o.src_=e,o.tainted_,o}return h(u,[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){v||(v=(0,r.createCanvasContext2D)(1,1)),v.drawImage(this.image_,0,0);try{v.getImageData(0,0,1,1),this.tainted_=!1}catch(t){v=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"handleImageError_",value:function(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,r.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){if(this.imageState_===i.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,o.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===i.default.LOADED){var e=this.image_,r=document.createElement("canvas");r.width=Math.ceil(e.width*t),r.height=Math.ceil(e.height*t);var a=r.getContext("2d");a.scale(t,t),a.drawImage(e,0,0),a.globalCompositeOperation="multiply",a.fillStyle=(0,n.asString)(this.color_),a.fillRect(0,0,r.width/t,r.height/t),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),this.canvas_[t]=r}}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),u}();function I(t,e,i,n,r,o){var s=a.shared.get(e,n,o);return s||(s=new b(t,e,i,n,r,o),a.shared.set(e,n,o,s)),s}var O=b;exports.default=O;
},{"../events/Target.js":"CR4Y","../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../color.js":"eucy","../dom.js":"Xno5","./IconImageCache.js":"V0oB","../Image.js":"DHWK"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../events/EventType.js")),e=s(require("../ImageState.js")),i=s(require("./Image.js")),r=require("../color.js"),o=require("../asserts.js"),n=require("./IconImage.js"),c=require("../util.js");function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=y();return function(){var i,r=p(t);if(e){var o=p(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return v(this,i)}}function v(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(s){h(l,i.default);var a=_(l);function l(t){var i;u(this,l);var s=void 0!==(t=t||{}).opacity?t.opacity:1,f=void 0!==t.rotation?t.rotation:0,h=void 0!==t.scale?t.scale:1,g=void 0!==t.rotateWithView&&t.rotateWithView;(i=a.call(this,{opacity:s,rotation:f,scale:h,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:g,declutterMode:t.declutterMode})).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",i.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",i.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",i.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var _=void 0!==t.img?t.img:null;i.imgSize_=t.imgSize;var v=t.src;(0,o.assert)(!(void 0!==v&&_),4),(0,o.assert)(!_||_&&i.imgSize_,5),void 0!==v&&0!==v.length||!_||(v=_.src||(0,c.getUid)(_)),(0,o.assert)(void 0!==v&&v.length>0,6);var d=void 0!==t.src?e.default.IDLE:e.default.LOADED;return i.color_=void 0!==t.color?(0,r.asArray)(t.color):null,i.iconImage_=(0,n.get)(_,v,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,d,i.color_),i.offset_=void 0!==t.offset?t.offset:[0,0],i.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",i.origin_=null,i.size_=void 0!==t.size?t.size:null,i}return f(l,[{key:"clone",value:function(){var t=this.getScale();return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var i=this.getDisplacement(),r=this.getScaleArray();return[t[0]-i[0]/r[0],t[1]+i[1]/r[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"listenImageChange",value:function(e){this.iconImage_.addEventListener(t.default.CHANGE,e)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(e){this.iconImage_.removeEventListener(t.default.CHANGE,e)}}]),l}(),O=m;exports.default=O;
},{"../events/EventType.js":"C8cu","../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../asserts.js":"fLG6","./IconImage.js":"XCOy","../util.js":"KniQ"}],"iE24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toStyle=s;var e=c(require("../style/Circle.js")),t=c(require("./Fill.js")),i=c(require("./Icon.js")),r=c(require("./RegularShape.js")),o=c(require("./Stroke.js")),n=c(require("./Style.js")),a=c(require("./Text.js"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return new n.default({fill:l(e,""),stroke:u(e,""),text:d(e),image:f(e)})}function l(e,i){var r=e[i+"fill-color"];if(r)return new t.default({color:r})}function u(e,t){var i=e[t+"stroke-width"],r=e[t+"stroke-color"];if(i||r)return new o.default({width:i,color:r,lineCap:e[t+"stroke-line-cap"],lineJoin:e[t+"stroke-line-join"],lineDash:e[t+"stroke-line-dash"],lineDashOffset:e[t+"stroke-line-dash-offset"],miterLimit:e[t+"stroke-miter-limit"]})}function d(e){var t=e["text-value"];if(t)return new a.default({text:t,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:l(e,"text-"),backgroundFill:l(e,"text-background-"),stroke:u(e,"text-"),backgroundStroke:u(e,"text-background-")})}function f(t){var o=t["icon-src"],n=t["icon-img"];if(o||n)return new i.default({src:o,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});var a=t["shape-points"];if(a){return new r.default({points:a,fill:l(t,"shape-"),stroke:u(t,"shape-"),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}var c=t["circle-radius"];if(c){return new e.default({radius:c,fill:l(t,"circle-"),stroke:u(t,"circle-"),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}
},{"../style/Circle.js":"cdf1","./Fill.js":"AFcg","./Icon.js":"z2xv","./RegularShape.js":"il3X","./Stroke.js":"TXDt","./Style.js":"he4w","./Text.js":"RPsG"}],"pskK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Layer.js")),t=i(require("rbush")),r=u(require("../style/Style.js")),n=require("../style/flat.js");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _={RENDER_ORDER:"renderOrder"},R=function(o){p(i,e.default);var u=h(i);function i(e){var t;f(this,i),e=e||{};var r=Object.assign({},e);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(t=u.call(this,r)).declutter_=void 0!==e.declutter&&e.declutter,t.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,t.style_=null,t.styleFunction_=void 0,t.setStyle(e.style),t.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,t.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,t}return a(i,[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(e){return s(O(i.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(_.RENDER_ORDER)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(e){e.declutterTree||(e.declutterTree=new t.default(9)),this.getRenderer().renderDeclutter(e)}},{key:"setRenderOrder",value:function(e){this.set(_.RENDER_ORDER,e)}},{key:"setStyle",value:function(e){var t;if(void 0===e)t=r.createDefaultStyle;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof r.default)t=e;else if(Array.isArray(e)){for(var o=e.length,u=new Array(o),i=0;i<o;++i){var l=e[i];l instanceof r.default?u[i]=l:u[i]=(0,n.toStyle)(l)}t=u}else t=(0,n.toStyle)(e);this.style_=t,this.styleFunction_=null===e?void 0:(0,r.toFunction)(this.style_),this.changed()}}]),i}(),j=R;exports.default=j;
},{"./Layer.js":"GCgv","rbush":"XGea","../style/Style.js":"he4w","../style/flat.js":"iE24"}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strokeInstruction=exports.fillInstruction=exports.default=exports.closePathInstruction=exports.beginPathInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"LQER":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function n(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(){e(this,t)}return n(t,[{key:"drawCustom",value:function(e,t,n,u){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,t){}},{key:"drawFeature",value:function(e,t){}},{key:"drawGeometryCollection",value:function(e,t){}},{key:"drawLineString",value:function(e,t){}},{key:"drawMultiLineString",value:function(e,t){}},{key:"drawMultiPoint",value:function(e,t){}},{key:"drawMultiPolygon",value:function(e,t){}},{key:"drawPoint",value:function(e,t){}},{key:"drawPolygon",value:function(e,t){}},{key:"drawText",value:function(e,t){}},{key:"setFillStrokeStyle",value:function(e,t){}},{key:"setImageStyle",value:function(e,t){}},{key:"setTextStyle",value:function(e,t){}}]),t}(),o=u;exports.default=o;
},{}],"QBj4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./Instruction.js")),e=u(require("../../extent/Relationship.js")),i=u(require("../VectorContext.js")),n=require("../../colorlike.js"),r=require("../../extent.js"),o=require("../canvas.js"),s=require("../../array.js"),a=require("../../geom/flat/inflate.js");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var i,n=C(t);if(e){var r=C(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v(this,i)}}function v(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(u){d(f,i.default);var l=y(f);function f(t,e,i,n){var r;return c(this,f),(r=l.call(this)).tolerance=t,r.maxExtent=e,r.pixelRatio=n,r.maxLineWidth=0,r.resolution=i,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return h(f,[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates,s=o.length,a=0,u=t.length;a<u;a+=e)n[0]=t[a],n[1]=t[a+1],(0,r.containsCoordinate)(i,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}},{key:"appendFlatLineCoordinates",value:function(t,i,n,o,s,a){var u=this.coordinates,l=u.length,c=this.getBufferedMaxExtent();a&&(i+=o);var f,h,d,p=t[i],y=t[i+1],v=this.tmpCoordinate_,b=!0;for(f=i+o;f<n;f+=o)v[0]=t[f],v[1]=t[f+1],(d=(0,r.coordinateRelationship)(c,v))!==h?(b&&(u[l++]=p,u[l++]=y,b=!1),u[l++]=v[0],u[l++]=v[1]):d===e.default.INTERSECTING?(u[l++]=v[0],u[l++]=v[1],b=!1):b=!0,p=v[0],y=v[1],h=d;return(s&&b||f===i+o)&&(u[l++]=p,u[l++]=y),l}},{key:"drawCustomCoordinates_",value:function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e}},{key:"drawCustom",value:function(e,i,n,r){this.beginGeometry(e,i);var o,s,u,l,c,f=e.getType(),h=e.getStride(),d=this.coordinates.length;switch(f){case"MultiPolygon":o=e.getOrientedFlatCoordinates(),l=[];var p=e.getEndss();c=0;for(var y=0,v=p.length;y<v;++y){var b=[];c=this.drawCustomCoordinates_(o,c,p[y],h,b),l.push(b)}this.instructions.push([t.default.CUSTOM,d,l,e,n,a.inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,l,e,r||n,a.inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":u=[],o="Polygon"==f?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),c=this.drawCustomCoordinates_(o,0,e.getEnds(),h,u),this.instructions.push([t.default.CUSTOM,d,u,e,n,a.inflateCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,u,e,r||n,a.inflateCoordinatesArray]);break;case"LineString":case"Circle":o=e.getFlatCoordinates(),s=this.appendFlatLineCoordinates(o,0,o.length,h,!1,!1),this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]);break;case"MultiPoint":o=e.getFlatCoordinates(),(s=this.appendFlatPointCoordinates(o,h))>d&&(this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]));break;case"Point":o=e.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),s=this.coordinates.length,this.instructions.push([t.default.CUSTOM,d,s,e,n]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n])}this.endGeometry(i)}},{key:"beginGeometry",value:function(e,i){this.beginGeometryInstruction1_=[t.default.BEGIN_GEOMETRY,i,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[t.default.BEGIN_GEOMETRY,i,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,a=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==t.default.END_GEOMETRY?a=e:r==t.default.BEGIN_GEOMETRY&&(n[2]=e,(0,s.reverseSubArray)(this.hitDetectionInstructions,a,e),a=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=(0,n.asColorLike)(r||o.defaultFillStyle)}else i.fillStyle=void 0;if(e){var s=e.getColor();i.strokeStyle=(0,n.asColorLike)(s||o.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:o.defaultLineCap;var u=e.getLineDash();i.lineDash=u?u.slice():o.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||o.defaultLineDashOffset;var c=e.getLineJoin();i.lineJoin=void 0!==c?c:o.defaultLineJoin;var f=e.getWidth();i.lineWidth=void 0!==f?f:o.defaultLineWidth;var h=e.getMiterLimit();i.miterLimit=void 0!==h?h:o.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}},{key:"createFill",value:function(e){var i=e.fillStyle,n=[t.default.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(e){return[t.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}},{key:"updateStrokeStyle",value:function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,s.equals)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=u,t.currentMiterLimit=l)}},{key:"endGeometry",value:function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[t.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,r.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,r.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}]),f}(),S=m;exports.default=S;
},{"./Instruction.js":"kTJv","../../extent/Relationship.js":"bUAS","../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../extent.js":"QDir","../canvas.js":"iAG7","../../array.js":"luEr","../../geom/flat/inflate.js":"znXl"}],"JWDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Builder.js")),i=e(require("./Instruction.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,e){var o=a(t,i);if(o){var r=Object.getOwnPropertyDescriptor(o,i);return r.get?r.get.call(arguments.length<3?t:e):r.value}}).apply(this,arguments)}function a(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=g(t)););return t}function c(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&l(t,i)}function l(t,i){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function u(t){var i=f();return function(){var e,o=g(t);if(i){var r=g(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return _(this,e)}}function _(t,i){if(i&&("object"===o(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){c(n,t.default);var o=u(n);function n(t,i,e,h){var s;return r(this,n),(s=o.call(this,t,i,e,h)).hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterMode_=void 0,s.declutterImageWithText_=void 0,s}return h(n,[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,s(g(n.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,i){var e=t.getAnchor(),o=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}]),n}(),y=p;exports.default=y;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv"}],"ppsk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Builder.js")),e=o(require("./Instruction.js")),n=require("../canvas.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=i?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}return o.default=t,n&&n.set(t,o),o}function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(r){p(i,t.default);var o=y(i);function i(t,e,n,r){return u(this,i),o.call(this,t,e,n,r)}return c(i,[{key:"drawFlatCoordinates_",value:function(t,n,r,o){var i=this.coordinates.length,s=this.appendFlatLineCoordinates(t,n,r,o,!1,!1),u=[e.default.MOVE_TO_LINE_TO,i,s];return this.instructions.push(u),this.hitDetectionInstructions.push(u),r}},{key:"drawLineString",value:function(t,r){var o=this.state,i=o.strokeStyle,s=o.lineWidth;if(void 0!==i&&void 0!==s){this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(t,r),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,n.defaultLineDash,n.defaultLineDashOffset],e.beginPathInstruction);var u=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(u,0,u.length,a),this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(r)}}},{key:"drawMultiLineString",value:function(t,n){var r=this.state,o=r.strokeStyle,i=r.lineWidth;if(void 0!==o&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],e.beginPathInstruction);for(var s=t.getEnds(),u=t.getFlatCoordinates(),a=t.getStride(),c=0,l=0,f=s.length;l<f;++l)c=this.drawFlatCoordinates_(u,c,s[l],a);this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(n)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(e.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,l(O(i.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(e.strokeInstruction),t.lastStroke=this.coordinates.length),t.lastStroke=0,l(O(i.prototype),"applyStroke",this).call(this,t),this.instructions.push(e.beginPathInstruction)}}]),i}(),g=S;exports.default=g;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../canvas.js":"iAG7"}],"e19k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Builder.js")),e=o(require("./Instruction.js")),i=require("../canvas.js"),n=require("../../geom/flat/simplify.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=r(e);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=t[s]}return n.default=t,i&&i.set(t,n),n}function s(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=h(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=b();return function(){var i,n=g(t);if(e){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v(this,i)}}function v(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(r){p(s,t.default);var o=d(s);function s(t,e,i,n){return u(this,s),o.call(this,t,e,i,n)}return a(s,[{key:"drawFlatCoordinatess_",value:function(t,i,n,r){var o=this.state,s=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=n.length;this.instructions.push(e.beginPathInstruction),this.hitDetectionInstructions.push(e.beginPathInstruction);for(var c=0;c<u;++c){var a=n[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,i,a,r,!0,!l),p=[e.default.MOVE_TO_LINE_TO,f,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(e.closePathInstruction),this.hitDetectionInstructions.push(e.closePathInstruction)),i=a}return s&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),l&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),i}},{key:"drawCircle",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var a=[e.default.CIRCLE,c];this.instructions.push(e.beginPathInstruction,a),this.hitDetectionInstructions.push(e.beginPathInstruction,a),void 0!==r.fillStyle&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),void 0!==r.strokeStyle&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),this.endGeometry(n)}}},{key:"drawPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,l,c),this.endGeometry(n)}}},{key:"drawMultiPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),a=0,f=0,h=l.length;f<h;++f)a=this.drawFlatCoordinatess_(u,a,l[f],c);this.endGeometry(n)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=(0,n.snap)(e[i],t);return f(g(s.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}]),s}(),_=O;exports.default=_;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../canvas.js":"iAG7","../../geom/flat/simplify.js":"IEpt"}],"hCfl":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"DEzw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=s(require("./Builder.js")),e=s(require("./Instruction.js")),i=require("../../colorlike.js"),n=require("../canvas.js"),r=require("../../util.js"),l=require("../../extent.js"),o=require("../../geom/flat/straightchunk.js");function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=d(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=_();return function(){var i,n=v(t);if(e){var r=v(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return x(this,i)}}function x(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=k;var b=function(s){g(u,t.default);var a=p(u);function u(t,e,i,n){var r;return f(this,u),(r=a.call(this,t,e,i,n)).labels_=null,r.text_="",r.textOffsetX_=0,r.textOffsetY_=0,r.textRotateWithView_=void 0,r.textRotation_=0,r.textFillState_=null,r.fillStates={},r.textStrokeState_=null,r.strokeStates={},r.textState_={},r.textStates={},r.textKey_="",r.fillKey_="",r.strokeKey_="",r.declutterImageWithText_=void 0,r}return h(u,[{key:"finish",value:function(){var t=c(v(u.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,i){var r=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(""!==this.text_&&a&&(r||s)){var f=this.coordinates,u=f.length,h=t.getType(),c=null,d=t.getStride();if("line"!==a.placement||"LineString"!=h&&"MultiLineString"!=h&&"Polygon"!=h&&"MultiPolygon"!=h){var g=a.overflow?null:[];switch(h){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),d=2;break;case"Polygon":c=t.getFlatInteriorPoint(),a.overflow||g.push(c[2]/this.resolution),d=3;break;case"MultiPolygon":var y=t.getFlatInteriorPoints();c=[];for(var p=0,x=y.length;p<x;p+=3)a.overflow||g.push(y[p+2]/this.resolution),c.push(y[p],y[p+1]);if(0===c.length)return;d=2}var S=this.appendFlatPointCoordinates(c,d);if(S===u)return;if(g&&(S-u)/2!=c.length/d){var _=u/2;g=g.filter(function(t,e){var i=f[2*(_+e)]===c[e*d]&&f[2*(_+e)+1]===c[e*d+1];return i||--_,i})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var v=a.padding;if(v!=n.defaultPadding&&(a.scale[0]<0||a.scale[1]<0)){var k=a.padding[0],b=a.padding[1],m=a.padding[2],O=a.padding[3];a.scale[0]<0&&(b=-b,O=-O),a.scale[1]<0&&(k=-k,m=-m),v=[k,b,m,O]}var w=this.pixelRatio;this.instructions.push([e.default.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,v==n.defaultPadding?n.defaultPadding:v.map(function(t){return t*w}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);var F=1/w;this.hitDetectionInstructions.push([e.default.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[F,F],NaN,void 0,this.declutterImageWithText_,v,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(i)}else{if(!(0,l.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var P;if(c=t.getFlatCoordinates(),"LineString"==h)P=[c.length];else if("MultiLineString"==h)P=t.getEnds();else if("Polygon"==h)P=t.getEnds().slice(0,1);else if("MultiPolygon"==h){var R=t.getEndss();P=[];for(var j=0,L=R.length;j<L;++j)P.push(R[j][0])}this.beginGeometry(t,i);for(var A,T=a.textAlign,D=0,C=0,W=P.length;C<W;++C){if(null==T){var K=(0,o.matchingChunk)(a.maxAngle,c,D,P[C],d);D=K[0],A=K[1]}else A=P[C];for(var M=D;M<A;M+=d)f.push(c[M],c[M+1]);var N=f.length;D=P[C],this.drawChars_(u,N),u=N}this.endGeometry(i)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||n.defaultTextAlign,justify:e.justify,textBaseline:e.textBaseline||n.defaultTextBaseline,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}},{key:"drawChars_",value:function(t,i){var n=this.textStrokeState_,r=this.textState_,l=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,f=k[r.textBaseline],u=this.textOffsetY_*a,h=this.text_,c=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([e.default.DRAW_CHARS,t,i,f,r.overflow,s,r.maxAngle,a,u,l,c*a,h,o,1]),this.hitDetectionInstructions.push([e.default.DRAW_CHARS,t,i,f,r.overflow,s,r.maxAngle,1,u,l,c,h,o,1/a])}},{key:"setTextStyle",value:function(t,e){var l,o,s;if(t){var a=t.getFill();a?((o=this.textFillState_)||(o={},this.textFillState_=o),o.fillStyle=(0,i.asColorLike)(a.getColor()||n.defaultFillStyle)):(o=null,this.textFillState_=o);var f=t.getStroke();if(f){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var u=f.getLineDash(),h=f.getLineDashOffset(),c=f.getWidth(),d=f.getMiterLimit();s.lineCap=f.getLineCap()||n.defaultLineCap,s.lineDash=u?u.slice():n.defaultLineDash,s.lineDashOffset=void 0===h?n.defaultLineDashOffset:h,s.lineJoin=f.getLineJoin()||n.defaultLineJoin,s.lineWidth=void 0===c?n.defaultLineWidth:c,s.miterLimit=void 0===d?n.defaultMiterLimit:d,s.strokeStyle=(0,i.asColorLike)(f.getColor()||n.defaultStrokeStyle)}else s=null,this.textStrokeState_=s;l=this.textState_;var g=t.getFont()||n.defaultFont;(0,n.registerFont)(g);var y=t.getScaleArray();l.overflow=t.getOverflow(),l.font=g,l.maxAngle=t.getMaxAngle(),l.placement=t.getPlacement(),l.textAlign=t.getTextAlign(),l.justify=t.getJustify(),l.textBaseline=t.getTextBaseline()||n.defaultTextBaseline,l.backgroundFill=t.getBackgroundFill(),l.backgroundStroke=t.getBackgroundStroke(),l.padding=t.getPadding()||n.defaultPadding,l.scale=void 0===y?[1,1]:y;var p=t.getOffsetX(),x=t.getOffsetY(),S=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===x?0:x,this.textRotateWithView_=void 0!==S&&S,this.textRotation_=void 0===_?0:_,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,r.getUid)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.justify||"?")+(l.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+(0,r.getUid)(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}]),u}(),m=b;exports.default=m;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../../colorlike.js":"V5XN","../canvas.js":"iAG7","../../util.js":"KniQ","../../extent.js":"QDir","../../geom/flat/straightchunk.js":"hCfl"}],"vqHd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Builder.js")),t=u(require("./ImageBuilder.js")),r=u(require("./LineStringBuilder.js")),i=u(require("./PolygonBuilder.js")),n=u(require("./TextBuilder.js"));function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var s={Circle:i.default,Default:e.default,Image:t.default,LineString:r.default,Polygon:i.default,Text:n.default},d=function(){function e(t,r,i,n){o(this,e),this.tolerance_=t,this.maxExtent_=r,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return l(e,[{key:"finish",value:function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var n=r[i].finish();e[t][i]=n}}return e}},{key:"getBuilder",value:function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var n=i[t];void 0===n&&(n=new(0,s[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=n);return n}}]),e}(),f=d;exports.default=f;
},{"./Builder.js":"QBj4","./ImageBuilder.js":"JWDt","./LineStringBuilder.js":"ppsk","./PolygonBuilder.js":"e19k","./TextBuilder.js":"DEzw"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../events/EventType.js")),t=o(require("../ImageState.js")),r=o(require("../Observable.js")),n=require("../util.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=h();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(o){s(i,r.default);var u=y(i);function i(e){var t;return a(this,i),(t=u.call(this)).ready=!0,t.boundHandleImageChange_=t.handleImageChange_.bind(b(t)),t.layer_=e,t.declutterExecutorGroup=null,t}return l(i,[{key:"getFeatures",value:function(e){return(0,n.abstract)()}},{key:"getData",value:function(e){return null}},{key:"prepareFrame",value:function(e){return(0,n.abstract)()}},{key:"renderFrame",value:function(e,t){return(0,n.abstract)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(e,t,r){return function(n,o){var u=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,o,u)}.bind(this)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(r){var n=r.getState();return n!=t.default.LOADED&&n!=t.default.ERROR&&r.addEventListener(e.default.CHANGE,this.boundHandleImageChange_),n==t.default.IDLE&&(r.load(),n=r.getState()),n==t.default.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,c(v(i.prototype),"disposeInternal",this).call(this)}}]),i}(),O=g;exports.default=O;
},{"../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../Observable.js":"IdSm","../util.js":"KniQ"}],"vPfl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.canvasPool=void 0;var e=c(require("../Layer.js")),t=c(require("../../render/Event.js")),r=c(require("../../render/EventType.js")),n=require("../../transform.js"),o=require("../../color.js"),a=require("../../dom.js"),i=require("../../array.js"),u=require("../../extent.js");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=R();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=[];exports.canvasPool=x;var P=null;function j(){var e=document.createElement("canvas");e.width=1,e.height=1,P=e.getContext("2d")}var O=function(c){h(f,e.default);var l=m(f);function f(e){var t;return s(this,f),(t=l.call(this,e)).container=null,t.renderedResolution,t.tempTransform=(0,n.create)(),t.pixelTransform=(0,n.create)(),t.inversePixelTransform=(0,n.create)(),t.context=null,t.containerReused=!1,t.pixelContext_=null,t.frameState=null,t}return p(f,[{key:"getImageData",value:function(e,t,r){var n;P||j(),P.clearRect(0,0,1,1);try{P.drawImage(e,t,r,1,1,0,0,1,1),n=P.getImageData(0,0,1,1).data}catch(o){return P=null,null}return n}},{key:"getBackground",value:function(e){var t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}},{key:"useContainer",value:function(e,t,r){var n,u,c=this.getLayer().getClassName();if(e&&e.className===c&&(!r||e&&e.style.backgroundColor&&(0,i.equals)((0,o.asArray)(e.style.backgroundColor),(0,o.asArray)(r)))){var l=e.firstElementChild;l instanceof HTMLCanvasElement&&(u=l.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=c;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var f=(u=(0,a.createCanvasContext2D)()).canvas;n.appendChild(f),(s=f.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=u}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(e,t,r){var o=(0,u.getTopLeft)(r),a=(0,u.getTopRight)(r),i=(0,u.getBottomRight)(r),c=(0,u.getBottomLeft)(r);(0,n.apply)(t.coordinateToPixelTransform,o),(0,n.apply)(t.coordinateToPixelTransform,a),(0,n.apply)(t.coordinateToPixelTransform,i),(0,n.apply)(t.coordinateToPixelTransform,c);var l=this.inversePixelTransform;(0,n.apply)(l,o),(0,n.apply)(l,a),(0,n.apply)(l,i),(0,n.apply)(l,c),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}},{key:"dispatchRenderEvent_",value:function(e,r,n){var o=this.getLayer();if(o.hasListener(e)){var a=new t.default(e,this.inversePixelTransform,n,r);o.dispatchEvent(a)}}},{key:"preRender",value:function(e,t){this.frameState=t,this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}},{key:"getRenderTransform",value:function(e,t,r,o,a,i,u){var c=a/2,l=i/2,s=o/t,f=-s,p=-e[0]+u,d=-e[1];return(0,n.compose)(this.tempTransform,c,l,s,f,-r,p,d)}},{key:"disposeInternal",value:function(){delete this.frameState,d(T(f.prototype),"disposeInternal",this).call(this)}}]),f}(),w=O;exports.default=w;
},{"../Layer.js":"fpOz","../../render/Event.js":"EB6P","../../render/EventType.js":"z39m","../../transform.js":"P4eA","../../color.js":"eucy","../../dom.js":"Xno5","../../array.js":"luEr","../../extent.js":"QDir"}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=e;var r=require("../../math.js"),a=require("./transform.js");function e(e,t,n,i,s,v,l,u,f,o,p,h){var M=e[t],b=e[t+1],c=0,d=0,g=0,j=0;function q(){c=M,d=b,M=e[t+=i],b=e[t+1],j+=g,g=Math.sqrt((M-c)*(M-c)+(b-d)*(b-d))}do{q()}while(t<n-i&&j+g<v);for(var x=0===g?0:(v-j)/g,P=(0,r.lerp)(c,M,x),m=(0,r.lerp)(d,b,x),w=t-i,O=j,_=v+u*f(o,s,p);t<n-i&&j+g<_;)q();x=0===g?0:(_-j)/g;var k,y=(0,r.lerp)(c,M,x),I=(0,r.lerp)(d,b,x);if(h){var T=[P,m,y,I];(0,a.rotate)(T,0,4,2,h,T,T),k=T[0]>T[2]}else k=P>y;var z,A=Math.PI,B=[],C=w+i===t;if(g=0,j=O,M=e[t=w],b=e[t+1],C){q(),z=Math.atan2(b-d,M-c),k&&(z+=z>0?-A:A);var D=(y+P)/2,E=(I+m)/2;return B[0]=[D,E,(_-v)/2,z,s],B}for(var F=0,G=(s=s.replace(/\n/g," ")).length;F<G;){q();var H=Math.atan2(b-d,M-c);if(k&&(H+=H>0?-A:A),void 0!==z){var J=H-z;if(J+=J>A?-2*A:J<-A?2*A:0,Math.abs(J)>l)return null}z=H;for(var K=F,L=0;F<G;++F){var N=u*f(o,s[k?G-F-1:F],p);if(t+i<n&&j+g<v+L+N/2)break;L+=N}if(F!==K){var Q=k?s.substring(G-K,G-F):s.substring(K,F);x=0===g?0:(v+L/2-j)/g;var R=(0,r.lerp)(c,M,x),S=(0,r.lerp)(d,b,x);B.push([R,S,L/2,H,Q]),v+=L}}return B}
},{"../../math.js":"B96G","./transform.js":"LGwr"}],"pZKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./Instruction.js")),t=require("./TextBuilder.js"),i=require("../../transform.js"),a=require("../../extent.js"),r=require("../canvas.js"),s=require("../../geom/flat/textpath.js"),l=require("../../array.js"),n=require("../../geom/flat/length.js"),o=require("../../geom/flat/transform.js");function h(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var f=(0,a.createEmpty)(),p=[],v=[],g=[],m=[];function _(e){return e[3].declutterBox}var x=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function y(e,i){return"start"!==i&&"end"!==i||x.test(e)||(i="start"===i?"left":"right"),t.TEXT_ALIGN[i]}function b(e,t,i){return i>0&&e.push("\n",""),e.push(t,""),e}var T=function(){function h(e,t,a,r){u(this,h),this.overlaps=a,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,i.create)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return c(h,[{key:"createLabel",value:function(e,i,a,s){var l=e+i+a+s;if(this.labels_[l])return this.labels_[l];var n=s?this.strokeStates[s]:null,o=a?this.fillStates[a]:null,h=this.textStates[i],u=this.pixelRatio,d=[h.scale[0]*u,h.scale[1]*u],c=Array.isArray(e),f=h.justify?t.TEXT_ALIGN[h.justify]:y(Array.isArray(e)?e[0]:e,h.textAlign||r.defaultTextAlign),p=s&&n.lineWidth?n.lineWidth:0,v=c?e:e.split("\n").reduce(b,[]),g=(0,r.getTextDimensions)(h,v),m=g.width,_=g.height,x=g.widths,T=g.heights,k=g.lineWidths,S=m+p,w=[],C=(S+2)*d[0],I=(_+p)*d[1],L={width:C<0?Math.floor(C):Math.ceil(C),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:w};1==d[0]&&1==d[1]||w.push("scale",d),s&&(w.push("strokeStyle",n.strokeStyle),w.push("lineWidth",p),w.push("lineCap",n.lineCap),w.push("lineJoin",n.lineJoin),w.push("miterLimit",n.miterLimit),w.push("setLineDash",[n.lineDash]),w.push("lineDashOffset",n.lineDashOffset)),a&&w.push("fillStyle",o.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var M,A=.5-f,O=f*S+A*p,E=[],R=[],D=0,P=0,B=0,W=0,j=0,X=v.length;j<X;j+=2){var Y=v[j];if("\n"!==Y){var N=v[j+1]||h.font;N!==M&&(s&&E.push("font",N),a&&R.push("font",N),M=N),D=Math.max(D,T[B]);var q=[Y,O+A*x[B]+f*(x[B]-k[W]),.5*(p+D)+P];O+=x[B],s&&E.push("strokeText",q),a&&R.push("fillText",q),++B}else P+=D,D=0,O=f*S+A*p,++W}return Array.prototype.push.apply(w,E),Array.prototype.push.apply(w,R),this.labels_[l]=L,L}},{key:"replayTextBackground_",value:function(e,t,i,a,r,s,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,a),e.lineTo.apply(e,r),e.lineTo.apply(e,t),s&&(this.alignFill_=s[2],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(e,t,r,s,l,n,o,h,u,d,c,_,x,y,b,T){var k,S=r-(o*=_[0]),w=s-(h*=_[1]),C=l+u>e?e-u:l,I=n+d>t?t-d:n,L=y[3]+C*_[0]+y[1],M=y[0]+I*_[1]+y[2],A=S-y[3],O=w-y[0];return(b||0!==c)&&(p[0]=A,m[0]=A,p[1]=O,v[1]=O,v[0]=A+L,g[0]=v[0],g[1]=O+M,m[1]=g[1]),0!==c?(k=(0,i.compose)((0,i.create)(),r,s,1,1,c,-r,-s),(0,i.apply)(k,p),(0,i.apply)(k,v),(0,i.apply)(k,g),(0,i.apply)(k,m),(0,a.createOrUpdate)(Math.min(p[0],v[0],g[0],m[0]),Math.min(p[1],v[1],g[1],m[1]),Math.max(p[0],v[0],g[0],m[0]),Math.max(p[1],v[1],g[1],m[1]),f)):(0,a.createOrUpdate)(Math.min(A,A+L),Math.min(O,O+M),Math.max(A,A+L),Math.max(O,O+M),f),x&&(S=Math.round(S),w=Math.round(w)),{drawImageX:S,drawImageY:w,drawImageW:C,drawImageH:I,originX:u,originY:d,declutterBox:{minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:T},canvasTransform:k,scale:_}}},{key:"replayImageOrLabel_",value:function(e,t,i,a,s,l,n){var o=!(!l&&!n),h=a.declutterBox,u=e.canvas,d=n?n[2]*a.scale[0]/2:0;return h.minX-d<=u.width/t&&h.maxX+d>=0&&h.minY-d<=u.height/t&&h.maxY+d>=0&&(o&&this.replayTextBackground_(e,p,v,g,m,l,n),(0,r.drawImageOrLabel)(e,a.canvasTransform,s,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0}},{key:"fill_",value:function(e){if(this.alignFill_){var t=(0,i.apply)(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;e.save(),e.translate(t[0]%a,t[1]%a),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}},{key:"setStrokeStyle_",value:function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}},{key:"drawLabelWithPointPlacement_",value:function(e,i,a,s){var l=this.textStates[i],n=this.createLabel(e,i,s,a),o=this.strokeStates[a],h=this.pixelRatio,u=y(Array.isArray(e)?e[0]:e,l.textAlign||r.defaultTextAlign),d=t.TEXT_ALIGN[l.textBaseline||r.defaultTextBaseline],c=o&&o.lineWidth?o.lineWidth:0;return{label:n,anchorX:u*(n.width/h-2*l.scale[0])+2*(.5-u)*c,anchorY:d*n.height/h+2*(.5-d)*c}}},{key:"execute_",value:function(h,u,d,c,f,p,v,g){var m;this.pixelCoordinates_&&(0,l.equals)(d,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,o.transform2D)(this.coordinates,0,this.coordinates.length,2,d,this.pixelCoordinates_),(0,i.setFromArray)(this.renderedTransform_,d));for(var x,y,b,T,k,S,w,C,I,L,M,A,O,E,R,D,P=0,B=c.length,W=0,j=0,X=0,Y=null,N=null,q=this.coordinateCache_,G=this.viewRotation_,F=Math.round(1e12*Math.atan2(-d[1],d[0]))/1e12,H={context:h,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},J=this.instructions!=c||this.overlaps?0:200;P<B;){var U=c[P];switch(U[0]){case e.default.BEGIN_GEOMETRY:O=U[1],D=U[3],O.getGeometry()?void 0===v||(0,a.intersects)(v,D.getExtent())?++P:P=U[2]+1:P=U[2];break;case e.default.BEGIN_PATH:j>J&&(this.fill_(h),j=0),X>J&&(h.stroke(),X=0),j||X||(h.beginPath(),T=NaN,k=NaN),++P;break;case e.default.CIRCLE:var K=m[W=U[1]],V=m[W+1],z=m[W+2]-K,Q=m[W+3]-V,Z=Math.sqrt(z*z+Q*Q);h.moveTo(K+Z,V),h.arc(K,V,Z,0,2*Math.PI,!0),++P;break;case e.default.CLOSE_PATH:h.closePath(),++P;break;case e.default.CUSTOM:W=U[1],x=U[2];var $=U[3],ee=U[4],te=6==U.length?U[5]:void 0;H.geometry=$,H.feature=O,P in q||(q[P]=[]);var ie=q[P];te?te(m,W,x,2,ie):(ie[0]=m[W],ie[1]=m[W+1],ie.length=2),ee(ie,H),++P;break;case e.default.DRAW_IMAGE:W=U[1],x=U[2],C=U[3],y=U[4],b=U[5];var ae=U[6],re=U[7],se=U[8],le=U[9],ne=U[10],oe=U[11],he=U[12],ue=U[13],de=U[14],ce=U[15];if(!C&&U.length>=20){I=U[19],L=U[20],M=U[21],A=U[22];var fe=this.drawLabelWithPointPlacement_(I,L,M,A);C=fe.label,U[3]=C;var pe=U[23];y=(fe.anchorX-pe)*this.pixelRatio,U[4]=y;var ve=U[24];b=(fe.anchorY-ve)*this.pixelRatio,U[5]=b,ae=C.height,U[6]=ae,ue=C.width,U[13]=ue}var ge=void 0;U.length>25&&(ge=U[25]);var me=void 0,_e=void 0,xe=void 0;U.length>17?(me=U[16],_e=U[17],xe=U[18]):(me=r.defaultPadding,_e=!1,xe=!1),ne&&F?oe+=G:ne||F||(oe-=G);for(var ye=0;W<x;W+=2)if(!(ge&&ge[ye++]<ue/this.pixelRatio)){var be=this.calculateImageOrLabelDimensions_(C.width,C.height,m[W],m[W+1],ue,ae,y,b,se,le,oe,he,f,me,_e||xe,O),Te=[h,u,C,be,re,_e?Y:null,xe?N:null];if(g){if("none"===de)continue;if("obstacle"===de){g.insert(be.declutterBox);continue}var ke=void 0,Se=void 0;if(ce){var we=x-W;if(!ce[we]){ce[we]=Te;continue}if(ke=ce[we],delete ce[we],Se=_(ke),g.collides(Se))continue}if(g.collides(be.declutterBox))continue;ke&&(g.insert(Se),this.replayImageOrLabel_.apply(this,ke)),g.insert(be.declutterBox)}this.replayImageOrLabel_.apply(this,Te)}++P;break;case e.default.DRAW_CHARS:var Ce=U[1],Ie=U[2],Le=U[3],Me=U[4];A=U[5];var Ae=U[6],Oe=U[7],Ee=U[8];M=U[9];var Re=U[10];I=U[11],L=U[12];var De=[U[13],U[13]],Pe=this.textStates[L],Be=Pe.font,We=[Pe.scale[0]*Oe,Pe.scale[1]*Oe],je=void 0;Be in this.widths_?je=this.widths_[Be]:(je={},this.widths_[Be]=je);var Xe=(0,n.lineStringLength)(m,Ce,Ie,2),Ye=Math.abs(We[0])*(0,r.measureAndCacheTextWidth)(Be,I,je);if(Me||Ye<=Xe){var Ne=this.textStates[L].textAlign,qe=(Xe-Ye)*t.TEXT_ALIGN[Ne],Ge=(0,s.drawTextOnPath)(m,Ce,Ie,2,I,qe,Ae,Math.abs(We[0]),r.measureAndCacheTextWidth,Be,je,F?0:this.viewRotation_);e:if(Ge){var Fe=[],He=void 0,Je=void 0,Ue=void 0,Ke=void 0,Ve=void 0;if(M)for(He=0,Je=Ge.length;He<Je;++He){Ue=(Ve=Ge[He])[4],Ke=this.createLabel(Ue,L,"",M),y=Ve[2]+(We[0]<0?-Re:Re),b=Le*Ke.height+2*(.5-Le)*Re*We[1]/We[0]-Ee;var ze=this.calculateImageOrLabelDimensions_(Ke.width,Ke.height,Ve[0],Ve[1],Ke.width,Ke.height,y,b,0,0,Ve[3],De,!1,r.defaultPadding,!1,O);if(g&&g.collides(ze.declutterBox))break e;Fe.push([h,u,Ke,ze,1,null,null])}if(A)for(He=0,Je=Ge.length;He<Je;++He){Ue=(Ve=Ge[He])[4],Ke=this.createLabel(Ue,L,A,""),y=Ve[2],b=Le*Ke.height-Ee;var Qe=this.calculateImageOrLabelDimensions_(Ke.width,Ke.height,Ve[0],Ve[1],Ke.width,Ke.height,y,b,0,0,Ve[3],De,!1,r.defaultPadding,!1,O);if(g&&g.collides(Qe.declutterBox))break e;Fe.push([h,u,Ke,Qe,1,null,null])}g&&g.load(Fe.map(_));for(var Ze=0,$e=Fe.length;Ze<$e;++Ze)this.replayImageOrLabel_.apply(this,Fe[Ze])}}++P;break;case e.default.END_GEOMETRY:if(void 0!==p){var et=p(O=U[1],D);if(et)return et}++P;break;case e.default.FILL:J?j++:this.fill_(h),++P;break;case e.default.MOVE_TO_LINE_TO:for(W=U[1],x=U[2],E=m[W],w=(R=m[W+1])+.5|0,(S=E+.5|0)===T&&w===k||(h.moveTo(E,R),T=S,k=w),W+=2;W<x;W+=2)S=(E=m[W])+.5|0,w=(R=m[W+1])+.5|0,W!=x-2&&S===T&&w===k||(h.lineTo(E,R),T=S,k=w);++P;break;case e.default.SET_FILL_STYLE:Y=U,this.alignFill_=U[2],j&&(this.fill_(h),j=0,X&&(h.stroke(),X=0)),h.fillStyle=U[1],++P;break;case e.default.SET_STROKE_STYLE:N=U,X&&(h.stroke(),X=0),this.setStrokeStyle_(h,U),++P;break;case e.default.STROKE:J?X++:h.stroke(),++P;break;default:++P}}j&&this.fill_(h),X&&h.stroke()}},{key:"execute",value:function(e,t,i,a,r,s){this.viewRotation_=a,this.execute_(e,t,i,this.instructions,r,void 0,void 0,s)}},{key:"executeHitDetection",value:function(e,t,i,a,r){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,a,r)}}]),h}(),k=T;exports.default=k;
},{"./Instruction.js":"kTJv","./TextBuilder.js":"DEzw","../../transform.js":"P4eA","../../extent.js":"QDir","../canvas.js":"iAG7","../../geom/flat/textpath.js":"JxN9","../../array.js":"luEr","../../geom/flat/length.js":"ZZrx","../../geom/flat/transform.js":"LGwr"}],"ngEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getPixelIndexArray=g;var e=u(require("./Executor.js")),t=require("../../extent.js"),r=require("../../transform.js"),n=require("../../dom.js"),o=require("../../obj.js"),i=require("../../array.js"),a=require("../../geom/flat/transform.js");function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return h(e)||l(e)||f(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function l(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=["Polygon","Circle","LineString","Image","Text","Default"],m=function(){function u(e,t,n,o,i,a){x(this,u),this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,r.create)(),this.createExecutors_(i)}return y(u,[{key:"clip",value:function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}},{key:"createExecutors_",value:function(t){for(var r in t){var n=this.executorsByZIndex_[r];void 0===n&&(n={},this.executorsByZIndex_[r]=n);var o=t[r];for(var i in o){var a=o[i];n[i]=new e.default(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,o=e.length;n<o;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(e,o,a,u,s,c){var f=2*(u=Math.round(u))+1,l=(0,r.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/o,-1/o,-a,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,n.createCanvasContext2D)(f,f));var v,x=this.hitDetectionContext_;x.canvas.width!==f||x.canvas.height!==f?(x.canvas.width=f,x.canvas.height=f):h||x.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(v=(0,t.createEmpty)(),(0,t.extendCoordinate)(v,e),(0,t.buffer)(v,o*(this.renderBuffer_+u),v));var d,y=g(u);function m(e,t){for(var r=x.getImageData(0,0,f,f).data,n=0,o=y.length;n<o;n++)if(r[y[n]]>0){if(!c||"Image"!==d&&"Text"!==d||c.includes(e)){var i=(y[n]-3)/4,a=u-i%f,l=u-(i/f|0),h=s(e,t,a*a+l*l);if(h)return h}x.clearRect(0,0,f,f);break}}var _,b,C,I,j,E=Object.keys(this.executorsByZIndex_).map(Number);for(E.sort(i.numberSafeCompareFunction),_=E.length-1;_>=0;--_){var B=E[_].toString();for(C=this.executorsByZIndex_[B],b=p.length-1;b>=0;--b)if(void 0!==(I=C[d=p[b]])&&(j=I.executeHitDetection(x,l,a,m,v)))return j}}},{key:"getClipCoords",value:function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],n=t[1],o=t[2],i=t[3],u=[r,n,r,i,o,i,o,n];return(0,a.transform2D)(u,0,8,2,e,u),u}},{key:"isEmpty",value:function(){return(0,o.isEmpty)(this.executorsByZIndex_)}},{key:"execute",value:function(e,t,r,n,o,a,u){var s,c,f,l,h,v,x=Object.keys(this.executorsByZIndex_).map(Number);for(x.sort(i.numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,r)),a=a||p,u&&x.reverse(),s=0,c=x.length;s<c;++s){var d=x[s].toString();for(h=this.executorsByZIndex_[d],f=0,l=a.length;f<l;++f){void 0!==(v=h[a[f]])&&v.execute(e,t,r,n,o,u)}}this.maxExtent_&&e.restore()}}]),u}(),_={};function g(e){if(void 0!==_[e])return _[e];for(var t=2*e+1,r=e*e,n=new Array(r+1),o=0;o<=e;++o)for(var i=0;i<=e;++i){var a=o*o+i*i;if(a>r)break;var u=n[a];u||(u=[],n[a]=u),u.push(4*((e+o)*t+(e+i))+3),o>0&&u.push(4*((e-o)*t+(e+i))+3),i>0&&(u.push(4*((e+o)*t+(e-i))+3),o>0&&u.push(4*((e-o)*t+(e-i))+3))}for(var c=[],f=0,l=n.length;f<l;++f)n[f]&&c.push.apply(c,s(n[f]));return _[e]=c,c}var b=m;exports.default=b;
},{"./Executor.js":"pZKE","../../extent.js":"QDir","../../transform.js":"P4eA","../../dom.js":"Xno5","../../obj.js":"mH6q","../../array.js":"luEr","../../geom/flat/transform.js":"LGwr"}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../VectorContext.js")),e=require("../../colorlike.js"),i=require("../../transform.js"),a=require("../canvas.js"),s=require("../../array.js"),n=require("../../extent.js"),r=require("../../geom/flat/transform.js"),o=require("../../geom/SimpleGeometry.js");function l(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function u(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=d();return function(){var i,a=y(t);if(e){var s=y(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return S(this,i)}}function S(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(l){g(_,t.default);var h=x(_);function _(t,e,a,s,n,r,o){var l;return f(this,_),(l=h.call(this)).context_=t,l.pixelRatio_=e,l.extent_=a,l.transform_=s,l.viewRotation_=n,l.squaredTolerance_=r,l.userTransform_=o,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=(0,i.create)(),l}return u(_,[{key:"drawImages_",value:function(t,e,a,s){if(this.image_){var n=(0,r.transform2D)(t,e,a,s,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,h=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;this.imageRotateWithView_&&(f+=this.viewRotation_);for(var _=0,u=n.length;_<u;_+=2){var g=n[_]-this.imageAnchorX_,c=n[_+1]-this.imageAnchorY_;if(0!==f||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var x=g+this.imageAnchorX_,S=c+this.imageAnchorY_;(0,i.compose)(l,x,S,1,1,f,-x,-S),o.setTransform.apply(o,l),o.translate(x,S),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,c,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=h)}}},{key:"drawText_",value:function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=(0,r.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),n=this.context_,o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=a){var l=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(n.translate(l-this.textOffsetX_,h-this.textOffsetY_),n.rotate(o),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,l,h),this.textFillState_&&n.fillText(this.text_,l,h))}}}},{key:"moveToLineTo_",value:function(t,e,i,a,s){var n=this.context_,o=(0,r.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_);n.moveTo(o[0],o[1]);var l=o.length;s&&(l-=2);for(var h=2;h<l;h+=2)n.lineTo(o[h],o[h+1]);return s&&n.closePath(),i}},{key:"drawRings_",value:function(t,e,i,a){for(var s=0,n=i.length;s<n;++s)e=this.moveToLineTo_(t,e,i[s],a,!0);return e}},{key:"drawCircle",value:function(t){if((0,n.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,o.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],a=e[3]-e[1],s=Math.sqrt(i*i+a*a),r=this.context_;r.beginPath(),r.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var i=e.getGeometryFunction()(t);i&&(0,n.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),i=0,a=e.length;i<a;++i)this.drawGeometry(e[i])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,n.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,a=t.getFlatCoordinates(),s=0,r=t.getEnds(),o=t.getStride();i.beginPath();for(var l=0,h=r.length;l<h;++l)s=this.moveToLineTo_(a,s,r[l],o,!1);i.stroke()}if(""!==this.text_){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),a=0,s=t.getEndss(),r=t.getStride();e.beginPath();for(var o=0,l=s.length;o<l;++o){var h=s[o];a=this.drawRings_(i,a,h,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,s.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,i){var s=this;if(t){var n=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(n||a.defaultFillStyle)}}else this.fillState_=null;if(i){var r=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),h=i.getLineDashOffset(),f=i.getLineJoin(),_=i.getWidth(),u=i.getMiterLimit(),g=l||a.defaultLineDash;this.strokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:1===this.pixelRatio_?g:g.map(function(t){return t*s.pixelRatio_}),lineDashOffset:(h||a.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:(void 0!==_?_:a.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(r||a.defaultStrokeStyle)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var i=t.getPixelRatio(this.pixelRatio_),a=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=a[0]*i,this.imageAnchorY_=a[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/i,n[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var i=t.getFill();if(i){var s=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(s||a.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),l=n.getLineDash(),h=n.getLineDashOffset(),f=n.getLineJoin(),_=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:l||a.defaultLineDash,lineDashOffset:h||a.defaultLineDashOffset,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:void 0!==_?_:a.defaultLineWidth,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(r||a.defaultStrokeStyle)}}else this.textStrokeState_=null;var g=t.getFont(),c=t.getOffsetX(),x=t.getOffsetY(),S=t.getRotateWithView(),m=t.getRotation(),d=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:void 0!==g?g:a.defaultFont,textAlign:void 0!==v?v:a.defaultTextAlign,textBaseline:void 0!==p?p:a.defaultTextBaseline},this.text_=void 0!==y?Array.isArray(y)?y.reduce(function(t,e,i){return t+(i%2?" ":e)},""):y:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==x?this.pixelRatio_*x:0,this.textRotateWithView_=void 0!==S&&S,this.textRotation_=void 0!==m?m:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}else this.text_=""}}]),_}(),p=v;exports.default=p;
},{"../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../transform.js":"P4eA","../canvas.js":"iAG7","../../array.js":"luEr","../../extent.js":"QDir","../../geom/flat/transform.js":"LGwr","../../geom/SimpleGeometry.js":"pnrv"}],"qeKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"cdf1","./style/Fill.js":"AFcg","./style/Icon.js":"z2xv","./style/IconImage.js":"XCOy","./style/Image.js":"S8ow","./style/RegularShape.js":"il3X","./style/Stroke.js":"TXDt","./style/Style.js":"he4w","./style/Text.js":"RPsG"}],"MrCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HIT_DETECT_RESOLUTION=void 0,exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=n(require("./Immediate.js")),t=require("../../style.js"),r=require("../../math.js"),a=require("../../dom.js"),i=require("../../extent.js"),o=require("../../array.js");function n(e){return e&&e.__esModule?e:{default:e}}var l=.5;function s(r,n,s,g,h,c,u){var v=r[0]*l,f=r[1]*l,d=(0,a.createCanvasContext2D)(v,f);d.imageSmoothingEnabled=!1;for(var m=d.canvas,p=new e.default(d,l,h,null,u),y=s.length,S=Math.floor(16777215/y),x={},I=1;I<=y;++I){var T=s[I-1],C=T.getStyleFunction()||g;if(g){var w=C(T,c);if(w){Array.isArray(w)||(w=[w]);for(var D="#"+("000000"+(I*S).toString(16)).slice(-6),M=0,j=w.length;M<j;++M){var E=w[M],O=E.getGeometryFunction()(T);if(O&&(0,i.intersects)(h,O.getExtent())){var _=E.clone(),q=_.getFill();q&&q.setColor(D);var b=_.getStroke();b&&(b.setColor(D),b.setLineDash(null)),_.setText(void 0);var R=E.getImage();if(R&&0!==R.getOpacity()){var z=R.getImageSize();if(!z)continue;var F=(0,a.createCanvasContext2D)(z[0],z[1],void 0,{alpha:!1}),L=F.canvas;F.fillStyle=D,F.fillRect(0,0,L.width,L.height),_.setImage(new t.Icon({img:L,imgSize:z,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var U=_.getZIndex()||0,A=x[U];A||(A={},x[U]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]),A[O.getType().replace("Multi","")].push(O,_)}}}}}for(var H=Object.keys(x).map(Number).sort(o.numberSafeCompareFunction),N=0,P=H.length;N<P;++N){var k=x[H[N]];for(var G in k)for(var V=k[G],W=0,X=V.length;W<X;W+=2){p.setStyle(V[W+1]);for(var Y=0,Z=n.length;Y<Z;++Y)p.setTransform(n[Y]),p.drawGeometry(V[W])}}return d.getImageData(0,0,m.width,m.height)}function g(e,t,a){var i=[];if(a){var o=Math.floor(Math.round(e[0])*l),n=Math.floor(Math.round(e[1])*l),s=4*((0,r.clamp)(o,0,a.width-1)+(0,r.clamp)(n,0,a.height-1)*a.width),g=a.data[s],h=a.data[s+1],c=a.data[s+2]+256*(h+256*g),u=Math.floor(16777215/t.length);c&&c%u==0&&i.push(t[c/u-1])}return i}exports.HIT_DETECT_RESOLUTION=l;
},{"./Immediate.js":"fo6K","../../style.js":"qeKX","../../math.js":"B96G","../../dom.js":"Xno5","../../extent.js":"QDir","../../array.js":"luEr"}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=n,exports.getSquaredTolerance=a,exports.getTolerance=l,exports.renderFeature=d;var e=r(require("../ImageState.js")),t=require("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}var g=.5,i={Point:I,LineString:v,Polygon:y,MultiPoint:S,MultiLineString:T,MultiPolygon:s,GeometryCollection:f,Circle:o};function n(e,r){return parseInt((0,t.getUid)(e),10)-parseInt((0,t.getUid)(r),10)}function a(e,t){var r=l(e,t);return r*r}function l(e,t){return g*e/t}function o(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Circle");l.setFillStrokeStyle(n,a),l.drawCircle(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function d(t,r,g,i,n,a,l){var o=!1,d=g.getImage();if(d){var x=d.getImageState();x==e.default.LOADED||x==e.default.ERROR?d.unlistenImageChange(n):(x==e.default.IDLE&&d.load(),d.listenImageChange(n),o=!0)}return u(t,r,g,i,a,l),o}function u(e,t,r,g,n,a){var l=r.getGeometryFunction()(t);if(l){var o=l.simplifyTransformed(g,n);if(r.getRenderer())x(e,o,r,t);else(0,i[o.getType()])(e,o,r,t,a)}}function x(e,t,r,g){if("GeometryCollection"!=t.getType())e.getBuilder(r.getZIndex(),"Default").drawCustom(t,g,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=t.getGeometries(),n=0,a=i.length;n<a;++n)x(e,i[n],r,g)}function f(e,t,r,g,n){var a,l,o=t.getGeometriesArray();for(a=0,l=o.length;a<l;++a){(0,i[o[a].getType()])(e,o[a],r,g,n)}}function v(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function T(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawMultiLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function s(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(a||n){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawMultiPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function I(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function S(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawMultiPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawMultiPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function y(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}
},{"../ImageState.js":"u3kG","../util.js":"KniQ"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../../render/canvas/BuilderGroup.js")),t=f(require("./Layer.js")),r=y(require("../../render/canvas/ExecutorGroup.js")),n=y(require("../../ViewHint.js")),i=require("../../render/canvas/hitdetect.js"),o=require("../../transform.js"),a=require("../../extent.js"),s=require("../../dom.js"),u=require("../vector.js"),c=require("../../array.js"),l=require("../../proj.js"),d=require("../../util.js"),h=require("../../coordinate.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function y(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=O();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(p){m(y,t.default);var f=b(y);function y(e){var t;return v(this,y),(t=f.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(R(t)),t.animatingOrInteracting_,t.hitDetectionImageData_=null,t.renderedFeatures_=null,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,a.createEmpty)(),t.wrappedRenderedExtent_=(0,a.createEmpty)(),t.renderedRotation_,t.renderedCenter_=null,t.renderedProjection_=null,t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t.declutterExecutorGroup=null,t.clipping=!0,t.compositionContext_=null,t.opacity_=1,t}return x(y,[{key:"renderWorlds",value:function(e,t,r){var i=t.extent,o=t.viewState,s=o.center,u=o.resolution,c=o.projection,l=o.rotation,d=c.getExtent(),h=this.getLayer().getSource(),p=t.pixelRatio,f=t.viewHints,y=!(f[n.default.ANIMATING]||f[n.default.INTERACTING]),g=this.compositionContext_,v=Math.round(t.size[0]*p),_=Math.round(t.size[1]*p),x=h.getWrapX()&&c.canWrapX(),m=x?(0,a.getWidth)(d):null,E=x?Math.ceil((i[2]-d[2])/m)+1:1,b=x?Math.floor((i[0]-d[0])/m):0;do{var C=this.getRenderTransform(s,u,l,p,v,_,b*m);e.execute(g,1,C,l,y,void 0,r)}while(++b<E)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var e=(0,s.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,t.canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,s.releaseCanvas)(this.compositionContext_),t.canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(e,t){var r=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];(0,o.makeScale)(this.pixelTransform,1/r,1/r),(0,o.makeInverse)(this.inversePixelTransform,this.pixelTransform);var i=(0,o.toString)(this.pixelTransform);this.useContainer(t,i,this.getBackground(e));var s=this.context,u=s.canvas,c=this.replayGroup_,d=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!d||d.isEmpty()))return null;var h=Math.round(e.size[0]*r),p=Math.round(e.size[1]*r);u.width!=h||u.height!=p?(u.width=h,u.height=p,u.style.transform!==i&&(u.style.transform=i)):this.containerReused||s.clearRect(0,0,h,p),this.preRender(s,e);var f=e.viewState,y=f.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var g=!1,v=!0;if(n.extent&&this.clipping){var _=(0,l.fromUserExtent)(n.extent,y);(g=(v=(0,a.intersects)(_,e.extent))&&!(0,a.containsExtent)(_,e.extent))&&this.clipUnrotated(this.compositionContext_,e,_)}return v&&this.renderWorlds(c,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];(0,o.apply)(this.pixelTransform,r);var n=this.renderedCenter_,s=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,l=this.wrappedRenderedExtent_,d=this.getLayer(),h=[],p=r[0]*i.HIT_DETECT_RESOLUTION,f=r[1]*i.HIT_DETECT_RESOLUTION;h.push(this.getRenderTransform(n,s,u,i.HIT_DETECT_RESOLUTION,p,f,0).slice());var y=d.getSource(),g=c.getExtent();if(y.getWrapX()&&c.canWrapX()&&!(0,a.containsExtent)(g,l)){for(var v,_=l[0],x=(0,a.getWidth)(g),m=0;_<g[0];)v=x*--m,h.push(this.getRenderTransform(n,s,u,i.HIT_DETECT_RESOLUTION,p,f,v).slice()),_+=x;for(m=0,_=l[2];_>g[2];)v=x*++m,h.push(this.getRenderTransform(n,s,u,i.HIT_DETECT_RESOLUTION,p,f,v).slice()),_-=x}this.hitDetectionImageData_=(0,i.createHitDetectionImageData)(r,h,this.renderedFeatures_,d.getStyleFunction(),l,s,u)}t((0,i.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){var o=this;if(this.replayGroup_){var a,s=t.viewState.resolution,u=t.viewState.rotation,c=this.getLayer(),l={},h=function(e,t,r){var o=(0,d.getUid)(e),a=l[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return l[o]=!0,i.splice(i.lastIndexOf(a),1),n(e,c,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return l[o]=!0,n(e,c,t);i.push(l[o]={feature:e,layer:c,geometry:t,distanceSq:r,callback:n})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(n){return a=n.forEachFeatureAtCoordinate(e,s,u,r,h,n===o.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(function(e){return e.value}):null)}),a}}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var i=this.getLayer(),o=i.getSource();if(!o)return!1;var s=t.viewHints[n.default.ANIMATING],d=t.viewHints[n.default.INTERACTING],p=i.getUpdateWhileAnimating(),f=i.getUpdateWhileInteracting();if(this.ready&&!p&&s||!f&&d)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var y=t.extent,g=t.viewState,v=g.projection,_=g.resolution,x=t.pixelRatio,m=i.getRevision(),E=i.getRenderBuffer(),b=i.getRenderOrder();void 0===b&&(b=u.defaultOrder);var C=g.center.slice(),R=(0,a.buffer)(y,E*_),O=R.slice(),T=[R.slice()],w=v.getExtent();if(o.getWrapX()&&v.canWrapX()&&!(0,a.containsExtent)(w,t.extent)){var I=(0,a.getWidth)(w),j=Math.max((0,a.getWidth)(R)/2,I);R[0]=w[0]-j,R[2]=w[2]+j,(0,h.wrapX)(C,v);var S=(0,a.wrapX)(T[0],v);S[0]<w[0]&&S[2]<w[2]?T.push([S[0]+I,S[1],S[2]+I,S[3]]):S[0]>w[0]&&S[2]>w[2]&&T.push([S[0]-I,S[1],S[2]-I,S[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==m&&this.renderedRenderOrder_==b&&(0,a.containsExtent)(this.wrappedRenderedExtent_,R))return(0,c.equals)(this.renderedExtent_,O)||(this.hitDetectionImageData_=null,this.renderedExtent_=O),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var D,G=new e.default((0,u.getTolerance)(_,x),R,_,x);this.getLayer().getDeclutter()&&(D=new e.default((0,u.getTolerance)(_,x),R,_,x));var P,F=(0,l.getUserProjection)();if(F){for(var k=0,q=T.length;k<q;++k){var W=T[k],A=(0,l.toUserExtent)(W,v);o.loadFeatures(A,(0,l.toUserResolution)(_,v),F)}P=(0,l.getTransformFromProjections)(F,v)}else for(var M=0,N=T.length;M<N;++M)o.loadFeatures(T[M],_,v);var U=(0,u.getSquaredTolerance)(_,x),H=!0,L=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,_)),t){var n=this.renderFeature(e,U,t,G,P,D);H=H&&!n}}.bind(this),X=(0,l.toUserExtent)(R,v),B=o.getFeaturesInExtent(X);b&&B.sort(b);for(var z=0,V=B.length;z<V;++z)L(B[z]);this.renderedFeatures_=B,this.ready=H;var J=G.finish(),K=new r.default(R,_,x,o.getOverlaps(),J,i.getRenderBuffer());return D&&(this.declutterExecutorGroup=new r.default(R,_,x,o.getOverlaps(),D.finish(),i.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=m,this.renderedRenderOrder_=b,this.renderedExtent_=O,this.wrappedRenderedExtent_=R,this.renderedCenter_=C,this.renderedProjection_=v,this.replayGroup_=K,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(e,t,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,c=r.length;s<c;++s)a=(0,u.renderFeature)(n,e,r[s],t,this.boundHandleStyleImageChange_,i,o)||a;else a=(0,u.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i,o);return a}}]),y}(),I=w;exports.default=I;
},{"../../render/canvas/BuilderGroup.js":"vqHd","./Layer.js":"vPfl","../../render/canvas/ExecutorGroup.js":"ngEc","../../ViewHint.js":"cuLW","../../render/canvas/hitdetect.js":"MrCe","../../transform.js":"P4eA","../../extent.js":"QDir","../../dom.js":"Xno5","../vector.js":"UCah","../../array.js":"luEr","../../proj.js":"Diht","../../util.js":"KniQ","../../coordinate.js":"nGsj"}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseVector.js")),t=r(require("../renderer/canvas/VectorLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=s();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(r){i(u,e.default);var n=a(u);function u(e){return o(this,u),n.call(this,e)}return c(u,[{key:"createRenderer",value:function(){return new t.default(this)}}]),u}(),d=b;exports.default=d;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorLayer.js":"F2e3"}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("rbush")),t=require("../extent.js"),r=require("../util.js"),n=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=function(){function i(t){u(this,i),this.rbush_=new e.default(t),this.items_={}}return s(i,[{key:"insert",value:function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[(0,r.getUid)(t)]=n}},{key:"load",value:function(e,t){for(var n=new Array(t.length),i=0,u=t.length;i<u;i++){var a=e[i],s=t[i],o={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};n[i]=o,this.items_[(0,r.getUid)(s)]=o}this.rbush_.load(n)}},{key:"remove",value:function(e){var t=(0,r.getUid)(e),n=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(n)}},{key:"update",value:function(e,n){var i=this.items_[(0,r.getUid)(n)],u=[i.minX,i.minY,i.maxX,i.maxY];(0,t.equals)(u,e)||(this.remove(n),this.insert(e,n))}},{key:"getAll",value:function(){return this.rbush_.all().map(function(e){return e.value})}},{key:"getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(e){return e.value})}},{key:"forEach",value:function(e){return this.forEach_(this.getAll(),e)}},{key:"forEachInExtent",value:function(e,t){return this.forEach_(this.getInExtent(e),t)}},{key:"forEach_",value:function(e,t){for(var r,n=0,i=e.length;n<i;n++)if(r=t(e[n]))return r;return r}},{key:"isEmpty",value:function(){return(0,n.isEmpty)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(e){var r=this.rbush_.toJSON();return(0,t.createOrUpdate)(r.minX,r.minY,r.maxX,r.maxY,e)}},{key:"concat",value:function(e){for(var t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}}]),i}(),l=o;exports.default=l;
},{"rbush":"XGea","../extent.js":"QDir","../util.js":"KniQ","../obj.js":"mH6q"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};exports.default=e;
},{}],"JpXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=t,exports.bbox=r,exports.tile=o;var e=require("./proj.js");function t(e,t){return[[-1/0,-1/0,1/0,1/0]]}function r(e,t){return[e]}function o(t){return function(r,o,n){var u=t.getZForResolution((0,e.fromUserResolution)(o,n)),i=t.getTileRangeForExtentAndZ((0,e.fromUserExtent)(r,n),u),s=[],x=[u,0,0];for(x[1]=i.minX;x[1]<=i.maxX;++x[1])for(x[2]=i.minY;x[2]<=i.maxY;++x[2])s.push((0,e.toUserExtent)(t.getTileCoordExtent(x),n));return s}}
},{"./proj.js":"Diht"}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=t,exports.setWithCredentials=n,exports.xhr=s;var e=require("./functions.js"),r=!1;function t(e,t,s,n,o,a,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(s,n,o):e,!0),"arraybuffer"==t.getType()&&(i.responseType="arraybuffer"),i.withCredentials=r,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var r,n=t.getType();"json"==n||"text"==n?r=i.responseText:"xml"==n?(r=i.responseXML)||(r=(new DOMParser).parseFromString(i.responseText,"application/xml")):"arraybuffer"==n&&(r=i.response),r?a(t.readFeatures(r,{extent:s,featureProjection:o}),t.readProjection(r)):u()}else u()},i.onerror=u,i.send()}function s(r,s){return function(n,o,a,u,i){var p=this;t(r,s,n,o,a,function(e,r){p.addFeatures(e),void 0!==u&&u(e)},i||e.VOID)}}function n(e){r=e}
},{"./functions.js":"RgA2"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=E(require("../Collection.js")),t=E(require("../CollectionEventType.js")),r=E(require("../events/Event.js")),n=E(require("../events/EventType.js")),i=E(require("../ObjectEventType.js")),a=E(require("../structs/RBush.js")),u=E(require("./Source.js")),o=E(require("./VectorEventType.js")),s=require("../functions.js"),l=require("../loadingstrategy.js"),f=require("../asserts.js"),c=require("../extent.js"),h=require("../array.js"),d=require("../util.js"),v=require("../obj.js"),y=require("../events.js"),_=require("../featureloader.js");function E(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return F(e)||R(e)||x(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function R(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function F(e){if(Array.isArray(e))return I(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=C(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=U();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){O(n,r.default);var t=S(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e)).feature=r,a.features=i,a}return j(n)}();exports.VectorSourceEvent=D;var P=function(r){O(p,u.default);var E=S(p);function p(t){var r;k(this,p),t=t||{},(r=E.call(this,{attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX})).on,r.once,r.un,r.loader_=s.VOID,r.format_=t.format,r.overlaps_=void 0===t.overlaps||t.overlaps,r.url_=t.url,void 0!==t.loader?r.loader_=t.loader:void 0!==r.url_&&((0,f.assert)(r.format_,7),r.loader_=(0,_.xhr)(r.url_,r.format_)),r.strategy_=void 0!==t.strategy?t.strategy:l.all;var n,i,u=void 0===t.useSpatialIndex||t.useSpatialIndex;return r.featuresRtree_=u?new a.default:null,r.loadedExtentsRtree_=new a.default,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(n=t.features).getArray()),u||void 0!==n||(n=new e.default(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==n&&r.bindFeaturesCollection_(n),r}return j(p,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(e){var t=(0,d.getUid)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new D(o.default.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)}},{key:"setupChangeEvents_",value:function(e,t){this.featureChangeKeys_[e]=[(0,y.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,y.listen)(t,i.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,f.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(e){for(var t=[],r=[],n=[],i=0,a=e.length;i<a;i++){var u=e[i],s=(0,d.getUid)(u);this.addToIndex_(s,u)&&r.push(u)}for(var l=0,f=r.length;l<f;l++){var c=r[l],h=(0,d.getUid)(c);this.setupChangeEvents_(h,c);var v=c.getGeometry();if(v){var y=v.getExtent();t.push(y),n.push(c)}else this.nullGeometryFeatures_[h]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(o.default.ADDFEATURE))for(var _=0,E=r.length;_<E;_++)this.dispatchEvent(new D(o.default.ADDFEATURE,r[_]))}},{key:"bindFeaturesCollection_",value:function(e){var r=!1;this.addEventListener(o.default.ADDFEATURE,function(t){r||(r=!0,e.push(t.feature),r=!1)}),this.addEventListener(o.default.REMOVEFEATURE,function(t){r||(r=!0,e.remove(t.feature),r=!1)}),e.addEventListener(t.default.ADD,function(e){r||(r=!0,this.addFeature(e.element),r=!1)}.bind(this)),e.addEventListener(t.default.REMOVE,function(e){r||(r=!0,this.removeFeature(e.element),r=!1)}.bind(this)),this.featuresCollection_=e}},{key:"clear",value:function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(y.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var r=function(e){this.removeFeatureInternal(e)}.bind(this);for(var n in this.featuresRtree_.forEach(r),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new D(o.default.CLEAR);this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,v.isEmpty)(this.nullGeometryFeatures_)||(0,h.extend)(e,Object.values(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}},{key:"getFeaturesInExtent",value:function(e,t){var r=this;if(this.featuresRtree_){var n;if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var i=(0,c.wrapAndSliceX)(e,t);return(n=[]).concat.apply(n,g(i.map(function(e){return r.featuresRtree_.getInExtent(e)})))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(e,t){var r=e[0],n=e[1],i=null,a=[NaN,NaN],u=1/0,o=[-1/0,-1/0,1/0,1/0];return t=t||s.TRUE,this.featuresRtree_.forEachInExtent(o,function(e){if(t(e)){var s=e.getGeometry(),l=u;if((u=s.closestPointXY(r,n,a,u))<l){i=e;var f=Math.sqrt(u);o[0]=r-f,o[1]=n-f,o[2]=r+f,o[3]=n+f}}}),i}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null}},{key:"getFeatureByUid",value:function(e){var t=this.uidIndex_[e];return void 0!==t?t:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(e){var t=e.target,r=(0,d.getUid)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var a=t.getId();if(void 0!==a){var u=a.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new D(o.default.CHANGEFEATURE,t))}},{key:"hasFeature",value:function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,d.getUid)(e)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(e,t,r){for(var n=this,i=this.loadedExtentsRtree_,a=this.strategy_(e,t,r),u=function(e,u){var s=a[e];i.forEachInExtent(s,function(e){return(0,c.containsExtent)(e.extent,s)})||(++n.loadingExtentsCount_,n.dispatchEvent(new D(o.default.FEATURESLOADSTART)),n.loader_.call(n,s,t,r,function(e){--this.loadingExtentsCount_,this.dispatchEvent(new D(o.default.FEATURESLOADEND,void 0,e))}.bind(n),function(){--this.loadingExtentsCount_,this.dispatchEvent(new D(o.default.FEATURESLOADERROR))}.bind(n)),i.insert(s,{extent:s.slice()}))},s=0,l=a.length;s<l;++s)u(s);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),b(q(p.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,c.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)}},{key:"removeFeature",value:function(e){if(e){var t=(0,d.getUid)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}}},{key:"removeFeatureInternal",value:function(e){var t=(0,d.getUid)(e),r=this.featureChangeKeys_[t];if(r){r.forEach(y.unlistenByKey),delete this.featureChangeKeys_[t];var n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new D(o.default.REMOVEFEATURE,e)),e}}},{key:"removeFromIdIndex_",value:function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,f.assert)(this.format_,7),this.url_=e,this.setLoader((0,_.xhr)(e,this.format_))}}]),p}(),L=P;exports.default=L;
},{"../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../structs/RBush.js":"MiUH","./Source.js":"H38a","./VectorEventType.js":"s8Fc","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../asserts.js":"fLG6","../extent.js":"QDir","../array.js":"luEr","../util.js":"KniQ","../obj.js":"mH6q","../events.js":"UqnM","../featureloader.js":"U3JP"}],"RvU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRenderPixel=l,exports.getVectorContext=a,exports.toContext=s;var e=i(require("./render/canvas/Immediate.js")),r=require("./has.js"),t=require("./transform.js"),n=require("./renderer/vector.js"),o=require("./proj.js");function i(e){return e&&e.__esModule?e:{default:e}}function s(n,o){var i=n.canvas,s=(o=o||{}).pixelRatio||r.DEVICE_PIXEL_RATIO,a=o.size;a&&(i.width=a[0]*s,i.height=a[1]*s,i.style.width=a[0]+"px",i.style.height=a[1]+"px");var l=[0,0,i.width,i.height],u=(0,t.scale)((0,t.create)(),s,s);return new e.default(n,s,l,u,0)}function a(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var i,s=r.inversePixelTransform[0],a=r.frameState,l=(0,t.multiply)(r.inversePixelTransform.slice(),a.coordinateToPixelTransform),u=(0,n.getSquaredTolerance)(a.viewState.resolution,s),c=(0,o.getUserProjection)();return c&&(i=(0,o.getTransformFromProjections)(c,a.viewState.projection)),new e.default(r.context,s,a.extent,l,a.viewState.rotation,u,i)}function l(e,r){return(0,t.apply)(e.inversePixelTransform,r.slice(0))}
},{"./render/canvas/Immediate.js":"fo6K","./has.js":"f3Nv","./transform.js":"P4eA","./renderer/vector.js":"UCah","./proj.js":"Diht"}],"w0c6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../proj.js"),a=require("../../math.js");function r(t,r,n){for(var e,o,s,i,u,p,h=[],c=t(0),M=t(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=t(u=(s+i)/2)),(0,a.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,t.get)("EPSG:4326"),h=Math.cos((0,a.toRadians)(e)),c=Math.sin((0,a.toRadians)(e)),M=Math.cos((0,a.toRadians)(s)),f=Math.sin((0,a.toRadians)(s)),g=Math.cos((0,a.toRadians)(o-n)),d=Math.sin((0,a.toRadians)(o-n)),l=c*f+h*M*g;return r(function(t){if(1<=l)return[o,s];var r=t*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,a.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,a.toDegrees)(m),(0,a.toDegrees)(R)]},(0,t.getTransform)(p,i),u)}function e(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[a,n+(e-n)*t]},(0,t.getTransform)(i,o),s)}function o(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[n+(e-n)*t,a]},(0,t.getTransform)(i,o),s)}
},{"../../proj.js":"Diht","../../math.js":"B96G"}],"wXs0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../Collection.js")),e=p(require("../render/EventType.js")),a=p(require("../Feature.js")),i=p(require("../style/Fill.js")),n=p(require("../geom/LineString.js")),r=p(require("../geom/Point.js")),l=p(require("../style/Stroke.js")),o=p(require("../style/Style.js")),s=p(require("../style/Text.js")),h=p(require("./Vector.js")),_=p(require("../source/Vector.js")),m=require("../extent.js"),u=require("../math.js"),d=require("../coordinate.js"),f=require("../proj.js"),L=require("../render.js"),c=require("../geom/flat/geodesic.js");function p(t){return t&&t.__esModule?t:{default:t}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,a){return e&&v(t.prototype,e),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=M();return function(){var a,i=E(t);if(e){var n=E(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return P(this,a)}}function P(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=new l.default({color:"rgba(0,0,0,0.2)"}),k=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],C=function(p){y(v,h.default);var b=j(v);function v(a){var n;g(this,v),a=a||{};var r=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},a);return delete r.maxLines,delete r.strokeStyle,delete r.targetSize,delete r.showLabels,delete r.lonLabelFormatter,delete r.latLabelFormatter,delete r.lonLabelPosition,delete r.latLabelPosition,delete r.lonLabelStyle,delete r.latLabelStyle,delete r.intervals,(n=b.call(this,r)).projection_=null,n.maxLat_=1/0,n.maxLon_=1/0,n.minLat_=-1/0,n.minLon_=-1/0,n.maxX_=1/0,n.maxY_=1/0,n.minX_=-1/0,n.minY_=-1/0,n.targetSize_=void 0!==a.targetSize?a.targetSize:100,n.maxLines_=void 0!==a.maxLines?a.maxLines:100,n.meridians_=[],n.parallels_=[],n.strokeStyle_=void 0!==a.strokeStyle?a.strokeStyle:T,n.fromLonLatTransform_=void 0,n.toLonLatTransform_=void 0,n.projectionCenterLonLat_=null,n.bottomLeft_=null,n.bottomRight_=null,n.topLeft_=null,n.topRight_=null,n.meridiansLabels_=null,n.parallelsLabels_=null,a.showLabels&&(n.lonLabelFormatter_=null==a.lonLabelFormatter?d.degreesToStringHDMS.bind(w(n),"EW"):a.lonLabelFormatter,n.latLabelFormatter_=null==a.latLabelFormatter?d.degreesToStringHDMS.bind(w(n),"NS"):a.latLabelFormatter,n.lonLabelPosition_=null==a.lonLabelPosition?0:a.lonLabelPosition,n.latLabelPosition_=null==a.latLabelPosition?1:a.latLabelPosition,n.lonLabelStyleBase_=new o.default({text:void 0!==a.lonLabelStyle?a.lonLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),n.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(w(n)),n.latLabelStyleBase_=new o.default({text:void 0!==a.latLabelStyle?a.latLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),n.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(w(n)),n.meridiansLabels_=[],n.parallelsLabels_=[],n.addEventListener(e.default.POSTRENDER,n.drawLabels_.bind(w(n)))),n.intervals_=void 0!==a.intervals?a.intervals:k,n.setSource(new _.default({loader:n.loaderFunction.bind(w(n)),strategy:n.strategyFunction.bind(w(n)),features:new t.default,overlaps:!1,useSpatialIndex:!1,wrapX:a.wrapX})),n.featurePool_=[],n.lineStyle_=new o.default({stroke:n.strokeStyle_}),n.loadedExtent_=null,n.renderedExtent_=null,n.renderedResolution_=null,n.setRenderOrder(null),n}return x(v,[{key:"strategyFunction",value:function(t,e){var a=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,m.wrapX)(a,this.projection_),this.loadedExtent_&&((0,m.approximatelyEquals)(this.loadedExtent_,a,e)?a=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[a]}},{key:"loaderFunction",value:function(t,e,i){this.loadedExtent_=t;var n=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],l=(0,m.getIntersection)(r,t);if(!(this.renderedExtent_&&(0,m.equals)(this.renderedExtent_,l)&&this.renderedResolution_===e||(this.renderedExtent_=l,this.renderedResolution_=e,(0,m.isEmpty)(l)))){var o=(0,m.getCenter)(l),s=e*e/4;(!this.projection_||!(0,f.equivalent)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(l,o,e,s);var h,_=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(_+=this.meridians_.length),this.parallelsLabels_&&(_+=this.parallels_.length);_>this.featurePool_.length;)h=new a.default,this.featurePool_.push(h);var u=n.getFeaturesCollection();u.clear();var d,L,c=0;for(d=0,L=this.meridians_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),u.push(h);for(d=0,L=this.parallels_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),u.push(h)}}},{key:"addMeridian_",value:function(t,e,a,i,n,l){var o=this.getMeridian_(t,e,a,i,l);if((0,m.intersects)(o.getExtent(),n)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);l in this.meridiansLabels_?this.meridiansLabels_[l].text=s:this.meridiansLabels_[l]={geom:new r.default([]),text:s}}this.meridians_[l++]=o}return l}},{key:"addParallel_",value:function(t,e,a,i,n,l){var o=this.getParallel_(t,e,a,i,l);if((0,m.intersects)(o.getExtent(),n)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);l in this.parallelsLabels_?this.parallelsLabels_[l].text=s:this.parallelsLabels_[l]={geom:new r.default([]),text:s}}this.parallels_[l++]=o}return l}},{key:"drawLabels_",value:function(t){var e=t.frameState.viewState.rotation,a=t.frameState.viewState.resolution,i=t.frameState.size,n=t.frameState.extent,r=(0,m.getCenter)(n),l=n;if(e){var o=i[0]*a,s=i[1]*a;l=[r[0]-o/2,r[1]-s/2,r[0]+o/2,r[1]+s/2]}var h=0,_=0,u=this.latLabelPosition_<.5,d=this.projection_.getExtent(),f=(0,m.getWidth)(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,m.containsExtent)(d,n)&&(h=Math.floor((n[0]-d[0])/f),_=Math.ceil((n[2]-d[2])/f),u=u!==Math.abs(e)>Math.PI/2);for(var c=(0,L.getVectorContext)(t),p=h;p<=_;++p){var b=this.meridians_.length+this.parallels_.length,g=void 0,v=void 0,x=void 0,y=void 0;if(this.meridiansLabels_)for(v=0,x=this.meridiansLabels_.length;v<x;++v){var S=this.meridians_[v];if(e||0!==p){var j=S.clone();j.translate(p*f,0),j.rotate(-e,r),(y=this.getMeridianPoint_(j,l,v)).rotate(e,r)}else y=this.getMeridianPoint_(S,n,v);(g=this.featurePool_[b++]).setGeometry(y),g.set("graticule_label",this.meridiansLabels_[v].text),c.drawFeature(g,this.lonLabelStyle_(g))}if(this.parallelsLabels_&&(p===h&&u||p===_&&!u))for(v=0,x=this.parallels_.length;v<x;++v){var P=this.parallels_[v];if(e||0!==p){var w=P.clone();w.translate(p*f,0),w.rotate(-e,r),(y=this.getParallelPoint_(w,l,v)).rotate(e,r)}else y=this.getParallelPoint_(P,n,v);(g=this.featurePool_[b++]).setGeometry(y),g.set("graticule_label",this.parallelsLabels_[v].text),c.drawFeature(g,this.latLabelStyle_(g))}}}},{key:"createGraticule_",value:function(t,e,a,i){var n=this.getInterval_(a);if(-1==n)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var r=!1,l=this.projection_.getExtent(),o=(0,m.getWidth)(l);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,m.containsExtent)(l,t)&&((0,m.getWidth)(t)>=o?(t[0]=l[0],t[2]=l[2]):r=!0);var s=[(0,u.clamp)(e[0],this.minX_,this.maxX_),(0,u.clamp)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(s);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var _,d,f,L,c=(0,u.clamp)(h[0],this.minLon_,this.maxLon_),p=(0,u.clamp)(h[1],this.minLat_,this.maxLat_),b=this.maxLines_,g=t;r||(g=[(0,u.clamp)(t[0],this.minX_,this.maxX_),(0,u.clamp)(t[1],this.minY_,this.maxY_),(0,u.clamp)(t[2],this.minX_,this.maxX_),(0,u.clamp)(t[3],this.minY_,this.maxY_)]);var v=(0,m.applyTransform)(g,this.toLonLatTransform_,void 0,8),x=v[3],y=v[2],S=v[1],j=v[0];if(r||((0,m.containsCoordinate)(g,this.bottomLeft_)&&(j=this.minLon_,S=this.minLat_),(0,m.containsCoordinate)(g,this.bottomRight_)&&(y=this.maxLon_,S=this.minLat_),(0,m.containsCoordinate)(g,this.topLeft_)&&(j=this.minLon_,x=this.maxLat_),(0,m.containsCoordinate)(g,this.topRight_)&&(y=this.maxLon_,x=this.maxLat_),x=(0,u.clamp)(x,p,this.maxLat_),y=(0,u.clamp)(y,c,this.maxLon_),S=(0,u.clamp)(S,this.minLat_,p),j=(0,u.clamp)(j,this.minLon_,c)),c=Math.floor(c/n)*n,L=(0,u.clamp)(c,this.minLon_,this.maxLon_),d=this.addMeridian_(L,S,x,i,t,0),_=0,r)for(;(L-=n)>=j&&_++<b;)d=this.addMeridian_(L,S,x,i,t,d);else for(;L!=this.minLon_&&_++<b;)L=Math.max(L-n,this.minLon_),d=this.addMeridian_(L,S,x,i,t,d);if(L=(0,u.clamp)(c,this.minLon_,this.maxLon_),_=0,r)for(;(L+=n)<=y&&_++<b;)d=this.addMeridian_(L,S,x,i,t,d);else for(;L!=this.maxLon_&&_++<b;)L=Math.min(L+n,this.maxLon_),d=this.addMeridian_(L,S,x,i,t,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),p=Math.floor(p/n)*n,f=(0,u.clamp)(p,this.minLat_,this.maxLat_),d=this.addParallel_(f,j,y,i,t,0),_=0;f!=this.minLat_&&_++<b;)f=Math.max(f-n,this.minLat_),d=this.addParallel_(f,j,y,i,t,d);for(f=(0,u.clamp)(p,this.minLat_,this.maxLat_),_=0;f!=this.maxLat_&&_++<b;)f=Math.min(f+n,this.maxLat_),d=this.addParallel_(f,j,y,i,t,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)}},{key:"getInterval_",value:function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,n=Math.pow(this.targetSize_*t,2),r=[],l=[],o=0,s=this.intervals_.length;o<s;++o){var h=(0,u.clamp)(this.intervals_[o]/2,0,90),_=(0,u.clamp)(a,-90+h,90-h);if(r[0]=e-h,r[1]=_-h,l[0]=e+h,l[1]=_+h,this.fromLonLatTransform_(r,r),this.fromLonLatTransform_(l,l),Math.pow(l[0]-r[0],2)+Math.pow(l[1]-r[1],2)<=n)break;i=this.intervals_[o]}return i}},{key:"getMeridian_",value:function(t,e,a,i,r){var l=(0,c.meridian)(t,e,a,this.projection_,i),o=this.meridians_[r];return o?(o.setFlatCoordinates("XY",l),o.changed()):(o=new n.default(l,"XY"),this.meridians_[r]=o),o}},{key:"getMeridianPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),n=1,r=i.length-1;i[n]>i[r]&&(n=r,r=1);var l=Math.max(e[1],i[n]),o=Math.min(e[3],i[r]),s=(0,u.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,l,o),h=[i[n-1]+(i[r-1]-i[n-1])*(s-i[n])/(i[r]-i[n]),s],_=this.meridiansLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getMeridians",value:function(){return this.meridians_}},{key:"getParallel_",value:function(t,e,a,i,r){var l=(0,c.parallel)(t,e,a,this.projection_,i),o=this.parallels_[r];return o?(o.setFlatCoordinates("XY",l),o.changed()):o=new n.default(l,"XY"),o}},{key:"getParallelPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),n=0,r=i.length-2;i[n]>i[r]&&(n=r,r=0);var l=Math.max(e[0],i[n]),o=Math.min(e[2],i[r]),s=(0,u.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,l,o),h=[s,i[n+1]+(i[r+1]-i[n+1])*(s-i[n])/(i[r]-i[n])],_=this.parallelsLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getParallels",value:function(){return this.parallels_}},{key:"updateProjectionInfo_",value:function(t){var e=(0,f.get)("EPSG:4326"),a=t.getWorldExtent();this.maxLat_=a[3],this.maxLon_=a[2],this.minLat_=a[1],this.minLon_=a[0];var i=(0,f.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var n=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,a){for(var r=i(t,e,a=a||2),l=0,o=r.length;l<o;l+=a)r[l]<n&&(r[l]+=360);return r}}this.fromLonLatTransform_=(0,f.getTransform)(e,t);var r=(0,m.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,m.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}]),v}(),F=C;exports.default=F;
},{"../Collection.js":"FnDa","../render/EventType.js":"z39m","../Feature.js":"mYW9","../style/Fill.js":"AFcg","../geom/LineString.js":"DfxW","../geom/Point.js":"gLcY","../style/Stroke.js":"TXDt","../style/Style.js":"he4w","../style/Text.js":"RPsG","./Vector.js":"dflx","../source/Vector.js":"ZS12","../extent.js":"QDir","../math.js":"B96G","../coordinate.js":"nGsj","../proj.js":"Diht","../render.js":"RvU2","../geom/flat/geodesic.js":"w0c6"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=p();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(r){c(u,t.default);var n=a(u);function u(t,r,i,c,f){var a;o(this,u);var l=void 0!==f?e.default.IDLE:e.default.LOADED;return(a=n.call(this,t,r,i,l)).loader_=void 0!==f?f:null,a.canvas_=c,a.error_=null,a}return i(u,[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}]),u}(),b=d;exports.default=b;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3kG"}],"qWcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Object.js")),t=s(require("./MapEventType.js")),n=require("./css.js"),i=require("./extent.js"),o=require("./events.js"),r=require("./dom.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var n,i=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},P=function(s){c(l,e.default);var a=h(l);function l(e){var t;return u(this,l),(t=a.call(this)).on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=void 0===e.insertFirst||e.insertFirst,t.stopEvent=void 0===e.stopEvent||e.stopEvent,t.element=document.createElement("div"),t.element.className=void 0!==e.className?e.className:"ol-overlay-container "+n.CLASS_SELECTABLE,t.element.style.position="absolute",t.element.style.pointerEvents="auto",t.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(m.ELEMENT,t.handleElementChanged),t.addChangeListener(m.MAP,t.handleMapChanged),t.addChangeListener(m.OFFSET,t.handleOffsetChanged),t.addChangeListener(m.POSITION,t.handlePositionChanged),t.addChangeListener(m.POSITIONING,t.handlePositioningChanged),void 0!==e.element&&t.setElement(e.element),t.setOffset(void 0!==e.offset?e.offset:[0,0]),t.setPositioning(e.positioning||"top-left"),void 0!==e.position&&t.setPosition(e.position),t}return f(l,[{key:"getElement",value:function(){return this.get(m.ELEMENT)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(m.MAP)||null}},{key:"getOffset",value:function(){return this.get(m.OFFSET)}},{key:"getPosition",value:function(){return this.get(m.POSITION)}},{key:"getPositioning",value:function(){return this.get(m.POSITIONING)}},{key:"handleElementChanged",value:function(){(0,r.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,r.removeNode)(this.element),(0,o.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,o.listen)(e,t.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(m.ELEMENT,e)}},{key:"setMap",value:function(e){this.set(m.MAP,e)}},{key:"setOffset",value:function(e){this.set(m.OFFSET,e)}},{key:"setPosition",value:function(e){this.set(m.POSITION,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(m.POSITION)){var n=this.getRect(t.getTargetElement(),t.getSize()),o=this.getElement(),s=this.getRect(o,[(0,r.outerWidth)(o),(0,r.outerHeight)(o)]),a=void 0===(e=e||{}).margin?20:e.margin;if(!(0,i.containsExtent)(n,s)){var u=s[0]-n[0],l=n[2]-s[2],f=s[1]-n[1],c=n[3]-s[3],d=[0,0];if(u<0?d[0]=u-a:l<0&&(d[0]=Math.abs(l)+a),f<0?d[1]=f-a:c<0&&(d[1]=Math.abs(c)+a),0!==d[0]||0!==d[1]){var h=t.getView().getCenterInternal(),p=t.getPixelFromCoordinateInternal(h);if(!p)return;var y=[p[0]+d[0],p[1]+d[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(y),duration:g.duration,easing:g.easing})}}}}},{key:"getRect",value:function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]}},{key:"setPositioning",value:function(e){this.set(m.POSITIONING,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(e[0]+i[0])+"px",s=Math.round(e[1]+i[1])+"px",a="0%",u="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?a="-100%":"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(a="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?u="-100%":"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(u="-50%");var l="translate(".concat(a,", ").concat(u,") translate(").concat(r,", ").concat(s,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l)}},{key:"getOptions",value:function(){return this.options}}]),l}(),O=P;exports.default=O;
},{"./Object.js":"PhPh","./MapEventType.js":"xLGm","./css.js":"HgMV","./extent.js":"QDir","./events.js":"UqnM","./dom.js":"Xno5"}],"C8Du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Tile.js")),t=require("./dom.js"),r=require("./util.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=h();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=[],_=function(n){f(u,e.default);var o=p(u);function u(e,t,r,n){var c;return i(this,u),(c=o.call(this,e,t,{transition:0})).context_={},c.executorGroups={},c.declutterExecutorGroups={},c.loadingSourceTiles=0,c.hitDetectionImageData={},c.replayState_={},c.sourceTiles=[],c.errorTileKeys={},c.wantedResolution,c.getSourceTiles=n.bind(void 0,d(c)),c.wrappedTileCoord=r,c}return c(u,[{key:"getContext",value:function(e){var n=(0,r.getUid)(e);return n in this.context_||(this.context_[n]=(0,t.createCanvasContext2D)(1,1,b)),this.context_[n]}},{key:"hasContext",value:function(e){return(0,r.getUid)(e)in this.context_}},{key:"getImage",value:function(e){return this.hasContext(e)?this.getContext(e).canvas:null}},{key:"getReplayState",value:function(e){var t=(0,r.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var e in this.context_){var r=this.context_[e];(0,t.releaseCanvas)(r),b.push(r.canvas),delete this.context_[e]}a(v(u.prototype),"release",this).call(this)}}]),u}(),g=_;exports.default=g;
},{"./Tile.js":"IWZI","./dom.js":"Xno5","./util.js":"KniQ"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,o=p(t);if(e){var n=p(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(r){f(u,t.default);var o=a(u);function u(t,e,r,i,f,c){var a;return n(this,u),(a=o.call(this,t,e,c)).extent=null,a.format_=i,a.features_=null,a.loader_,a.projection=null,a.resolution,a.tileLoadFunction_=f,a.url_=r,a.key=r,a}return i(u,[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(t,e){this.setFeatures(t)}},{key:"onError",value:function(){this.setState(e.default.ERROR)}},{key:"setFeatures",value:function(t){this.features_=t,this.setState(e.default.LOADED)}},{key:"setLoader",value:function(t){this.loader_=t}}]),u}(),h=d;exports.default=h;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG"}],"DRei":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AssertionError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Collection",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Disposable",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Feature",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Geolocation",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ImageBase",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ImageTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Kinetic",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"MapBrowserEvent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"MapBrowserEventHandler",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"MapEvent",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Object",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Observable",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Overlay",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"TileCache",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"TileQueue",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"TileRange",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return E.VERSION}}),Object.defineProperty(exports,"VectorRenderTile",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"getUid",{enumerable:!0,get:function(){return E.getUid}});var e=I(require("./AssertionError.js")),r=I(require("./Collection.js")),t=I(require("./Disposable.js")),n=I(require("./Feature.js")),u=I(require("./Geolocation.js")),i=I(require("./layer/Graticule.js")),o=I(require("./Image.js")),a=I(require("./ImageBase.js")),l=I(require("./ImageCanvas.js")),f=I(require("./ImageTile.js")),s=I(require("./Kinetic.js")),c=I(require("./Map.js")),p=I(require("./MapBrowserEvent.js")),b=I(require("./MapBrowserEventHandler.js")),d=I(require("./MapEvent.js")),j=I(require("./Object.js")),g=I(require("./Observable.js")),O=I(require("./Overlay.js")),m=I(require("./Tile.js")),y=I(require("./TileCache.js")),x=I(require("./TileQueue.js")),P=I(require("./TileRange.js")),q=I(require("./VectorRenderTile.js")),v=I(require("./VectorTile.js")),T=I(require("./View.js")),E=require("./util.js");function I(e){return e&&e.__esModule?e:{default:e}}
},{"./AssertionError.js":"ygGQ","./Collection.js":"FnDa","./Disposable.js":"DDda","./Feature.js":"mYW9","./Geolocation.js":"X4ix","./layer/Graticule.js":"wXs0","./Image.js":"DHWK","./ImageBase.js":"Ojbp","./ImageCanvas.js":"K7j2","./ImageTile.js":"TOsW","./Kinetic.js":"gAnK","./Map.js":"kYy5","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapEvent.js":"vFcA","./Object.js":"PhPh","./Observable.js":"IdSm","./Overlay.js":"qWcX","./Tile.js":"IWZI","./TileCache.js":"YFDe","./TileQueue.js":"tHOl","./TileRange.js":"snev","./VectorRenderTile.js":"C8Du","./VectorTile.js":"yj80","./View.js":"hNqE","./util.js":"KniQ"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"HTO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Layer.js")),t=r(require("./TileProperty.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=d();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(r){l(u,e.default);var n=s(u);function u(e){var t;o(this,u),e=e||{};var r=Object.assign({},e);return delete r.preload,delete r.useInterimTilesOnError,(t=n.call(this,r)).on,t.once,t.un,t.setPreload(void 0!==e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t}return i(u,[{key:"getPreload",value:function(){return this.get(t.default.PRELOAD)}},{key:"setPreload",value:function(e){this.set(t.default.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)}},{key:"getData",value:function(e){return c(b(u.prototype),"getData",this).call(this,e)}}]),u}(),v=O;exports.default=v;
},{"./Layer.js":"GCgv","./TileProperty.js":"M5pz"}],"hkMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./Layer.js")),t=d(require("../../ImageTile.js")),r=d(require("../../reproj/Tile.js")),i=d(require("../../TileRange.js")),n=d(require("../../TileState.js")),o=require("../../transform.js"),a=require("../../extent.js"),l=require("../../proj.js"),s=require("../../util.js"),u=require("../../array.js"),c=require("../../size.js");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=y(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=w();return function(){var r,i=j(e);if(t){var n=j(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(d){T(h,e.default);var f=x(h);function h(e){var t;return g(this,h),(t=f.call(this,e)).extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,a.createEmpty)(),t.tmpTileRange_=new i.default(0,0,0,0),t}return p(h,[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==n.default.LOADED||r==n.default.EMPTY||r==n.default.ERROR&&!i}},{key:"getTile",value:function(e,t,r,i){var o=i.pixelRatio,a=i.viewState.projection,l=this.getLayer(),s=l.getSource().getTile(e,t,r,o,a);return s.getState()==n.default.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(e){var i=this.frameState;if(!i)return null;var l=this.getLayer(),s=(0,o.apply)(i.pixelToCoordinateTransform,e.slice()),u=l.getExtent();if(u&&!(0,a.containsCoordinate)(u,s))return null;for(var d=i.pixelRatio,f=i.viewState.projection,g=i.viewState,h=l.getRenderSource(),p=h.getTileGridForProjection(g.projection),v=h.getTilePixelRatio(i.pixelRatio),y=p.getZForResolution(g.resolution);y>=p.getMinZoom();--y){var T=p.getTileCoordForCoordAndZ(s,y),m=h.getTile(y,T[1],T[2],d,f);if(!(m instanceof t.default||m instanceof r.default)||m instanceof r.default&&m.getState()===n.default.EMPTY)return null;if(m.getState()===n.default.LOADED){var x=p.getOrigin(y),b=(0,c.toSize)(p.getTileSize(y)),R=p.getResolution(y),w=Math.floor(v*((s[0]-x[0])/R-T[1]*b[0])),j=Math.floor(v*((x[1]-s[1])/R-T[2]*b[1])),S=Math.round(v*h.getGutterForProjection(g.projection));return this.getImageData(m.getImage(),w+S,j+S)}}return null}},{key:"loadedTileCallback",value:function(e,t,r){return!!this.isDrawableTile(r)&&v(j(h.prototype),"loadedTileCallback",this).call(this,e,t,r)}},{key:"prepareFrame",value:function(e){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,c=i.projection,d=i.resolution,f=i.center,g=i.rotation,h=e.pixelRatio,p=this.getLayer(),v=p.getSource(),y=v.getRevision(),T=v.getTileGridForProjection(c),m=T.getZForResolution(d,v.zDirection),x=T.getResolution(m),b=e.extent,R=e.viewState.resolution,w=v.getTilePixelRatio(h),j=Math.round((0,a.getWidth)(b)/R*h),S=Math.round((0,a.getHeight)(b)/R*h),E=r.extent&&(0,l.fromUserExtent)(r.extent,c);E&&(b=(0,a.getIntersection)(b,(0,l.fromUserExtent)(r.extent,c)));var P=x*j/2/w,C=x*S/2/w,O=[f[0]-P,f[1]-C,f[0]+P,f[1]+C],_=T.getTileRangeForExtentAndZ(b,m),I={};I[m]={};var k=this.createLoadedTileFinder(v,c,I),D=this.tmpExtent,F=this.tmpTileRange_;this.newTiles_=!1;for(var M=g?(0,a.getRotatedViewport)(i.center,R,g,e.size):void 0,q=_.minX;q<=_.maxX;++q)for(var A=_.minY;A<=_.maxY;++A)if(!g||T.tileCoordIntersectsViewport([m,q,A],M)){var U=this.getTile(m,q,A,e);if(this.isDrawableTile(U)){var L=(0,s.getUid)(this);if(U.getState()==n.default.LOADED){I[m][U.tileCoord.toString()]=U;var z=U.inTransition(L);z&&1!==r.opacity&&(U.endTransition(L),z=!1),this.newTiles_||!z&&this.renderedTiles.includes(U)||(this.newTiles_=!0)}if(1===U.getAlpha(L,e.time))continue}var Z=T.getTileCoordChildTileRange(U.tileCoord,F,D),Y=!1;Z&&(Y=k(m+1,Z)),Y||T.forEachTileCoordParentTileRange(U.tileCoord,k,F,D)}var G=x/d*h/w;(0,o.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,g,-j/2,-S/2);var K=(0,o.toString)(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));var V=this.context,X=V.canvas;(0,o.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,o.compose)(this.tempTransform,j/2,S/2,G,G,0,-j/2,-S/2),X.width!=j||X.height!=S?(X.width=j,X.height=S):this.containerReused||V.clearRect(0,0,j,S),E&&this.clipUnrotated(V,e,E),v.getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e),this.renderedTiles.length=0;var B,Q,H,N=Object.keys(I).map(Number);N.sort(u.numberSafeCompareFunction),1!==r.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(B=[],Q=[]):N=N.reverse();for(var W=N.length-1;W>=0;--W){var J=N[W],$=v.getTilePixelSize(J,h,c),ee=T.getResolution(J)/x,te=$[0]*ee*G,re=$[1]*ee*G,ie=T.getTileCoordForCoordAndZ((0,a.getTopLeft)(O),J),ne=T.getTileCoordExtent(ie),oe=(0,o.apply)(this.tempTransform,[w*(ne[0]-O[0])/x,w*(O[3]-ne[3])/x]),ae=w*v.getGutterForProjection(c),le=I[J];for(var se in le){var ue=le[se],ce=ue.tileCoord,de=ie[1]-ce[1],fe=Math.round(oe[0]-(de-1)*te),ge=ie[2]-ce[2],he=Math.round(oe[1]-(ge-1)*re),pe=Math.round(oe[0]-de*te),ve=Math.round(oe[1]-ge*re),ye=fe-pe,Te=he-ve,me=m===J,xe=me&&1!==ue.getAlpha((0,s.getUid)(this),e.time),be=!1;if(!xe)if(B){H=[pe,ve,pe+ye,ve,pe+ye,ve+Te,pe,ve+Te];for(var Re=0,we=B.length;Re<we;++Re)if(m!==J&&J<Q[Re]){var je=B[Re];(0,a.intersects)([pe,ve,pe+ye,ve+Te],[je[0],je[3],je[4],je[7]])&&(be||(V.save(),be=!0),V.beginPath(),V.moveTo(H[0],H[1]),V.lineTo(H[2],H[3]),V.lineTo(H[4],H[5]),V.lineTo(H[6],H[7]),V.moveTo(je[6],je[7]),V.lineTo(je[4],je[5]),V.lineTo(je[2],je[3]),V.lineTo(je[0],je[1]),V.clip())}B.push(H),Q.push(J)}else V.clearRect(pe,ve,ye,Te);this.drawTileImage(ue,e,pe,ve,ye,Te,ae,me),B&&!xe?(be&&V.restore(),this.renderedTiles.unshift(ue)):this.renderedTiles.push(ue),this.updateUsedTiles(e.usedTiles,v,ue)}}return this.renderedRevision=y,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,a.equals)(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=h,this.renderedProjection=c,this.manageTilePyramid(e,v,T,h,c,b,m,p.getPreload()),this.scheduleExpireCache(e,v),this.postRender(V,e),r.extent&&V.restore(),V.imageSmoothingEnabled=!0,K!==X.style.transform&&(X.style.transform=K),this.container}},{key:"drawTileImage",value:function(e,t,r,i,n,o,a,l){var u=this.getTileImage(e);if(u){var c=(0,s.getUid)(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(c,t.time):1),g=f!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,n,o),g&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(c)}}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=(0,s.getUid)(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(e,t,r){var i=(0,s.getUid)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(e,t,r,i,o,l,u,c,d){var f=(0,s.getUid)(t);f in e.wantedTiles||(e.wantedTiles[f]={});var g,h,p,v,y,T,m=e.wantedTiles[f],x=e.tileQueue,b=r.getMinZoom(),R=e.viewState.rotation,w=R?(0,a.getRotatedViewport)(e.viewState.center,e.viewState.resolution,R,e.size):void 0,j=0;for(T=b;T<=u;++T)for(h=r.getTileRangeForExtentAndZ(l,T,h),p=r.getResolution(T),v=h.minX;v<=h.maxX;++v)for(y=h.minY;y<=h.maxY;++y)R&&!r.tileCoordIntersectsViewport([T,v,y],w)||(u-T<=c?(++j,(g=t.getTile(T,v,y,i,o)).getState()==n.default.IDLE&&(m[g.getKey()]=!0,x.isKeyQueued(g.getKey())||x.enqueue([g,f,r.getTileCoordCenter(g.tileCoord),p])),void 0!==d&&d(g)):t.useTile(T,v,y,o));t.updateCacheSize(j,o)}}]),h}(),E=S;exports.default=E;
},{"./Layer.js":"vPfl","../../ImageTile.js":"TOsW","../../reproj/Tile.js":"WlOd","../../TileRange.js":"snev","../../TileState.js":"u3kG","../../transform.js":"P4eA","../../extent.js":"QDir","../../proj.js":"Diht","../../util.js":"KniQ","../../array.js":"luEr","../../size.js":"TAHd"}],"BUEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseTile.js")),t=r(require("../renderer/canvas/TileLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=s();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(r){i(u,e.default);var n=l(u);function u(e){return o(this,u),n.call(this,e)}return c(u,[{key:"createRenderer",value:function(){return new t.default(this)}}]),u}(),d=b;exports.default=d;
},{"./BaseTile.js":"HTO1","../renderer/canvas/TileLayer.js":"hkMV"}],"ZHEI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Layer.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=p();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){c(n,t.default);var r=i(n);function n(t){return u(this,n),t=t||{},r.call(this,t)}return o(n)}(),b=s;exports.default=b;
},{"./Layer.js":"GCgv"}],"rzNj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./Layer.js")),t=a(require("../../ImageState.js")),r=a(require("../../ViewHint.js")),n=require("../../transform.js"),o=require("../../extent.js"),i=require("../../proj.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=m();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(a){f(l,e.default);var u=p(l);function l(e){var t;return s(this,l),(t=u.call(this,e)).image_=null,t}return c(l,[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(e){var n=e.layerStatesArray[e.layerIndex],a=e.pixelRatio,u=e.viewState,s=u.resolution,l=this.getLayer().getSource(),c=e.viewHints,f=e.extent;if(void 0!==n.extent&&(f=(0,o.getIntersection)(f,(0,i.fromUserExtent)(n.extent,u.projection))),!c[r.default.ANIMATING]&&!c[r.default.INTERACTING]&&!(0,o.isEmpty)(f))if(l){var h=u.projection,p=l.getImage(f,s,a,h);p&&(this.loadImage(p)?this.image_=p:p.getState()===t.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),i=(0,n.apply)(t.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!(0,o.containsCoordinate)(a,i))return null;var u=this.image_.getExtent(),s=this.image_.getImage(),l=(0,o.getWidth)(u),c=Math.floor(s.width*((i[0]-u[0])/l));if(c<0||c>=s.width)return null;var f=(0,o.getHeight)(u),h=Math.floor(s.height*((u[3]-i[1])/f));return h<0||h>=s.height?null:this.getImageData(s,c,h)}},{key:"renderFrame",value:function(e,t){var r=this.image_,a=r.getExtent(),u=r.getResolution(),s=r.getPixelRatio(),l=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,f=e.viewState,h=f.center,p=c*u/(f.resolution*s),g=e.extent,y=f.resolution,m=f.rotation,d=Math.round((0,o.getWidth)(g)/y*c),v=Math.round((0,o.getHeight)(g)/y*c);(0,n.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,m,-d/2,-v/2),(0,n.makeInverse)(this.inversePixelTransform,this.pixelTransform);var b=(0,n.toString)(this.pixelTransform);this.useContainer(t,b,this.getBackground(e));var x=this.context,w=x.canvas;w.width!=d||w.height!=v?(w.width=d,w.height=v):this.containerReused||x.clearRect(0,0,d,v);var j=!1,_=!0;if(l.extent){var I=(0,i.fromUserExtent)(l.extent,f.projection);(j=(_=(0,o.intersects)(I,e.extent))&&!(0,o.containsExtent)(I,e.extent))&&this.clipUnrotated(x,e,I)}var S=r.getImage(),O=(0,n.compose)(this.tempTransform,d/2,v/2,p,p,0,s*(a[0]-h[0])/u,s*(h[1]-a[3])/u);this.renderedResolution=u*c/s;var R=S.width*O[0],E=S.height*O[3];if(this.getLayer().getSource().getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,e),_&&R>=.5&&E>=.5){var T,P=O[4],A=O[5],M=l.opacity;1!==M&&(T=x.globalAlpha,x.globalAlpha=M),x.drawImage(S,0,0,+S.width,+S.height,P,A,R,E),1!==M&&(x.globalAlpha=T)}return this.postRender(x,e),j&&x.restore(),x.imageSmoothingEnabled=!0,b!==w.style.transform&&(w.style.transform=b),this.container}}]),l}(),b=v;exports.default=b;
},{"./Layer.js":"vPfl","../../ImageState.js":"u3kG","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../extent.js":"QDir","../../proj.js":"Diht"}],"KHBf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseImage.js")),t=r(require("../renderer/canvas/ImageLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=b();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(r){a(u,e.default);var n=p(u);function u(e){return o(this,u),n.call(this,e)}return c(u,[{key:"createRenderer",value:function(){return new t.default(this)}},{key:"getData",value:function(e){return i(d(u.prototype),"getData",this).call(this,e)}}]),u}(),v=h;exports.default=v;
},{"./BaseImage.js":"ZHEI","../renderer/canvas/ImageLayer.js":"rzNj"}],"QvaY":[function(require,module,exports) {
"use strict";require("ol/ol.css"),require("ol-layerswitcher/dist/ol-layerswitcher.css");var e=u(require("ol/source/ImageWMS")),r=u(require("ol/Map")),t=u(require("ol/source/XYZ")),o=u(require("ol/View")),a=require("ol"),n=require("ol/proj"),l=u(require("ol/layer/Tile")),i=u(require("ol/layer/Image")),s=require("ol/coordinate");function u(e){return e&&e.__esModule?e:{default:e}}var c=new r.default({target:"map",layers:[new l.default({source:new t.default({url:"https://maps.geoapify.com/v1/tile/dark-matter/{z}/{x}/{y}.png?apiKey=f37224251b89444b9394b4d49f3551c6"})}),new i.default({extent:[-9074603.998,5483898.1573,-8885040.1679,5629434.2591],source:new e.default({url:"http://10.90.30.74:8085/geoserver/wms",params:{LAYERS:"postgres-db:nominal_trunkline0"},ratio:1,serverType:"geoserver"})}),new i.default({extent:[-9074603.998,5483898.1573,-8885040.1679,5629434.2591],source:new e.default({url:"http://10.90.30.74:8085/geoserver/wms",params:{LAYERS:"postgres-db:nominal_pedestal0"},ratio:1,serverType:"geoserver"})})],view:new o.default({center:(0,n.fromLonLat)([-80.94349,44.56717]),zoom:10})}),d=document.getElementById("popup-closer");d.onclick=function(){return a.Overlay.setPosition(0,0,0),d.blur(),!1};var p=(0,n.fromLonLat)([-80.94349,44.56717]),m=new a.Overlay({element:document.getElementById("popup")});c.addOverlay(m);var v=new a.Overlay({position:p,element:document.getElementById("marker"),stopEvent:!1});c.addOverlay(v);var y=new a.Overlay({position:p,element:document.getElementById("vienna")});c.addOverlay(y);var w=m.getElement();c.on("click",function(e){var r=e.coordinate,t=(0,s.toStringHDMS)((0,n.toLonLat)(r));m.setPosition(r);var o=bootstrap.Popover.getInstance(w);o&&o.dispose(),(o=new bootstrap.Popover(w,{animation:!1,container:w,content:"<p>The location you clicked was:</p><code>"+t+"</code>",html:!0,placement:"top",title:"GIS@GBTel"})).show()});
},{"ol/ol.css":"JiFC","ol-layerswitcher/dist/ol-layerswitcher.css":"JiFC","ol/source/ImageWMS":"e4Kb","ol/Map":"kYy5","ol/source/XYZ":"knlU","ol/View":"hNqE","ol":"DRei","ol/proj":"Diht","ol/layer/Tile":"BUEc","ol/layer/Image":"KHBf","ol/coordinate":"nGsj"}]},{},["QvaY"], null)
//# sourceMappingURL=/csb-tpz2lh/js.996064b5.js.map